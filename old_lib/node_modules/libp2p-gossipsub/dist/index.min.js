(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2pGossipsub = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Libp2pGossipsub=(()=>{var uu=Object.defineProperty;var _g=t=>uu(t,"__esModule",{value:!0});var hu=typeof require!="undefined"?require:t=>{throw new Error('Dynamic require of "'+t+'" is not supported')};var _e=(t,e)=>()=>(t&&(e=t(t=0)),e);var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Dt=(t,e)=>{_g(t);for(var r in e)uu(t,r,{get:e[r],enumerable:!0})};var du=T((Z9,lu)=>{var An=1e3,Cn=An*60,Bn=Cn*60,Hi=Bn*24,Sg=Hi*7,Eg=Hi*365.25;lu.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Ig(t);if(r==="number"&&isFinite(t))return e.long?Cg(t):Ag(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Ig(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*Eg;case"weeks":case"week":case"w":return r*Sg;case"days":case"day":case"d":return r*Hi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Bn;case"minutes":case"minute":case"mins":case"min":case"m":return r*Cn;case"seconds":case"second":case"secs":case"sec":case"s":return r*An;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Ag(t){var e=Math.abs(t);return e>=Hi?Math.round(t/Hi)+"d":e>=Bn?Math.round(t/Bn)+"h":e>=Cn?Math.round(t/Cn)+"m":e>=An?Math.round(t/An)+"s":t+"ms"}function Cg(t){var e=Math.abs(t);return e>=Hi?la(t,e,Hi,"day"):e>=Bn?la(t,e,Bn,"hour"):e>=Cn?la(t,e,Cn,"minute"):e>=An?la(t,e,An,"second"):t+" ms"}function la(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var bu=T((Q9,pu)=>{function Bg(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=n,r.enabled=a,r.humanize=du(),r.destroy=c,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let h=0;for(let p=0;p<f.length;p++)h=(h<<5)-h+f.charCodeAt(p),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(f){let h,p=null,g,y;function S(...B){if(!S.enabled)return;let I=S,M=Number(new Date),D=M-(h||M);I.diff=D,I.prev=h,I.curr=M,h=M,B[0]=r.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");let q=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,(O,V)=>{if(O==="%%")return"%";q++;let U=r.formatters[V];if(typeof U=="function"){let X=B[q];O=U.call(I,X),B.splice(q,1),q--}return O}),r.formatArgs.call(I,B),(I.log||r.log).apply(I,B)}return S.namespace=f,S.useColors=r.useColors(),S.color=r.selectColor(f),S.extend=i,S.destroy=r.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==r.namespaces&&(g=r.namespaces,y=r.enabled(f)),y),set:B=>{p=B}}),typeof r.init=="function"&&r.init(S),S}function i(f,h){let p=r(this.namespace+(typeof h=="undefined"?":":h)+f);return p.log=this.log,p}function n(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let h,p=(typeof f=="string"?f:"").split(/[\s,]+/),g=p.length;for(h=0;h<g;h++)!p[h]||(f=p[h].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(o),...r.skips.map(o).map(h=>"-"+h)].join(",");return r.enable(""),f}function a(f){if(f[f.length-1]==="*")return!0;let h,p;for(h=0,p=r.skips.length;h<p;h++)if(r.skips[h].test(f))return!1;for(h=0,p=r.names.length;h<p;h++)if(r.names[h].test(f))return!0;return!1}function o(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}pu.exports=Bg});var pa=T((Xt,da)=>{Xt.formatArgs=Tg;Xt.save=Mg;Xt.load=Pg;Xt.useColors=Rg;Xt.storage=Dg();Xt.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Xt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Rg(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Tg(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+da.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}Xt.log=console.debug||console.log||(()=>{});function Mg(t){try{t?Xt.storage.setItem("debug",t):Xt.storage.removeItem("debug")}catch(e){}}function Pg(){let t;try{t=Xt.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Dg(){try{return localStorage}catch(t){}}da.exports=bu()(Xt);var{formatters:Og}=da.exports;Og.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var gf=T((e7,yf)=>{"use strict";var Rn=typeof Reflect=="object"?Reflect:null,yu=Rn&&typeof Rn.apply=="function"?Rn.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},ba;Rn&&typeof Rn.ownKeys=="function"?ba=Rn.ownKeys:Object.getOwnPropertySymbols?ba=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ba=function(e){return Object.getOwnPropertyNames(e)};function Ng(t){console&&console.warn&&console.warn(t)}var gu=Number.isNaN||function(e){return e!==e};function Se(){Se.init.call(this)}yf.exports=Se;yf.exports.once=Kg;Se.EventEmitter=Se;Se.prototype._events=void 0;Se.prototype._eventsCount=0;Se.prototype._maxListeners=void 0;var vu=10;function ya(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Se,"defaultMaxListeners",{enumerable:!0,get:function(){return vu},set:function(t){if(typeof t!="number"||t<0||gu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vu=t}});Se.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Se.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||gu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function mu(t){return t._maxListeners===void 0?Se.defaultMaxListeners:t._maxListeners}Se.prototype.getMaxListeners=function(){return mu(this)};Se.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")yu(u,this,r);else for(var c=u.length,f=Eu(u,c),i=0;i<c;++i)yu(f[i],this,r);return!0};function xu(t,e,r,i){var n,s,a;if(ya(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),n=mu(t),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,Ng(o)}return t}Se.prototype.addListener=function(e,r){return xu(this,e,r,!1)};Se.prototype.on=Se.prototype.addListener;Se.prototype.prependListener=function(e,r){return xu(this,e,r,!0)};function Lg(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wu(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=Lg.bind(i);return n.listener=r,i.wrapFn=n,n}Se.prototype.once=function(e,r){return ya(r),this.on(e,wu(this,e,r)),this};Se.prototype.prependOnceListener=function(e,r){return ya(r),this.prependListener(e,wu(this,e,r)),this};Se.prototype.removeListener=function(e,r){var i,n,s,a,o;if(ya(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,a=i.length-1;a>=0;a--)if(i[a]===r||i[a].listener===r){o=i[a].listener,s=a;break}if(s<0)return this;s===0?i.shift():kg(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};Se.prototype.off=Se.prototype.removeListener;Se.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),a;for(n=0;n<s.length;++n)a=s[n],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function _u(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?qg(n):Eu(n,n.length)}Se.prototype.listeners=function(e){return _u(this,e,!0)};Se.prototype.rawListeners=function(e){return _u(this,e,!1)};Se.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Su.call(t,e)};Se.prototype.listenerCount=Su;function Su(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Se.prototype.eventNames=function(){return this._eventsCount>0?ba(this._events):[]};function Eu(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function kg(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function qg(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Kg(t,e){return new Promise(function(r,i){function n(a){t.removeListener(e,s),i(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}Iu(t,e,s,{once:!0}),e!=="error"&&Fg(t,n,{once:!0})})}function Fg(t,e,r){typeof t.on=="function"&&Iu(t,"error",e,r)}function Iu(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Zt=T((t7,Cu)=>{"use strict";function Au(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Ug(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Au(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Au(new n,r)}}Cu.exports=Ug});var mf=T((r7,Tn)=>{var Bu=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},vf=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),ga=t=>t&&typeof t.sink=="function"&&vf(t.source),Gg=t=>e=>(t.sink(e),t.source),Ru=(...t)=>{if(ga(t[0])){let e=t[0];t[0]=()=>e.source}else if(vf(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&ga(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)ga(t[e])&&(t[e]=Gg(t[e]));return Bu(...t)};Tn.exports=Ru;Tn.exports.pipe=Ru;Tn.exports.rawPipe=Bu;Tn.exports.isIterable=vf;Tn.exports.isDuplex=ga});var Ou=T((i7,Du)=>{"use strict";var Tu=()=>{},Mu=Symbol.for("@libp2p/js-interfaces/topology"),Pu=class{constructor({min:e=0,max:r=1/0,handlers:i={}}){this.min=e,this.max=r,this._onConnect=i.onConnect||Tu,this._onDisconnect=i.onDisconnect||Tu,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[Mu](){return!0}static isTopology(e){return Boolean(e&&e[Mu])}set registrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};Du.exports=Pu});var qu=T((n7,ku)=>{"use strict";var zg=Ou(),Nu=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),Lu=class extends zg{constructor({min:e,max:r,multicodecs:i,handlers:n}){super({min:e,max:r,handlers:n});if(!i)throw new Error("one or more multicodec should be provided");if(!n)throw new Error("the handlers should be provided");if(typeof n.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof n.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(i)?i:[i],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[Nu](){return!0}static isMulticodecTopology(e){return Boolean(e&&e[Nu])}set registrar(e){this._registrar=e,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),this._updatePeers(this._registrar.peerStore.peers.values())}_updatePeers(e){for(let{id:r,protocols:i}of e)if(this.multicodecs.filter(n=>i.includes(n)).length){this.peers.add(r.toB58String());let n=this._registrar.getConnection(r);n&&this._onConnect(r,n)}else this.peers.delete(r.toB58String())}_onProtocolChange({peerId:e,protocols:r}){let i=this.peers.has(e.toB58String()),n=r.filter(s=>this.multicodecs.includes(s));i&&n.length===0&&this._onDisconnect(e);for(let s of r)if(this.multicodecs.includes(s)){let a=this._registrar.peerStore.get(e);this._updatePeers([a]);return}}_onPeerConnect(e){let r=e.remotePeer,i=this._registrar.peerStore.protoBook.get(r);!i||this.multicodecs.find(n=>i.includes(n))&&(this.peers.add(r.toB58String()),this._onConnect(r,e))}};ku.exports=Lu});var va=T(Ku=>{"use strict";Ku.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}});var Uu=T((a7,Fu)=>{"use strict";Fu.exports=Vg;function Vg(t,e){for(var r=new Array(arguments.length-1),i=0,n=2,s=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(o,u){r[i]=function(f){if(s)if(s=!1,f)u(f);else{for(var h=new Array(arguments.length-1),p=0;p<h.length;)h[p++]=arguments[p];o.apply(null,h)}};try{t.apply(e||null,r)}catch(c){s&&(s=!1,u(c))}})}});var ju=T(Vu=>{"use strict";var ma=Vu;ma.length=function(e){var r=e.length;if(!r)return 0;for(var i=0;--r%4>1&&e.charAt(r)==="=";)++i;return Math.ceil(e.length*3)/4-i};var Mn=new Array(64),Gu=new Array(123);for(hr=0;hr<64;)Gu[Mn[hr]=hr<26?hr+65:hr<52?hr+71:hr<62?hr-4:hr-59|43]=hr++;var hr;ma.encode=function(e,r,i){for(var n=null,s=[],a=0,o=0,u;r<i;){var c=e[r++];switch(o){case 0:s[a++]=Mn[c>>2],u=(c&3)<<4,o=1;break;case 1:s[a++]=Mn[u|c>>4],u=(c&15)<<2,o=2;break;case 2:s[a++]=Mn[u|c>>6],s[a++]=Mn[c&63],o=0;break}a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),a=0)}return o&&(s[a++]=Mn[u],s[a++]=61,o===1&&(s[a++]=61)),n?(a&&n.push(String.fromCharCode.apply(String,s.slice(0,a))),n.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var zu="invalid encoding";ma.decode=function(e,r,i){for(var n=i,s=0,a,o=0;o<e.length;){var u=e.charCodeAt(o++);if(u===61&&s>1)break;if((u=Gu[u])===void 0)throw Error(zu);switch(s){case 0:a=u,s=1;break;case 1:r[i++]=a<<2|(u&48)>>4,a=u,s=2;break;case 2:r[i++]=(a&15)<<4|(u&60)>>2,a=u,s=3;break;case 3:r[i++]=(a&3)<<6|u,s=0;break}}if(s===1)throw Error(zu);return i-n};ma.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Wu=T((f7,Hu)=>{"use strict";Hu.exports=xa;function xa(){this._listeners={}}xa.prototype.on=function(e,r,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:i||this}),this};xa.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this};xa.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this}});var eh=T((c7,Qu)=>{"use strict";Qu.exports=Yu(Yu);function Yu(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),i=r[3]===128;function n(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function s(u,c,f){e[0]=u,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}t.writeFloatLE=i?n:s,t.writeFloatBE=i?s:n;function a(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],e[0]}function o(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],e[0]}t.readFloatLE=i?a:o,t.readFloatBE=i?o:a}():function(){function e(i,n,s,a){var o=n<0?1:0;if(o&&(n=-n),n===0)i(1/n>0?0:2147483648,s,a);else if(isNaN(n))i(2143289344,s,a);else if(n>34028234663852886e22)i((o<<31|2139095040)>>>0,s,a);else if(n<11754943508222875e-54)i((o<<31|Math.round(n/1401298464324817e-60))>>>0,s,a);else{var u=Math.floor(Math.log(n)/Math.LN2),c=Math.round(n*Math.pow(2,-u)*8388608)&8388607;i((o<<31|u+127<<23|c)>>>0,s,a)}}t.writeFloatLE=e.bind(null,Ju),t.writeFloatBE=e.bind(null,$u);function r(i,n,s){var a=i(n,s),o=(a>>31)*2+1,u=a>>>23&255,c=a&8388607;return u===255?c?NaN:o*(1/0):u===0?o*1401298464324817e-60*c:o*Math.pow(2,u-150)*(c+8388608)}t.readFloatLE=r.bind(null,Xu),t.readFloatBE=r.bind(null,Zu)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),i=r[7]===128;function n(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function s(u,c,f){e[0]=u,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}t.writeDoubleLE=i?n:s,t.writeDoubleBE=i?s:n;function a(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],e[0]}function o(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],e[0]}t.readDoubleLE=i?a:o,t.readDoubleBE=i?o:a}():function(){function e(i,n,s,a,o,u){var c=a<0?1:0;if(c&&(a=-a),a===0)i(0,o,u+n),i(1/a>0?0:2147483648,o,u+s);else if(isNaN(a))i(0,o,u+n),i(2146959360,o,u+s);else if(a>17976931348623157e292)i(0,o,u+n),i((c<<31|2146435072)>>>0,o,u+s);else{var f;if(a<22250738585072014e-324)f=a/5e-324,i(f>>>0,o,u+n),i((c<<31|f/4294967296)>>>0,o,u+s);else{var h=Math.floor(Math.log(a)/Math.LN2);h===1024&&(h=1023),f=a*Math.pow(2,-h),i(f*4503599627370496>>>0,o,u+n),i((c<<31|h+1023<<20|f*1048576&1048575)>>>0,o,u+s)}}}t.writeDoubleLE=e.bind(null,Ju,0,4),t.writeDoubleBE=e.bind(null,$u,4,0);function r(i,n,s,a,o){var u=i(a,o+n),c=i(a,o+s),f=(c>>31)*2+1,h=c>>>20&2047,p=4294967296*(c&1048575)+u;return h===2047?p?NaN:f*(1/0):h===0?f*5e-324*p:f*Math.pow(2,h-1075)*(p+4503599627370496)}t.readDoubleLE=r.bind(null,Xu,0,4),t.readDoubleBE=r.bind(null,Zu,4,0)}(),t}function Ju(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function $u(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function Xu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Zu(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var th=T((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var ih=T(rh=>{"use strict";var xf=rh;xf.length=function(e){for(var r=0,i=0,n=0;n<e.length;++n)i=e.charCodeAt(n),i<128?r+=1:i<2048?r+=2:(i&64512)==55296&&(e.charCodeAt(n+1)&64512)==56320?(++n,r+=4):r+=3;return r};xf.read=function(e,r,i){var n=i-r;if(n<1)return"";for(var s=null,a=[],o=0,u;r<i;)u=e[r++],u<128?a[o++]=u:u>191&&u<224?a[o++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,a[o++]=55296+(u>>10),a[o++]=56320+(u&1023)):a[o++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0);return s?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};xf.write=function(e,r,i){for(var n=i,s,a,o=0;o<e.length;++o)s=e.charCodeAt(o),s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):(s&64512)==55296&&((a=e.charCodeAt(o+1))&64512)==56320?(s=65536+((s&1023)<<10)+(a&1023),++o,r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128);return i-n}});var sh=T((h7,nh)=>{"use strict";nh.exports=jg;function jg(t,e,r){var i=r||8192,n=i>>>1,s=null,a=i;return function(u){if(u<1||u>n)return t(u);a+u>i&&(s=t(i),a=0);var c=e.call(s,a,a+=u);return a&7&&(a=(a|7)+1),c}}});var oh=T((l7,ah)=>{"use strict";ah.exports=St;var Es=xi();function St(t,e){this.lo=t>>>0,this.hi=e>>>0}var Wi=St.zero=new St(0,0);Wi.toNumber=function(){return 0};Wi.zzEncode=Wi.zzDecode=function(){return this};Wi.length=function(){return 1};var Hg=St.zeroHash="\0\0\0\0\0\0\0\0";St.fromNumber=function(e){if(e===0)return Wi;var r=e<0;r&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return r&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new St(i,n)};St.from=function(e){if(typeof e=="number")return St.fromNumber(e);if(Es.isString(e))if(Es.Long)e=Es.Long.fromString(e);else return St.fromNumber(parseInt(e,10));return e.low||e.high?new St(e.low>>>0,e.high>>>0):Wi};St.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,i=~this.hi>>>0;return r||(i=i+1>>>0),-(r+i*4294967296)}return this.lo+this.hi*4294967296};St.prototype.toLong=function(e){return Es.Long?new Es.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var mi=String.prototype.charCodeAt;St.fromHash=function(e){return e===Hg?Wi:new St((mi.call(e,0)|mi.call(e,1)<<8|mi.call(e,2)<<16|mi.call(e,3)<<24)>>>0,(mi.call(e,4)|mi.call(e,5)<<8|mi.call(e,6)<<16|mi.call(e,7)<<24)>>>0)};St.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};St.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};St.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};St.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}});var xi=T(wf=>{"use strict";var $=wf;$.asPromise=Uu();$.base64=ju();$.EventEmitter=Wu();$.float=eh();$.inquire=th();$.utf8=ih();$.pool=sh();$.LongBits=oh();$.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);$.global=$.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||wf;$.emptyArray=Object.freeze?Object.freeze([]):[];$.emptyObject=Object.freeze?Object.freeze({}):{};$.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};$.isString=function(e){return typeof e=="string"||e instanceof String};$.isObject=function(e){return e&&typeof e=="object"};$.isset=$.isSet=function(e,r){var i=e[r];return i!=null&&e.hasOwnProperty(r)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1};$.Buffer=function(){try{var t=$.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();$._Buffer_from=null;$._Buffer_allocUnsafe=null;$.newBuffer=function(e){return typeof e=="number"?$.Buffer?$._Buffer_allocUnsafe(e):new $.Array(e):$.Buffer?$._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};$.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;$.Long=$.global.dcodeIO&&$.global.dcodeIO.Long||$.global.Long||$.inquire("long");$.key2Re=/^true|false|0|1$/;$.key32Re=/^-?(?:0|[1-9][0-9]*)$/;$.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;$.longToHash=function(e){return e?$.LongBits.from(e).toHash():$.LongBits.zeroHash};$.longFromHash=function(e,r){var i=$.LongBits.fromHash(e);return $.Long?$.Long.fromBits(i.lo,i.hi,r):i.toNumber(Boolean(r))};function fh(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;++n)(t[i[n]]===void 0||!r)&&(t[i[n]]=e[i[n]]);return t}$.merge=fh;$.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function ch(t){function e(r,i){if(!(this instanceof e))return new e(r,i);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&fh(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}$.newError=ch;$.ProtocolError=ch("ProtocolError");$.oneOfGetter=function(e){for(var r={},i=0;i<e.length;++i)r[e[i]]=1;return function(){for(var n=Object.keys(this),s=n.length-1;s>-1;--s)if(r[n[s]]===1&&this[n[s]]!==void 0&&this[n[s]]!==null)return n[s]}};$.oneOfSetter=function(e){return function(r){for(var i=0;i<e.length;++i)e[i]!==r&&delete this[e[i]]}};$.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};$._configure=function(){var t=$.Buffer;if(!t){$._Buffer_from=$._Buffer_allocUnsafe=null;return}$._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,i){return new t(r,i)},$._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Bf=T((p7,dh)=>{"use strict";dh.exports=ge;var er=xi(),_f,wa=er.LongBits,uh=er.base64,hh=er.utf8;function Is(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function Sf(){}function Wg(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function ge(){this.len=0,this.head=new Is(Sf,0,0),this.tail=this.head,this.states=null}var lh=function(){return er.Buffer?function(){return(ge.create=function(){return new _f})()}:function(){return new ge}};ge.create=lh();ge.alloc=function(e){return new er.Array(e)};er.Array!==Array&&(ge.alloc=er.pool(ge.alloc,er.Array.prototype.subarray));ge.prototype._push=function(e,r,i){return this.tail=this.tail.next=new Is(e,r,i),this.len+=r,this};function Ef(t,e,r){e[r]=t&255}function Yg(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function If(t,e){this.len=t,this.next=void 0,this.val=e}If.prototype=Object.create(Is.prototype);If.prototype.fn=Yg;ge.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new If((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};ge.prototype.int32=function(e){return e<0?this._push(Af,10,wa.fromNumber(e)):this.uint32(e)};ge.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Af(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}ge.prototype.uint64=function(e){var r=wa.from(e);return this._push(Af,r.length(),r)};ge.prototype.int64=ge.prototype.uint64;ge.prototype.sint64=function(e){var r=wa.from(e).zzEncode();return this._push(Af,r.length(),r)};ge.prototype.bool=function(e){return this._push(Ef,1,e?1:0)};function Cf(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}ge.prototype.fixed32=function(e){return this._push(Cf,4,e>>>0)};ge.prototype.sfixed32=ge.prototype.fixed32;ge.prototype.fixed64=function(e){var r=wa.from(e);return this._push(Cf,4,r.lo)._push(Cf,4,r.hi)};ge.prototype.sfixed64=ge.prototype.fixed64;ge.prototype.float=function(e){return this._push(er.float.writeFloatLE,4,e)};ge.prototype.double=function(e){return this._push(er.float.writeDoubleLE,8,e)};var Jg=er.Array.prototype.set?function(e,r,i){r.set(e,i)}:function(e,r,i){for(var n=0;n<e.length;++n)r[i+n]=e[n]};ge.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Ef,1,0);if(er.isString(e)){var i=ge.alloc(r=uh.length(e));uh.decode(e,i,0),e=i}return this.uint32(r)._push(Jg,r,e)};ge.prototype.string=function(e){var r=hh.length(e);return r?this.uint32(r)._push(hh.write,r,e):this._push(Ef,1,0)};ge.prototype.fork=function(){return this.states=new Wg(this),this.head=this.tail=new Is(Sf,0,0),this.len=0,this};ge.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Is(Sf,0,0),this.len=0),this};ge.prototype.ldelim=function(){var e=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=r,this.len+=i),this};ge.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,r,i),i+=e.len,e=e.next;return r};ge._configure=function(t){_f=t,ge.create=lh(),_f._configure()}});var yh=T((b7,bh)=>{"use strict";bh.exports=Ar;var ph=Bf();(Ar.prototype=Object.create(ph.prototype)).constructor=Ar;var wi=xi();function Ar(){ph.call(this)}Ar._configure=function(){Ar.alloc=wi._Buffer_allocUnsafe,Ar.writeBytesBuffer=wi.Buffer&&wi.Buffer.prototype instanceof Uint8Array&&wi.Buffer.prototype.set.name==="set"?function(e,r,i){r.set(e,i)}:function(e,r,i){if(e.copy)e.copy(r,i,0,e.length);else for(var n=0;n<e.length;)r[i++]=e[n++]}};Ar.prototype.bytes=function(e){wi.isString(e)&&(e=wi._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Ar.writeBytesBuffer,r,e),this};function $g(t,e,r){t.length<40?wi.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Ar.prototype.string=function(e){var r=wi.Buffer.byteLength(e);return this.uint32(r),r&&this._push($g,r,e),this};Ar._configure()});var Mf=T((y7,wh)=>{"use strict";wh.exports=Fe;var Cr=xi(),Rf,gh=Cr.LongBits,Xg=Cr.utf8;function lr(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Fe(t){this.buf=t,this.pos=0,this.len=t.length}var vh=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Fe(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Fe(e);throw Error("illegal buffer")},mh=function(){return Cr.Buffer?function(r){return(Fe.create=function(n){return Cr.Buffer.isBuffer(n)?new Rf(n):vh(n)})(r)}:vh};Fe.create=mh();Fe.prototype._slice=Cr.Array.prototype.subarray||Cr.Array.prototype.slice;Fe.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,lr(this,10);return e}}();Fe.prototype.int32=function(){return this.uint32()|0};Fe.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Tf(){var t=new gh(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw lr(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw lr(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Fe.prototype.bool=function(){return this.uint32()!==0};function _a(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Fe.prototype.fixed32=function(){if(this.pos+4>this.len)throw lr(this,4);return _a(this.buf,this.pos+=4)};Fe.prototype.sfixed32=function(){if(this.pos+4>this.len)throw lr(this,4);return _a(this.buf,this.pos+=4)|0};function xh(){if(this.pos+8>this.len)throw lr(this,8);return new gh(_a(this.buf,this.pos+=4),_a(this.buf,this.pos+=4))}Fe.prototype.float=function(){if(this.pos+4>this.len)throw lr(this,4);var e=Cr.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Fe.prototype.double=function(){if(this.pos+8>this.len)throw lr(this,4);var e=Cr.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Fe.prototype.bytes=function(){var e=this.uint32(),r=this.pos,i=this.pos+e;if(i>this.len)throw lr(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};Fe.prototype.string=function(){var e=this.bytes();return Xg.read(e,0,e.length)};Fe.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw lr(this,e);this.pos+=e}else do if(this.pos>=this.len)throw lr(this);while(this.buf[this.pos++]&128);return this};Fe.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Fe._configure=function(t){Rf=t,Fe.create=mh(),Rf._configure();var e=Cr.Long?"toLong":"toNumber";Cr.merge(Fe.prototype,{int64:function(){return Tf.call(this)[e](!1)},uint64:function(){return Tf.call(this)[e](!0)},sint64:function(){return Tf.call(this).zzDecode()[e](!1)},fixed64:function(){return xh.call(this)[e](!0)},sfixed64:function(){return xh.call(this)[e](!1)}})}});var Ih=T((g7,Eh)=>{"use strict";Eh.exports=Yi;var _h=Mf();(Yi.prototype=Object.create(_h.prototype)).constructor=Yi;var Sh=xi();function Yi(t){_h.call(this,t)}Yi._configure=function(){Sh.Buffer&&(Yi.prototype._slice=Sh.Buffer.prototype.slice)};Yi.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Yi._configure()});var Ch=T((v7,Ah)=>{"use strict";Ah.exports=As;var Pf=xi();(As.prototype=Object.create(Pf.EventEmitter.prototype)).constructor=As;function As(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Pf.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}As.prototype.rpcCall=function t(e,r,i,n,s){if(!n)throw TypeError("request must be specified");var a=this;if(!s)return Pf.asPromise(t,a,e,r,i,n);if(!a.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return a.rpcImpl(e,r[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(u,c){if(u)return a.emit("error",u,e),s(u);if(c===null){a.end(!0);return}if(!(c instanceof i))try{c=i[a.responseDelimited?"decodeDelimited":"decode"](c)}catch(f){return a.emit("error",f,e),s(f)}return a.emit("data",c,e),s(null,c)})}catch(o){a.emit("error",o,e),setTimeout(function(){s(o)},0);return}};As.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Rh=T(Bh=>{"use strict";var Zg=Bh;Zg.Service=Ch()});var Mh=T((x7,Th)=>{"use strict";Th.exports={}});var Oh=T(Dh=>{"use strict";var Vt=Dh;Vt.build="minimal";Vt.Writer=Bf();Vt.BufferWriter=yh();Vt.Reader=Mf();Vt.BufferReader=Ih();Vt.util=xi();Vt.rpc=Rh();Vt.roots=Mh();Vt.configure=Ph;function Ph(){Vt.util._configure(),Vt.Writer._configure(Vt.BufferWriter),Vt.Reader._configure(Vt.BufferReader)}Ph()});var Pn=T((_7,Nh)=>{"use strict";Nh.exports=Oh()});var Of=T((S7,Lh)=>{"use strict";var _i=Pn(),Dn=_i.Reader,Df=_i.Writer,ue=_i.util,xt=_i.roots["libp2p-pubsub-rpc"]||(_i.roots["libp2p-pubsub-rpc"]={});xt.RPC=function(){function t(e){if(this.subscriptions=[],this.msgs=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.subscriptions=ue.emptyArray,t.prototype.msgs=ue.emptyArray,t.encode=function(r,i){if(i||(i=Df.create()),r.subscriptions!=null&&r.subscriptions.length)for(var n=0;n<r.subscriptions.length;++n)xt.RPC.SubOpts.encode(r.subscriptions[n],i.uint32(10).fork()).ldelim();if(r.msgs!=null&&r.msgs.length)for(var n=0;n<r.msgs.length;++n)xt.RPC.Message.encode(r.msgs[n],i.uint32(18).fork()).ldelim();return i},t.decode=function(r,i){r instanceof Dn||(r=Dn.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new xt.RPC;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(xt.RPC.SubOpts.decode(r,r.uint32()));break;case 2:s.msgs&&s.msgs.length||(s.msgs=[]),s.msgs.push(xt.RPC.Message.decode(r,r.uint32()));break;default:r.skipType(a&7);break}}return s},t.fromObject=function(r){if(r instanceof xt.RPC)return r;var i=new xt.RPC;if(r.subscriptions){if(!Array.isArray(r.subscriptions))throw TypeError(".RPC.subscriptions: array expected");i.subscriptions=[];for(var n=0;n<r.subscriptions.length;++n){if(typeof r.subscriptions[n]!="object")throw TypeError(".RPC.subscriptions: object expected");i.subscriptions[n]=xt.RPC.SubOpts.fromObject(r.subscriptions[n])}}if(r.msgs){if(!Array.isArray(r.msgs))throw TypeError(".RPC.msgs: array expected");i.msgs=[];for(var n=0;n<r.msgs.length;++n){if(typeof r.msgs[n]!="object")throw TypeError(".RPC.msgs: object expected");i.msgs[n]=xt.RPC.Message.fromObject(r.msgs[n])}}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.subscriptions=[],n.msgs=[]),r.subscriptions&&r.subscriptions.length){n.subscriptions=[];for(var s=0;s<r.subscriptions.length;++s)n.subscriptions[s]=xt.RPC.SubOpts.toObject(r.subscriptions[s],i)}if(r.msgs&&r.msgs.length){n.msgs=[];for(var s=0;s<r.msgs.length;++s)n.msgs[s]=xt.RPC.Message.toObject(r.msgs[s],i)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,_i.util.toJSONOptions)},t.SubOpts=function(){function e(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.subscribe=null,e.prototype.topicID=null;var r;return Object.defineProperty(e.prototype,"_subscribe",{get:ue.oneOfGetter(r=["subscribe"]),set:ue.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_topicID",{get:ue.oneOfGetter(r=["topicID"]),set:ue.oneOfSetter(r)}),e.encode=function(n,s){return s||(s=Df.create()),n.subscribe!=null&&Object.hasOwnProperty.call(n,"subscribe")&&s.uint32(8).bool(n.subscribe),n.topicID!=null&&Object.hasOwnProperty.call(n,"topicID")&&s.uint32(18).string(n.topicID),s},e.decode=function(n,s){n instanceof Dn||(n=Dn.create(n));for(var a=s===void 0?n.len:n.pos+s,o=new xt.RPC.SubOpts;n.pos<a;){var u=n.uint32();switch(u>>>3){case 1:o.subscribe=n.bool();break;case 2:o.topicID=n.string();break;default:n.skipType(u&7);break}}return o},e.fromObject=function(n){if(n instanceof xt.RPC.SubOpts)return n;var s=new xt.RPC.SubOpts;return n.subscribe!=null&&(s.subscribe=Boolean(n.subscribe)),n.topicID!=null&&(s.topicID=String(n.topicID)),s},e.toObject=function(n,s){s||(s={});var a={};return n.subscribe!=null&&n.hasOwnProperty("subscribe")&&(a.subscribe=n.subscribe,s.oneofs&&(a._subscribe="subscribe")),n.topicID!=null&&n.hasOwnProperty("topicID")&&(a.topicID=n.topicID,s.oneofs&&(a._topicID="topicID")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,_i.util.toJSONOptions)},e}(),t.Message=function(){function e(i){if(this.topicIDs=[],i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.from=null,e.prototype.data=null,e.prototype.seqno=null,e.prototype.topicIDs=ue.emptyArray,e.prototype.signature=null,e.prototype.key=null;var r;return Object.defineProperty(e.prototype,"_from",{get:ue.oneOfGetter(r=["from"]),set:ue.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_data",{get:ue.oneOfGetter(r=["data"]),set:ue.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_seqno",{get:ue.oneOfGetter(r=["seqno"]),set:ue.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_signature",{get:ue.oneOfGetter(r=["signature"]),set:ue.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_key",{get:ue.oneOfGetter(r=["key"]),set:ue.oneOfSetter(r)}),e.encode=function(n,s){if(s||(s=Df.create()),n.from!=null&&Object.hasOwnProperty.call(n,"from")&&s.uint32(10).bytes(n.from),n.data!=null&&Object.hasOwnProperty.call(n,"data")&&s.uint32(18).bytes(n.data),n.seqno!=null&&Object.hasOwnProperty.call(n,"seqno")&&s.uint32(26).bytes(n.seqno),n.topicIDs!=null&&n.topicIDs.length)for(var a=0;a<n.topicIDs.length;++a)s.uint32(34).string(n.topicIDs[a]);return n.signature!=null&&Object.hasOwnProperty.call(n,"signature")&&s.uint32(42).bytes(n.signature),n.key!=null&&Object.hasOwnProperty.call(n,"key")&&s.uint32(50).bytes(n.key),s},e.decode=function(n,s){n instanceof Dn||(n=Dn.create(n));for(var a=s===void 0?n.len:n.pos+s,o=new xt.RPC.Message;n.pos<a;){var u=n.uint32();switch(u>>>3){case 1:o.from=n.bytes();break;case 2:o.data=n.bytes();break;case 3:o.seqno=n.bytes();break;case 4:o.topicIDs&&o.topicIDs.length||(o.topicIDs=[]),o.topicIDs.push(n.string());break;case 5:o.signature=n.bytes();break;case 6:o.key=n.bytes();break;default:n.skipType(u&7);break}}return o},e.fromObject=function(n){if(n instanceof xt.RPC.Message)return n;var s=new xt.RPC.Message;if(n.from!=null&&(typeof n.from=="string"?ue.base64.decode(n.from,s.from=ue.newBuffer(ue.base64.length(n.from)),0):n.from.length&&(s.from=n.from)),n.data!=null&&(typeof n.data=="string"?ue.base64.decode(n.data,s.data=ue.newBuffer(ue.base64.length(n.data)),0):n.data.length&&(s.data=n.data)),n.seqno!=null&&(typeof n.seqno=="string"?ue.base64.decode(n.seqno,s.seqno=ue.newBuffer(ue.base64.length(n.seqno)),0):n.seqno.length&&(s.seqno=n.seqno)),n.topicIDs){if(!Array.isArray(n.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");s.topicIDs=[];for(var a=0;a<n.topicIDs.length;++a)s.topicIDs[a]=String(n.topicIDs[a])}return n.signature!=null&&(typeof n.signature=="string"?ue.base64.decode(n.signature,s.signature=ue.newBuffer(ue.base64.length(n.signature)),0):n.signature.length&&(s.signature=n.signature)),n.key!=null&&(typeof n.key=="string"?ue.base64.decode(n.key,s.key=ue.newBuffer(ue.base64.length(n.key)),0):n.key.length&&(s.key=n.key)),s},e.toObject=function(n,s){s||(s={});var a={};if((s.arrays||s.defaults)&&(a.topicIDs=[]),n.from!=null&&n.hasOwnProperty("from")&&(a.from=s.bytes===String?ue.base64.encode(n.from,0,n.from.length):s.bytes===Array?Array.prototype.slice.call(n.from):n.from,s.oneofs&&(a._from="from")),n.data!=null&&n.hasOwnProperty("data")&&(a.data=s.bytes===String?ue.base64.encode(n.data,0,n.data.length):s.bytes===Array?Array.prototype.slice.call(n.data):n.data,s.oneofs&&(a._data="data")),n.seqno!=null&&n.hasOwnProperty("seqno")&&(a.seqno=s.bytes===String?ue.base64.encode(n.seqno,0,n.seqno.length):s.bytes===Array?Array.prototype.slice.call(n.seqno):n.seqno,s.oneofs&&(a._seqno="seqno")),n.topicIDs&&n.topicIDs.length){a.topicIDs=[];for(var o=0;o<n.topicIDs.length;++o)a.topicIDs[o]=n.topicIDs[o]}return n.signature!=null&&n.hasOwnProperty("signature")&&(a.signature=s.bytes===String?ue.base64.encode(n.signature,0,n.signature.length):s.bytes===Array?Array.prototype.slice.call(n.signature):n.signature,s.oneofs&&(a._signature="signature")),n.key!=null&&n.hasOwnProperty("key")&&(a.key=s.bytes===String?ue.base64.encode(n.key,0,n.key.length):s.bytes===Array?Array.prototype.slice.call(n.key):n.key,s.oneofs&&(a._key="key")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,_i.util.toJSONOptions)},e}(),t}();Lh.exports=xt});var Kh=T(Sa=>{"use strict";Sa.byteLength=ev;Sa.toByteArray=rv;Sa.fromByteArray=sv;var Br=[],tr=[],Qg=typeof Uint8Array!="undefined"?Uint8Array:Array,Nf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ji=0,kh=Nf.length;Ji<kh;++Ji)Br[Ji]=Nf[Ji],tr[Nf.charCodeAt(Ji)]=Ji;var Ji,kh;tr["-".charCodeAt(0)]=62;tr["_".charCodeAt(0)]=63;function qh(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function ev(t){var e=qh(t),r=e[0],i=e[1];return(r+i)*3/4-i}function tv(t,e,r){return(e+r)*3/4-r}function rv(t){var e,r=qh(t),i=r[0],n=r[1],s=new Qg(tv(t,i,n)),a=0,o=n>0?i-4:i,u;for(u=0;u<o;u+=4)e=tr[t.charCodeAt(u)]<<18|tr[t.charCodeAt(u+1)]<<12|tr[t.charCodeAt(u+2)]<<6|tr[t.charCodeAt(u+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return n===2&&(e=tr[t.charCodeAt(u)]<<2|tr[t.charCodeAt(u+1)]>>4,s[a++]=e&255),n===1&&(e=tr[t.charCodeAt(u)]<<10|tr[t.charCodeAt(u+1)]<<4|tr[t.charCodeAt(u+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function iv(t){return Br[t>>18&63]+Br[t>>12&63]+Br[t>>6&63]+Br[t&63]}function nv(t,e,r){for(var i,n=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push(iv(i));return n.join("")}function sv(t){for(var e,r=t.length,i=r%3,n=[],s=16383,a=0,o=r-i;a<o;a+=s)n.push(nv(t,a,a+s>o?o:a+s));return i===1?(e=t[r-1],n.push(Br[e>>2]+Br[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push(Br[e>>10]+Br[e>>4&63]+Br[e<<2&63]+"=")),n.join("")}});var Fh=T(Lf=>{Lf.read=function(t,e,r,i,n){var s,a,o=n*8-i-1,u=(1<<o)-1,c=u>>1,f=-7,h=r?n-1:0,p=r?-1:1,g=t[e+h];for(h+=p,s=g&(1<<-f)-1,g>>=-f,f+=o;f>0;s=s*256+t[e+h],h+=p,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=i;f>0;a=a*256+t[e+h],h+=p,f-=8);if(s===0)s=1-c;else{if(s===u)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-c}return(g?-1:1)*a*Math.pow(2,s-i)};Lf.write=function(t,e,r,i,n,s){var a,o,u,c=s*8-n-1,f=(1<<c)-1,h=f>>1,p=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=i?0:s-1,y=i?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+h>=1?e+=p/u:e+=p*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=f?(o=0,a=f):a+h>=1?(o=(e*u-1)*Math.pow(2,n),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;t[r+g]=o&255,g+=y,o/=256,n-=8);for(a=a<<n|o,c+=n;c>0;t[r+g]=a&255,g+=y,a/=256,c-=8);t[r+g-y]|=S*128}});var Xi=T(kn=>{"use strict";var kf=Kh(),On=Fh(),Uh=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;kn.Buffer=N;kn.SlowBuffer=hv;kn.INSPECT_MAX_BYTES=50;var Ea=2147483647;kn.kMaxLength=Ea;N.TYPED_ARRAY_SUPPORT=av();!N.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function av(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(N.prototype,"parent",{enumerable:!0,get:function(){if(!!N.isBuffer(this))return this.buffer}});Object.defineProperty(N.prototype,"offset",{enumerable:!0,get:function(){if(!!N.isBuffer(this))return this.byteOffset}});function ri(t){if(t>Ea)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,N.prototype),e}function N(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return qf(t)}return Gh(t,e,r)}N.poolSize=8192;function Gh(t,e,r){if(typeof t=="string")return fv(t,e);if(ArrayBuffer.isView(t))return cv(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Rr(t,ArrayBuffer)||t&&Rr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Rr(t,SharedArrayBuffer)||t&&Rr(t.buffer,SharedArrayBuffer)))return Ff(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return N.from(i,e,r);let n=uv(t);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return N.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}N.from=function(t,e,r){return Gh(t,e,r)};Object.setPrototypeOf(N.prototype,Uint8Array.prototype);Object.setPrototypeOf(N,Uint8Array);function zh(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function ov(t,e,r){return zh(t),t<=0?ri(t):e!==void 0?typeof r=="string"?ri(t).fill(e,r):ri(t).fill(e):ri(t)}N.alloc=function(t,e,r){return ov(t,e,r)};function qf(t){return zh(t),ri(t<0?0:Uf(t)|0)}N.allocUnsafe=function(t){return qf(t)};N.allocUnsafeSlow=function(t){return qf(t)};function fv(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!N.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Vh(t,e)|0,i=ri(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function Kf(t){let e=t.length<0?0:Uf(t.length)|0,r=ri(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function cv(t){if(Rr(t,Uint8Array)){let e=new Uint8Array(t);return Ff(e.buffer,e.byteOffset,e.byteLength)}return Kf(t)}function Ff(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,N.prototype),i}function uv(t){if(N.isBuffer(t)){let e=Uf(t.length)|0,r=ri(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Vf(t.length)?ri(0):Kf(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Kf(t.data)}function Uf(t){if(t>=Ea)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ea.toString(16)+" bytes");return t|0}function hv(t){return+t!=t&&(t=0),N.alloc(+t)}N.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==N.prototype};N.compare=function(e,r){if(Rr(e,Uint8Array)&&(e=N.from(e,e.offset,e.byteLength)),Rr(r,Uint8Array)&&(r=N.from(r,r.offset,r.byteLength)),!N.isBuffer(e)||!N.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let s=0,a=Math.min(i,n);s<a;++s)if(e[s]!==r[s]){i=e[s],n=r[s];break}return i<n?-1:n<i?1:0};N.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};N.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return N.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=N.allocUnsafe(r),s=0;for(i=0;i<e.length;++i){let a=e[i];if(Rr(a,Uint8Array))s+a.length>n.length?(N.isBuffer(a)||(a=N.from(a)),a.copy(n,s)):Uint8Array.prototype.set.call(n,a,s);else if(N.isBuffer(a))a.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return n};function Vh(t,e){if(N.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Rr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return zf(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return rl(t).length;default:if(n)return i?-1:zf(t).length;e=(""+e).toLowerCase(),n=!0}}N.byteLength=Vh;function lv(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return _v(this,e,r);case"utf8":case"utf-8":return Wh(this,e,r);case"ascii":return xv(this,e,r);case"latin1":case"binary":return wv(this,e,r);case"base64":return vv(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Sv(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}N.prototype._isBuffer=!0;function $i(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}N.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)$i(this,r,r+1);return this};N.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)$i(this,r,r+3),$i(this,r+1,r+2);return this};N.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)$i(this,r,r+7),$i(this,r+1,r+6),$i(this,r+2,r+5),$i(this,r+3,r+4);return this};N.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Wh(this,0,e):lv.apply(this,arguments)};N.prototype.toLocaleString=N.prototype.toString;N.prototype.equals=function(e){if(!N.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:N.compare(this,e)===0};N.prototype.inspect=function(){let e="",r=kn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Uh&&(N.prototype[Uh]=N.prototype.inspect);N.prototype.compare=function(e,r,i,n,s){if(Rr(e,Uint8Array)&&(e=N.from(e,e.offset,e.byteLength)),!N.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),r<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&r>=i)return 0;if(n>=s)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;let a=s-n,o=i-r,u=Math.min(a,o),c=this.slice(n,s),f=e.slice(r,i);for(let h=0;h<u;++h)if(c[h]!==f[h]){a=c[h],o=f[h];break}return a<o?-1:o<a?1:0};function jh(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Vf(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=N.from(e,i)),N.isBuffer(e))return e.length===0?-1:Hh(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Hh(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function Hh(t,e,r,i,n){let s=1,a=t.length,o=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,o/=2,r/=2}function u(f,h){return s===1?f[h]:f.readUInt16BE(h*s)}let c;if(n){let f=-1;for(c=r;c<a;c++)if(u(t,c)===u(e,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===o)return f*s}else f!==-1&&(c-=c-f),f=-1}else for(r+o>a&&(r=a-o),c=r;c>=0;c--){let f=!0;for(let h=0;h<o;h++)if(u(t,c+h)!==u(e,h)){f=!1;break}if(f)return c}return-1}N.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};N.prototype.indexOf=function(e,r,i){return jh(this,e,r,i,!0)};N.prototype.lastIndexOf=function(e,r,i){return jh(this,e,r,i,!1)};function dv(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let s=e.length;i>s/2&&(i=s/2);let a;for(a=0;a<i;++a){let o=parseInt(e.substr(a*2,2),16);if(Vf(o))return a;t[r+a]=o}return a}function pv(t,e,r,i){return Ia(zf(e,t.length-r),t,r,i)}function bv(t,e,r,i){return Ia(Cv(e),t,r,i)}function yv(t,e,r,i){return Ia(rl(e),t,r,i)}function gv(t,e,r,i){return Ia(Bv(e,t.length-r),t,r,i)}N.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return dv(this,e,r,i);case"utf8":case"utf-8":return pv(this,e,r,i);case"ascii":case"latin1":case"binary":return bv(this,e,r,i);case"base64":return yv(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gv(this,e,r,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}};N.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function vv(t,e,r){return e===0&&r===t.length?kf.fromByteArray(t):kf.fromByteArray(t.slice(e,r))}function Wh(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let s=t[n],a=null,o=s>239?4:s>223?3:s>191?2:1;if(n+o<=r){let u,c,f,h;switch(o){case 1:s<128&&(a=s);break;case 2:u=t[n+1],(u&192)==128&&(h=(s&31)<<6|u&63,h>127&&(a=h));break;case 3:u=t[n+1],c=t[n+2],(u&192)==128&&(c&192)==128&&(h=(s&15)<<12|(u&63)<<6|c&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:u=t[n+1],c=t[n+2],f=t[n+3],(u&192)==128&&(c&192)==128&&(f&192)==128&&(h=(s&15)<<18|(u&63)<<12|(c&63)<<6|f&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),n+=o}return mv(i)}var Yh=4096;function mv(t){let e=t.length;if(e<=Yh)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=Yh));return r}function xv(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function wv(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function _v(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let s=e;s<r;++s)n+=Rv[t[s]];return n}function Sv(t,e,r){let i=t.slice(e,r),n="";for(let s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}N.prototype.slice=function(e,r){let i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,N.prototype),n};function Et(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}N.prototype.readUintLE=N.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Et(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return n};N.prototype.readUintBE=N.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Et(e,r,this.length);let n=this[e+--r],s=1;for(;r>0&&(s*=256);)n+=this[e+--r]*s;return n};N.prototype.readUint8=N.prototype.readUInt8=function(e,r){return e=e>>>0,r||Et(e,1,this.length),this[e]};N.prototype.readUint16LE=N.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Et(e,2,this.length),this[e]|this[e+1]<<8};N.prototype.readUint16BE=N.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Et(e,2,this.length),this[e]<<8|this[e+1]};N.prototype.readUint32LE=N.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Et(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};N.prototype.readUint32BE=N.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Et(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};N.prototype.readBigUInt64LE=Si(function(e){e=e>>>0,Ln(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Cs(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))});N.prototype.readBigUInt64BE=Si(function(e){e=e>>>0,Ln(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Cs(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)});N.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Et(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*r)),n};N.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Et(e,r,this.length);let n=r,s=1,a=this[e+--n];for(;n>0&&(s*=256);)a+=this[e+--n]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};N.prototype.readInt8=function(e,r){return e=e>>>0,r||Et(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};N.prototype.readInt16LE=function(e,r){e=e>>>0,r||Et(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};N.prototype.readInt16BE=function(e,r){e=e>>>0,r||Et(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};N.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Et(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};N.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Et(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};N.prototype.readBigInt64LE=Si(function(e){e=e>>>0,Ln(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Cs(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});N.prototype.readBigInt64BE=Si(function(e){e=e>>>0,Ln(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Cs(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});N.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Et(e,4,this.length),On.read(this,e,!0,23,4)};N.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Et(e,4,this.length),On.read(this,e,!1,23,4)};N.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Et(e,8,this.length),On.read(this,e,!0,52,8)};N.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Et(e,8,this.length),On.read(this,e,!1,52,8)};function jt(t,e,r,i,n,s){if(!N.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}N.prototype.writeUintLE=N.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;jt(this,e,r,i,o,0)}let s=1,a=0;for(this[r]=e&255;++a<i&&(s*=256);)this[r+a]=e/s&255;return r+i};N.prototype.writeUintBE=N.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;jt(this,e,r,i,o,0)}let s=i-1,a=1;for(this[r+s]=e&255;--s>=0&&(a*=256);)this[r+s]=e/a&255;return r+i};N.prototype.writeUint8=N.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,1,255,0),this[r]=e&255,r+1};N.prototype.writeUint16LE=N.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};N.prototype.writeUint16BE=N.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};N.prototype.writeUint32LE=N.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};N.prototype.writeUint32BE=N.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Jh(t,e,r,i,n){tl(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,r}function $h(t,e,r,i,n){tl(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a=a>>8,t[r+2]=a,a=a>>8,t[r+1]=a,a=a>>8,t[r]=a,r+8}N.prototype.writeBigUInt64LE=Si(function(e,r=0){return Jh(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});N.prototype.writeBigUInt64BE=Si(function(e,r=0){return $h(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});N.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let u=Math.pow(2,8*i-1);jt(this,e,r,i,u-1,-u)}let s=0,a=1,o=0;for(this[r]=e&255;++s<i&&(a*=256);)e<0&&o===0&&this[r+s-1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};N.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let u=Math.pow(2,8*i-1);jt(this,e,r,i,u-1,-u)}let s=i-1,a=1,o=0;for(this[r+s]=e&255;--s>=0&&(a*=256);)e<0&&o===0&&this[r+s+1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};N.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};N.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};N.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};N.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};N.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||jt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};N.prototype.writeBigInt64LE=Si(function(e,r=0){return Jh(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});N.prototype.writeBigInt64BE=Si(function(e,r=0){return $h(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xh(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Zh(t,e,r,i,n){return e=+e,r=r>>>0,n||Xh(t,e,r,4,34028234663852886e22,-34028234663852886e22),On.write(t,e,r,i,23,4),r+4}N.prototype.writeFloatLE=function(e,r,i){return Zh(this,e,r,!0,i)};N.prototype.writeFloatBE=function(e,r,i){return Zh(this,e,r,!1,i)};function Qh(t,e,r,i,n){return e=+e,r=r>>>0,n||Xh(t,e,r,8,17976931348623157e292,-17976931348623157e292),On.write(t,e,r,i,52,8),r+8}N.prototype.writeDoubleLE=function(e,r,i){return Qh(this,e,r,!0,i)};N.prototype.writeDoubleBE=function(e,r,i){return Qh(this,e,r,!1,i)};N.prototype.copy=function(e,r,i,n){if(!N.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let s=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),s};N.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!N.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let a=e.charCodeAt(0);(n==="utf8"&&a<128||n==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<i;++s)this[s]=e;else{let a=N.isBuffer(e)?e:N.from(e,n),o=a.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-r;++s)this[s+r]=a[s%o]}return this};var Nn={};function Gf(t,e,r){Nn[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Gf("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Gf("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Gf("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=el(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=el(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function el(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Ev(t,e,r){Ln(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Cs(e,t.length-(r+1))}function tl(t,e,r,i,n,s){if(t>r||t<e){let a=typeof e=="bigint"?"n":"",o;throw s>3?e===0||e===BigInt(0)?o=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:o=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:o=`>= ${e}${a} and <= ${r}${a}`,new Nn.ERR_OUT_OF_RANGE("value",o,t)}Ev(i,n,s)}function Ln(t,e){if(typeof t!="number")throw new Nn.ERR_INVALID_ARG_TYPE(e,"number",t)}function Cs(t,e,r){throw Math.floor(t)!==t?(Ln(t,r),new Nn.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Nn.ERR_BUFFER_OUT_OF_BOUNDS:new Nn.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Iv=/[^+/0-9A-Za-z-_]/g;function Av(t){if(t=t.split("=")[0],t=t.trim().replace(Iv,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function zf(t,e){e=e||1/0;let r,i=t.length,n=null,s=[];for(let a=0;a<i;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Cv(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Bv(t,e){let r,i,n,s=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),i=r>>8,n=r%256,s.push(n),s.push(i);return s}function rl(t){return kf.toByteArray(Av(t))}function Ia(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function Rr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Vf(t){return t!==t}var Rv=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function Si(t){return typeof BigInt=="undefined"?Tv:t}function Tv(){throw new Error("BigInt not supported")}});var jf=T((B7,nl)=>{"use strict";var{Buffer:dr}=Xi(),il=Symbol.for("BufferList");function Re(t){if(!(this instanceof Re))return new Re(t);Re._init.call(this,t)}Re._init=function(e){Object.defineProperty(this,il,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};Re.prototype._new=function(e){return new Re(e)};Re.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let i=0;i<this._bufs.length;i++){let n=r+this._bufs[i].length;if(e<n||i===this._bufs.length-1)return[i,e-r];r=n}};Re.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let i=0;i<e;i++)r+=this._bufs[i].length;return r};Re.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};Re.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};Re.prototype.copy=function(e,r,i,n){if((typeof i!="number"||i<0)&&(i=0),(typeof n!="number"||n>this.length)&&(n=this.length),i>=this.length||n<=0)return e||dr.alloc(0);let s=!!e,a=this._offset(i),o=n-i,u=o,c=s&&r||0,f=a[1];if(i===0&&n===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:dr.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,c),c+=this._bufs[h].length;return e}if(u<=this._bufs[a[0]].length-f)return s?this._bufs[a[0]].copy(e,r,f,f+u):this._bufs[a[0]].slice(f,f+u);s||(e=dr.allocUnsafe(o));for(let h=a[0];h<this._bufs.length;h++){let p=this._bufs[h].length-f;if(u>p)this._bufs[h].copy(e,c,f),c+=p;else{this._bufs[h].copy(e,c,f,f+u),c+=p;break}u-=p,f&&(f=0)}return e.length>c?e.slice(0,c):e};Re.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let i=this._offset(e),n=this._offset(r),s=this._bufs.slice(i[0],n[0]+1);return n[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,n[1]),i[1]!==0&&(s[0]=s[0].slice(i[1])),this._new(s)};Re.prototype.toString=function(e,r,i){return this.slice(r,i).toString(e)};Re.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Re.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};Re.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(dr.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(dr.from(e));return this};Re.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};Re.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=dr.from([t]):typeof t=="string"?t=dr.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=dr.from(t.buffer,t.byteOffset,t.byteLength):dr.isBuffer(t)||(t=dr.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let i=this._offset(e),n=i[0],s=i[1];for(;n<this._bufs.length;n++){let a=this._bufs[n];for(;s<a.length;)if(a.length-s>=t.length){let u=a.indexOf(t,s);if(u!==-1)return this._reverseOffset([n,u]);s=a.length-t.length+1}else{let u=this._reverseOffset([n,s]);if(this._match(u,t))return u;s++}s=0}return-1};Re.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?Re.prototype[r]=function(i,n){return this.slice(i,i+n)[r](0,n)}:Re.prototype[r]=function(i=0){return this.slice(i,i+t[r])[r](0)}})(e)})();Re.prototype._isBufferList=function(e){return e instanceof Re||Re.isBufferList(e)};Re.isBufferList=function(e){return e!=null&&e[il]};nl.exports=Re});var ol=T((R7,al)=>{al.exports=Hf;var sl=128,Mv=127,Pv=~Mv,Dv=Math.pow(2,31);function Hf(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw Hf.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var i=r;t>=Dv;)e[r++]=t&255|sl,t/=128;for(;t&Pv;)e[r++]=t&255|sl,t>>>=7;return e[r]=t|0,Hf.bytes=r-i+1,e}});var ul=T((T7,cl)=>{cl.exports=Wf;var Ov=128,fl=127;function Wf(t,e){var r=0,e=e||0,i=0,n=e,s,a=t.length;do{if(n>=a||i>49)throw Wf.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&fl)<<i:(s&fl)*Math.pow(2,i),i+=7}while(s>=Ov);return Wf.bytes=n-e,r}});var ll=T((M7,hl)=>{var Nv=Math.pow(2,7),Lv=Math.pow(2,14),kv=Math.pow(2,21),qv=Math.pow(2,28),Kv=Math.pow(2,35),Fv=Math.pow(2,42),Uv=Math.pow(2,49),Gv=Math.pow(2,56),zv=Math.pow(2,63);hl.exports=function(t){return t<Nv?1:t<Lv?2:t<kv?3:t<qv?4:t<Kv?5:t<Fv?6:t<Uv?7:t<Gv?8:t<zv?9:10}});var Aa=T((P7,dl)=>{dl.exports={encode:ol(),decode:ul(),encodingLength:ll()}});var Yf=T((D7,yl)=>{"use strict";var pl=Aa(),{Buffer:Vv}=Xi(),bl=(t,e,r)=>{let i=pl.encode(t,e,r);return bl.bytes=pl.encode.bytes,e||Vv.from(i)};yl.exports=bl});var _l=T((O7,Ca)=>{"use strict";var{Buffer:gl}=Xi(),vl=jf(),ml=Yf(),Jf=8,xl=10*1024;function wl(t){t=t||{};let e=Math.max(t.poolSize||xl,t.minPoolSize||Jf),r=t.lengthEncoder||ml;return async function*(n){let s=gl.alloc(e),a=0;for await(let o of n){r(o.length,s,a);let u=s.slice(a,a+r.bytes);a+=r.bytes,s.length-a<Jf&&(s=gl.alloc(e),a=0),yield new vl().append(u).append(o)}}}wl.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||ml;return new vl([r(t.length),t.slice()])};Ca.exports=wl;Ca.exports.MIN_POOL_SIZE=Jf;Ca.exports.DEFAULT_POOL_SIZE=xl});var $f=T((N7,Il)=>{"use strict";var Sl=Aa(),{Buffer:jv}=Xi(),Hv=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),El=t=>{let e=Sl.decode(jv.isBuffer(t)?t:Hv(t));return El.bytes=Sl.decode.bytes,e};Il.exports=El});var Rl=T((L7,Ba)=>{"use strict";var{Buffer:Wv}=Xi(),Xf=jf(),Yv=$f(),Al=8,Cl=1024*1024*4,Bl=Wv.alloc(0),Ei={LENGTH:"readLength",DATA:"readData"},Jv={[Ei.LENGTH]:(t,e,r,i)=>{e=e.append(t);let n;try{n=i.lengthDecoder(e)}catch(s){if(e.length>i.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:Ei.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(n>i.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(i.lengthDecoder.bytes),e=new Xf,i.onLength&&i.onLength(n),n<=0?(i.onData&&i.onData(Bl),{mode:Ei.LENGTH,chunk:t,buffer:e,data:Bl}):{mode:Ei.DATA,chunk:t,buffer:e,state:{dataLength:n},data:void 0}},[Ei.DATA]:(t,e,r,i)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:Ei.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:n}=r,s=e.shallowSlice(0,n),a=e.length>n?e.shallowSlice(n):void 0;return e=new Xf,i.onData&&i.onData(s),{mode:Ei.LENGTH,chunk:a,buffer:e,state:void 0,data:s}}};function Zf(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||Yv,maxLengthLength:t.maxLengthLength||Al,maxDataLength:t.maxDataLength||Cl,onLength:t.onLength,onData:t.onData};return async function*(i){let n=new Xf,s=Ei.LENGTH,a;for await(let o of i){let u=o;for(;u;){let c=Jv[s](u,n,a,e);s=c.mode,u=c.chunk,n=c.buffer,a=c.state,c.data&&(yield c.data)}}if(n.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}Zf.fromReader=(t,e)=>{let r=1,i={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}};return Zf({...e||{},onLength:s=>{r=s}})(i)};Ba.exports=Zf;Ba.exports.MAX_LENGTH_LENGTH=Al;Ba.exports.MAX_DATA_LENGTH=Cl});var Pl=T((k7,Ml)=>{"use strict";var{Buffer:$v}=Xi(),Tl=(t,e,r)=>(e=e||$v.allocUnsafe(4),e.writeInt32BE(t,r),e);Tl.bytes=4;Ml.exports=Tl});var Nl=T((q7,Ol)=>{"use strict";var Dl=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};Dl.bytes=4;Ol.exports=Dl});var Ll=T(Zi=>{"use strict";Zi.encode=_l();Zi.decode=Rl();Zi.varintEncode=Yf();Zi.varintDecode=$f();Zi.int32BEEncode=Pl();Zi.int32BEDecode=Nl()});var ql=T((U7,kl)=>{kl.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var Ul=T((z7,Fl)=>{var Kl=ql();Fl.exports=class{constructor(e){this.hwm=e||16,this.head=new Kl(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new Kl(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var zl=T((V7,Gl)=>{var Qf=Ul();Gl.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new Qf,i,n,s,a=()=>{if(!r.isEmpty()){if(t.writev){let S,B=[];for(;!r.isEmpty();){if(S=r.shift(),S.error)throw S.error;B.push(S.value)}return{done:S.done,value:B}}let y=r.shift();if(y.error)throw y.error;return y}return s?{done:!0}:new Promise((y,S)=>{n=B=>(n=null,B.error?S(B.error):t.writev&&!B.done?y({done:B.done,value:[B.value]}):y(B),i)})},o=y=>n?n(y):(r.push(y),i),u=y=>(r=new Qf,n?n({error:y}):(r.push({error:y}),i)),c=y=>s?i:o({done:!1,value:y}),f=y=>s?i:(s=!0,y?u(y):o({done:!0})),h=()=>(r=new Qf,f(),{done:!0}),p=y=>(f(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:h,throw:p,push:c,end:f},!e)return i;let g=i;return i={[Symbol.asyncIterator](){return this},next(){return g.next()},throw(y){return g.throw(y),e&&(e(y),e=null),{done:!0}},return(){return g.return(),e&&(e(),e=null),{done:!0}},push:c,end(y){return g.end(y),e&&(e(y),e=null),i}},i}});var jl=T((j7,Vl)=>{Vl.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var Wl=T((W7,Hl)=>{Hl.exports=class extends Error{constructor(e,r){super(e||"The operation was aborted");this.type="aborted",this.code=r||"ABORT_ERR"}}});var Xl=T((Y7,Qi)=>{var Xv=jl(),e0=Wl(),Yl=(t,e,r)=>t0(t,Array.isArray(e)?e:[{signal:e,options:r}]),t0=(t,e)=>{t=Xv(t),e=e.map(({signal:i,options:n})=>({signal:i,options:n||{}}));async function*r(){let i,n=()=>{i&&i()};for(let{signal:s}of e)s.addEventListener("abort",n);for(;;){let s;try{for(let{signal:o,options:u}of e)if(o.aborted){let{abortMessage:c,abortCode:f}=u;throw new e0(c,f)}let a=new Promise((o,u)=>{i=()=>{let{options:c}=e.find(({signal:p})=>p.aborted),{abortMessage:f,abortCode:h}=c;u(new e0(f,h))}});s=await Promise.race([a,t.next()]),i=null}catch(a){for(let{signal:c}of e)c.removeEventListener("abort",n);let o=e.find(({signal:c})=>c.aborted),u=a.type==="aborted"&&o;if(u&&o.options.onAbort&&await o.options.onAbort(t),typeof t.return=="function"&&await t.return(),u&&o.options.returnOnAbort)return;throw a}if(s.done)break;yield s.value}for(let{signal:s}of e)s.removeEventListener("abort",n)}return r()},Jl=(t,e,r)=>$l(t,Array.isArray(e)?e:[{signal:e,options:r}]),$l=(t,e)=>r=>t(t0(r,e)),Zv=(t,e,r)=>Qv(t,Array.isArray(e)?e:[{signal:e,options:r}]),Qv=(t,e)=>({sink:$l(t.sink,e),source:t0(t.source,e)});Qi.exports=Yl;Qi.exports.AbortError=e0;Qi.exports.source=Yl;Qi.exports.sink=Jl;Qi.exports.transform=Jl;Qi.exports.duplex=Zv});var Ql=T((J7,Ra)=>{"use strict";var{AbortController:Zl,AbortSignal:e3}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;Ra.exports=Zl;Ra.exports.AbortSignal=e3;Ra.exports.default=Zl});var sd=T(($7,nd)=>{"use strict";var ed=pa(),t3=Object.assign(ed("libp2p-pubsub:peer-streams"),{error:ed("libp2p-pubsub:peer-streams:err")}),{EventEmitter:r3}=gf(),td=Ll(),i3=zl(),{pipe:rd}=mf(),{source:n3}=Xl(),s3=Ql().default,id=class extends r3{constructor({id:e,protocol:r}){super();this.id=e,this.protocol=r,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new s3,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(e){if(!this.outboundStream){let r=this.id.toB58String();throw new Error("No writable connection to "+r)}this.outboundStream.push(e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=n3(rd(this._rawInboundStream,td.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(e){let r=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=i3({onEnd:i=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,i&&this.emit("close")}}),rd(this.outboundStream,td.encode(),this._rawOutboundStream).catch(i=>{t3.error(i)}),r||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}};nd.exports=id});var od=T(ad=>{"use strict";var a3={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};ad.SignaturePolicy=a3});var cd=T((Z7,fd)=>{"use strict";var Ta=65536;function o3(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>Ta)for(;r<t;)r+Ta>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+Ta)),r+=Ta);else crypto.getRandomValues(e);return e}fd.exports=o3});var Ma=T((Q7,ud)=>{"use strict";var f3=cd(),c3=Zt();ud.exports=function(t){if(isNaN(t)||t<=0)throw c3(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return f3(t)}});function u3(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=n}var o=t.length,u=t.charAt(0),c=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function h(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var S=0,B=0,I=0,M=y.length;I!==M&&y[I]===0;)I++,S++;for(var D=(M-I)*f+1>>>0,q=new Uint8Array(D);I!==M;){for(var k=y[I],O=0,V=D-1;(k!==0||O<B)&&V!==-1;V--,O++)k+=256*q[V]>>>0,q[V]=k%o>>>0,k=k/o>>>0;if(k!==0)throw new Error("Non-zero carry");B=O,I++}for(var U=D-B;U!==D&&q[U]===0;)U++;for(var X=u.repeat(S);U<D;++U)X+=t.charAt(q[U]);return X}function p(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var S=0;if(y[S]!==" "){for(var B=0,I=0;y[S]===u;)B++,S++;for(var M=(y.length-S)*c+1>>>0,D=new Uint8Array(M);y[S];){var q=r[y.charCodeAt(S)];if(q===255)return;for(var k=0,O=M-1;(q!==0||k<I)&&O!==-1;O--,k++)q+=o*D[O]>>>0,D[O]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");I=k,S++}if(y[S]!==" "){for(var V=M-I;V!==M&&D[V]===0;)V++;for(var U=new Uint8Array(B+(M-V)),X=B;V!==M;)U[X++]=D[V++];return U}}}function g(y){var S=p(y);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:p,decode:g}}var h3,l3,hd,ld=_e(()=>{h3=u3,l3=h3,hd=l3});var t_,dd,ii,pd,bd,Ii=_e(()=>{t_=new Uint8Array(0),dd=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ii=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},pd=t=>new TextEncoder().encode(t),bd=t=>new TextDecoder().decode(t)});var gd,vd,Pa,md,Da,Ai,d3,p3,ke,Tr=_e(()=>{ld();Ii();gd=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},vd=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseDecode=i}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){let r={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new Pa(r)}},Pa=class{constructor(e){this.decoders=e}or(e){let r=e.decoders||{[e.prefix]:e};return new Pa({...this.decoders,...r})}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},md=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new gd(e,r,i),this.decoder=new vd(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Da=({name:t,prefix:e,encode:r,decode:i})=>new md(t,e,r,i),Ai=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=hd(r,e);return Da({prefix:t,name:e,encode:i,decode:s=>ii(n(s))})},d3=(t,e,r,i)=>{let n={};for(let f=0;f<e.length;++f)n[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let a=new Uint8Array(s*r/8|0),o=0,u=0,c=0;for(let f=0;f<s;++f){let h=n[t[f]];if(h===void 0)throw new SyntaxError(`Non-${i} character`);u=u<<r|h,o+=r,o>=8&&(o-=8,a[c++]=255&u>>o)}if(o>=r||255&u<<8-o)throw new SyntaxError("Unexpected end of data");return a},p3=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",a=0,o=0;for(let u=0;u<t.length;++u)for(o=o<<8|t[u],a+=8;a>r;)a-=r,s+=e[n&o>>a];if(a&&(s+=e[n&o<<r-a]),i)for(;s.length*r&7;)s+="=";return s},ke=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Da({prefix:e,name:t,encode(n){return p3(n,i,r)},decode(n){return d3(n,i,r,t)}})});var r0={};Dt(r0,{identity:()=>b3});var b3,xd=_e(()=>{Tr();Ii();b3=Da({prefix:"\0",name:"identity",encode:t=>bd(t),decode:t=>pd(t)})});var i0={};Dt(i0,{base2:()=>y3});var y3,wd=_e(()=>{Tr();y3=ke({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var n0={};Dt(n0,{base8:()=>g3});var g3,_d=_e(()=>{Tr();g3=ke({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var s0={};Dt(s0,{base10:()=>v3});var v3,Sd=_e(()=>{Tr();v3=Ai({prefix:"9",name:"base10",alphabet:"0123456789"})});var Oa={};Dt(Oa,{base16:()=>m3,base16upper:()=>x3});var m3,x3,a0=_e(()=>{Tr();m3=ke({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),x3=ke({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Bs={};Dt(Bs,{base32:()=>qn,base32hex:()=>E3,base32hexpad:()=>A3,base32hexpadupper:()=>C3,base32hexupper:()=>I3,base32pad:()=>_3,base32padupper:()=>S3,base32upper:()=>w3,base32z:()=>B3});var qn,w3,_3,S3,E3,I3,A3,C3,B3,Rs=_e(()=>{Tr();qn=ke({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),w3=ke({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_3=ke({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),S3=ke({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),E3=ke({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),I3=ke({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),A3=ke({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),C3=ke({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),B3=ke({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Na={};Dt(Na,{base36:()=>R3,base36upper:()=>T3});var R3,T3,o0=_e(()=>{Tr();R3=Ai({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),T3=Ai({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var Kn={};Dt(Kn,{base58btc:()=>Mr,base58flickr:()=>M3});var Mr,M3,Fn=_e(()=>{Tr();Mr=Ai({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),M3=Ai({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Un={};Dt(Un,{base64:()=>P3,base64pad:()=>D3,base64url:()=>O3,base64urlpad:()=>N3});var P3,D3,O3,N3,Ts=_e(()=>{Tr();P3=ke({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),D3=ke({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),O3=ke({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),N3=ke({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function Id(t,e,r){e=e||[],r=r||0;for(var i=r;t>=K3;)e[r++]=t&255|Ed,t/=128;for(;t&q3;)e[r++]=t&255|Ed,t>>>=7;return e[r]=t|0,Id.bytes=r-i+1,e}function f0(t,e){var r=0,e=e||0,i=0,n=e,s,a=t.length;do{if(n>=a)throw f0.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&Ad)<<i:(s&Ad)*Math.pow(2,i),i+=7}while(s>=U3);return f0.bytes=n-e,r}var L3,Ed,k3,q3,K3,F3,U3,Ad,G3,z3,V3,j3,H3,W3,Y3,J3,$3,X3,Z3,Q3,Ms,Cd=_e(()=>{L3=Id,Ed=128,k3=127,q3=~k3,K3=Math.pow(2,31);F3=f0,U3=128,Ad=127;G3=Math.pow(2,7),z3=Math.pow(2,14),V3=Math.pow(2,21),j3=Math.pow(2,28),H3=Math.pow(2,35),W3=Math.pow(2,42),Y3=Math.pow(2,49),J3=Math.pow(2,56),$3=Math.pow(2,63),X3=function(t){return t<G3?1:t<z3?2:t<V3?3:t<j3?4:t<H3?5:t<W3?6:t<Y3?7:t<J3?8:t<$3?9:10},Z3={encode:L3,decode:F3,encodingLength:X3},Q3=Z3,Ms=Q3});var Ps,Gn,zn,La=_e(()=>{Cd();Ps=t=>[Ms.decode(t),Ms.decode.bytes],Gn=(t,e,r=0)=>(Ms.encode(t,e,r),e),zn=t=>Ms.encodingLength(t)});var ka={};Dt(ka,{Digest:()=>Vn,create:()=>Ds,decode:()=>c0,equals:()=>u0});var Ds,c0,u0,Vn,Os=_e(()=>{Ii();La();Ds=(t,e)=>{let r=e.byteLength,i=zn(t),n=i+zn(r),s=new Uint8Array(n+r);return Gn(t,s,0),Gn(r,s,i),s.set(e,n),new Vn(t,r,e,s)},c0=t=>{let e=ii(t),[r,i]=Ps(e),[n,s]=Ps(e.subarray(i)),a=e.subarray(i+s);if(a.byteLength!==n)throw new Error("Incorrect length");return new Vn(r,n,a,e)},u0=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&dd(t.bytes,e.bytes),Vn=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}});var Ns,Rd,qa=_e(()=>{Os();Ns=({name:t,code:e,encode:r})=>new Rd(t,e,r),Rd=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}async digest(e){if(e instanceof Uint8Array){let r=await this.encode(e);return Ds(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var Ci={};Dt(Ci,{sha256:()=>e4,sha512:()=>t4});var Md,e4,t4,en=_e(()=>{qa();Md=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),e4=Ns({name:"sha2-256",code:18,encode:Md("SHA-256")}),t4=Ns({name:"sha2-512",code:19,encode:Md("SHA-512")})});var Ls={};Dt(Ls,{identity:()=>r4});var r4,Ka=_e(()=>{qa();Ii();r4=Ns({name:"identity",code:0,encode:t=>ii(t)})});var Pd=_e(()=>{Ii()});var E_,I_,Dd=_e(()=>{E_=new TextEncoder,I_=new TextDecoder});var Ld={};Dt(Ld,{CID:()=>wt});var wt,s4,a4,o4,ks,f4,Od,Nd,Fa,Ua,c4,u4,h4,h0=_e(()=>{La();Os();Fn();Rs();Ii();wt=class{constructor(e,r,i,n){this.code=r,this.version=e,this.multihash=i,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Ua,byteLength:Ua,code:Fa,version:Fa,multihash:Fa,bytes:Fa,_baseCache:Ua,asCID:Ua})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==ks)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==f4)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return wt.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,i=Ds(e,r);return wt.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&u0(this.multihash,e.multihash)}toString(e){let{bytes:r,version:i,_baseCache:n}=this;switch(i){case 0:return a4(r,n,e||Mr.encoder);default:return o4(r,n,e||qn.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return u4(/^0\.0/,h4),!!(e&&(e[Nd]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof wt)return e;if(e!=null&&e.asCID===e){let{version:r,code:i,multihash:n,bytes:s}=e;return new wt(r,i,n,s||Od(r,i,n.bytes))}else if(e!=null&&e[Nd]===!0){let{version:r,multihash:i,code:n}=e,s=c0(i);return wt.create(r,n,s)}else return null}static create(e,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==ks)throw new Error(`Version 0 CID must use dag-pb (code: ${ks}) block encoding`);return new wt(e,r,i,i.bytes)}case 1:{let n=Od(e,r,i.bytes);return new wt(e,r,i,n)}default:throw new Error("Invalid version")}}static createV0(e){return wt.create(0,ks,e)}static createV1(e,r){return wt.create(1,e,r)}static decode(e){let[r,i]=wt.decodeFirst(e);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=wt.inspectBytes(e),i=r.size-r.multihashSize,n=ii(e.subarray(i,i+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=n.subarray(r.multihashSize-r.digestSize),a=new Vn(r.multihashCode,r.digestSize,s,n);return[r.version===0?wt.createV0(a):wt.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0,i=()=>{let[h,p]=Ps(e.subarray(r));return r+=p,h},n=i(),s=ks;if(n===18?(n=0,r=0):n===1&&(s=i()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let a=r,o=i(),u=i(),c=r+u,f=c-a;return{version:n,codec:s,multihashCode:o,digestSize:u,multihashSize:f,size:c}}static parse(e,r){let[i,n]=s4(e,r),s=wt.decode(n);return s._baseCache.set(i,e),s}},s4=(t,e)=>{switch(t[0]){case"Q":{let r=e||Mr;return[Mr.prefix,r.decode(`${Mr.prefix}${t}`)]}case Mr.prefix:{let r=e||Mr;return[Mr.prefix,r.decode(t)]}case qn.prefix:{let r=e||qn;return[qn.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},a4=(t,e,r)=>{let{prefix:i}=r;if(i!==Mr.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=e.get(i);if(n==null){let s=r.encode(t).slice(1);return e.set(i,s),s}else return n},o4=(t,e,r)=>{let{prefix:i}=r,n=e.get(i);if(n==null){let s=r.encode(t);return e.set(i,s),s}else return n},ks=112,f4=18,Od=(t,e,r)=>{let i=zn(t),n=i+zn(e),s=new Uint8Array(n+r.byteLength);return Gn(t,s,0),Gn(e,s,i),s.set(r,n),s},Nd=Symbol.for("@ipld/js-cid/CID"),Fa={writable:!1,configurable:!1,enumerable:!0},Ua={writable:!1,enumerable:!1,configurable:!1},c4="0.0.0-dev",u4=(t,e)=>{if(t.test(c4))console.warn(e);else throw new Error(e)},h4=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var kd=_e(()=>{h0();La();Ii();qa();Os()});var l0,O_,qd=_e(()=>{xd();wd();_d();Sd();a0();Rs();o0();Fn();Ts();en();Ka();Pd();Dd();kd();l0={...r0,...i0,...n0,...s0,...Oa,...Bs,...Na,...Kn,...Un},O_={...Ci,...Ls}});function Kd(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var Fd,d0,l4,Ga,p0=_e(()=>{qd();Fd=Kd("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),d0=Kd("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),l4={utf8:Fd,"utf-8":Fd,hex:l0.base16,latin1:d0,ascii:d0,binary:d0,...l0},Ga=l4});var Pr={};Dt(Pr,{toString:()=>d4});function d4(t,e="utf8"){let r=Ga[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var Dr=_e(()=>{p0()});var pr={};Dt(pr,{fromString:()=>p4});function p4(t,e="utf8"){let r=Ga[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var br=_e(()=>{p0()});var Va=T((F_,Gd)=>{"use strict";var tn=Pn(),za=tn.Reader,Ud=tn.Writer,kt=tn.util,rr=tn.roots["libp2p-crypto-keys"]||(tn.roots["libp2p-crypto-keys"]={});rr.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();rr.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=kt.newBuffer([]),t.encode=function(r,i){return i||(i=Ud.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof za||(r=za.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new rr.PublicKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw kt.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw kt.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof rr.PublicKey)return r;var i=new rr.PublicKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?kt.base64.decode(r.Data,i.Data=kt.newBuffer(kt.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=kt.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?rr.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?kt.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,tn.util.toJSONOptions)},t}();rr.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=kt.newBuffer([]),t.encode=function(r,i){return i||(i=Ud.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof za||(r=za.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new rr.PrivateKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw kt.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw kt.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof rr.PrivateKey)return r;var i=new rr.PrivateKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?kt.base64.decode(r.Data,i.Data=kt.newBuffer(kt.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=kt.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?rr.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?kt.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,tn.util.toJSONOptions)},t}();Gd.exports=rr});var xe=T((U_,zd)=>{zd.exports={options:{usePureJavaScript:!1}}});var Hd=T((G_,jd)=>{var b0={};jd.exports=b0;var Vd={};b0.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var i="";if(!(t instanceof Uint8Array))i=b4(t,e);else{var n=0,s=e.length,a=e.charAt(0),o=[0];for(n=0;n<t.length;++n){for(var u=0,c=t[n];u<o.length;++u)c+=o[u]<<8,o[u]=c%s,c=c/s|0;for(;c>0;)o.push(c%s),c=c/s|0}for(n=0;t[n]===0&&n<t.length-1;++n)i+=a;for(n=o.length-1;n>=0;--n)i+=e[o[n]]}if(r){var f=new RegExp(".{1,"+r+"}","g");i=i.match(f).join(`\r
`)}return i};b0.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Vd[e];if(!r){r=Vd[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");for(var n=e.length,s=e.charAt(0),a=[0],i=0;i<t.length;i++){var o=r[t.charCodeAt(i)];if(o===void 0)return;for(var u=0,c=o;u<a.length;++u)c+=a[u]*n,a[u]=c&255,c>>=8;for(;c>0;)a.push(c&255),c>>=8}for(var f=0;t[f]===s&&f<t.length-1;++f)a.push(0);return typeof Buffer!="undefined"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function b4(t,e){var r=0,i=e.length,n=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var a=0,o=t.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%i,o=o/i|0;for(;o>0;)s.push(o%i),o=o/i|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=n;for(r=s.length-1;r>=0;--r)u+=e[s[r]];return u}});var Ue=T((z_,$d)=>{var Wd=xe(),Yd=Hd(),R=$d.exports=Wd.util=Wd.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){R.nextTick=process.nextTick,typeof setImmediate=="function"?R.setImmediate=setImmediate:R.setImmediate=R.nextTick;return}if(typeof setImmediate=="function"){R.setImmediate=function(){return setImmediate.apply(void 0,arguments)},R.nextTick=function(o){return setImmediate(o)};return}if(R.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var c=e.slice();e.length=0,c.forEach(function(f){f()})}};var a=o,t="forge.setImmediate",e=[];R.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),i=!0,n=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(c){c()})}).observe(n,{attributes:!0});var s=R.setImmediate;R.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),s(u)):(e.push(u),e.length===1&&n.setAttribute("a",i=!i))}}R.nextTick=R.setImmediate})();R.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;R.globalScope=function(){return R.isNodejs?globalThis:typeof self=="undefined"?window:self}();R.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};R.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};R.isArrayBufferView=function(t){return t&&R.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function qs(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}R.ByteBuffer=y0;function y0(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(R.isArrayBuffer(t)||R.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(i){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof y0||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}R.ByteStringBuffer=y0;var y4=4096;R.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>y4&&(this.data.substr(0,1),this._constructedStringLength=0)};R.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};R.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};R.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};R.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};R.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};R.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(R.encodeUtf8(t))};R.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};R.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};R.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};R.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};R.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};R.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};R.ByteStringBuffer.prototype.putInt=function(t,e){qs(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};R.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};R.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};R.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};R.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};R.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};R.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};R.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};R.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};R.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};R.ByteStringBuffer.prototype.getInt=function(t){qs(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};R.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};R.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};R.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};R.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};R.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};R.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};R.ByteStringBuffer.prototype.copy=function(){var t=R.createBuffer(this.data);return t.read=this.read,t};R.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};R.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};R.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};R.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};R.ByteStringBuffer.prototype.toString=function(){return R.decodeUtf8(this.bytes())};function g4(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=R.isArrayBuffer(t),i=R.isArrayBufferView(t);if(r||i){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}R.DataBuffer=g4;R.DataBuffer.prototype.length=function(){return this.write-this.read};R.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};R.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this};R.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};R.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};R.DataBuffer.prototype.putBytes=function(t,e){if(R.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=i,this}if(R.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof R.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&R.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var n=new Uint8Array(t.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(t instanceof R.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=R.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=R.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=R.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=R.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=R.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};R.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};R.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};R.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};R.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};R.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};R.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};R.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};R.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};R.DataBuffer.prototype.putInt=function(t,e){qs(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};R.DataBuffer.prototype.putSignedInt=function(t,e){return qs(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};R.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};R.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};R.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};R.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};R.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};R.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};R.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};R.DataBuffer.prototype.getInt=function(t){qs(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};R.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};R.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};R.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};R.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};R.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};R.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};R.DataBuffer.prototype.copy=function(){return new R.DataBuffer(this)};R.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};R.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};R.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};R.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};R.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return R.binary.raw.encode(e);if(t==="hex")return R.binary.hex.encode(e);if(t==="base64")return R.binary.base64.encode(e);if(t==="utf8")return R.text.utf8.decode(e);if(t==="utf16")return R.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};R.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=R.encodeUtf8(t)),new R.ByteBuffer(t)};R.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};R.xorBytes=function(t,e,r){for(var i="",n="",s="",a=0,o=0;r>0;--r,++a)n=t.charCodeAt(a)^e.charCodeAt(a),o>=10&&(i+=s,s="",o=0),s+=String.fromCharCode(n),++o;return i+=s,i};R.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};R.bytesToHex=function(t){return R.createBuffer(t).toHex()};R.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ri=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Jd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";R.encode64=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.length;)n=t.charCodeAt(o++),s=t.charCodeAt(o++),a=t.charCodeAt(o++),r+=Bi.charAt(n>>2),r+=Bi.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Bi.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Bi.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};R.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,i,n,s,a=0;a<t.length;)r=Ri[t.charCodeAt(a++)-43],i=Ri[t.charCodeAt(a++)-43],n=Ri[t.charCodeAt(a++)-43],s=Ri[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|i>>4),n!==64&&(e+=String.fromCharCode((i&15)<<4|n>>2),s!==64&&(e+=String.fromCharCode((n&3)<<6|s)));return e};R.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};R.decodeUtf8=function(t){return decodeURIComponent(escape(t))};R.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Yd.encode,decode:Yd.decode}};R.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};R.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};R.binary.hex.encode=R.bytesToHex;R.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,s=r;for(t.length&1&&(n=1,i[s++]=parseInt(t[0],16));n<t.length;n+=2)i[s++]=parseInt(t.substr(n,2),16);return e?s-r:i};R.binary.base64.encode=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.byteLength;)n=t[o++],s=t[o++],a=t[o++],r+=Bi.charAt(n>>2),r+=Bi.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Bi.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Bi.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};R.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,s,a,o,u=0,c=r;u<t.length;)n=Ri[t.charCodeAt(u++)-43],s=Ri[t.charCodeAt(u++)-43],a=Ri[t.charCodeAt(u++)-43],o=Ri[t.charCodeAt(u++)-43],i[c++]=n<<2|s>>4,a!==64&&(i[c++]=(s&15)<<4|a>>2,o!==64&&(i[c++]=(a&3)<<6|o));return e?c-r:i.subarray(0,c)};R.binary.base58.encode=function(t,e){return R.binary.baseN.encode(t,Jd,e)};R.binary.base58.decode=function(t,e){return R.binary.baseN.decode(t,Jd,e)};R.text={utf8:{},utf16:{}};R.text.utf8.encode=function(t,e,r){t=R.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};R.text.utf8.decode=function(t){return R.decodeUtf8(String.fromCharCode.apply(null,t))};R.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length*2));var n=new Uint16Array(i.buffer);r=r||0;for(var s=r,a=r,o=0;o<t.length;++o)n[a++]=t.charCodeAt(o),s+=2;return e?s-r:i};R.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};R.deflate=function(t,e,r){if(e=R.decode64(t.deflate(R.encode64(e)).rval),r){var i=2,n=e.charCodeAt(1);n&32&&(i=6),e=e.substring(i,e.length-4)}return e};R.inflate=function(t,e,r){var i=t.inflate(R.encode64(e)).rval;return i===null?null:R.decode64(i)};var g0=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(r===null?i=t.removeItem(e):(r=R.encode64(JSON.stringify(r)),i=t.setItem(e,r)),typeof i!="undefined"&&i.rval!==!0){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},v0=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(R.decode64(r))),r},v4=function(t,e,r,i){var n=v0(t,e);n===null&&(n={}),n[r]=i,g0(t,e,n)},m4=function(t,e,r){var i=v0(t,e);return i!==null&&(i=r in i?i[r]:null),i},x4=function(t,e,r){var i=v0(t,e);if(i!==null&&r in i){delete i[r];var n=!0;for(var s in i){n=!1;break}n&&(i=null),g0(t,e,i)}},w4=function(t,e){g0(t,e,null)},ja=function(t,e,r){var i=null;typeof r=="undefined"&&(r=["web","flash"]);var n,s=!1,a=null;for(var o in r){n=r[o];try{if(n==="flash"||n==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");i=t.apply(this,e),s=n==="flash"}(n==="web"||n==="both")&&(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(u){a=u}if(s)break}if(!s)throw a;return i};R.setItem=function(t,e,r,i,n){ja(v4,arguments,n)};R.getItem=function(t,e,r,i){return ja(m4,arguments,i)};R.removeItem=function(t,e,r,i){ja(x4,arguments,i)};R.clearItems=function(t,e,r){ja(w4,arguments,r)};R.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=r===null?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?(i.port!==80&&i.scheme==="http"||i.port!==443&&i.scheme==="https")&&(i.fullHost+=":"+i.port):i.scheme==="http"?i.port=80:i.scheme==="https"&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var Ha=null;R.getQueryVariables=function(t){var e=function(i){for(var n={},s=i.split("&"),a=0;a<s.length;a++){var o=s[a].indexOf("="),u,c;o>0?(u=s[a].substring(0,o),c=s[a].substring(o+1)):(u=s[a],c=null),u in n||(n[u]=[]),!(u in Object.prototype)&&c!==null&&n[u].push(unescape(c))}return n},r;return typeof t=="undefined"?(Ha===null&&(typeof window!="undefined"&&window.location&&window.location.search?Ha=e(window.location.search.substring(1)):Ha={}),r=Ha):r=e(t),r};R.parseFragment=function(t){var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var n=e.split("/");n.length>0&&n[0]===""&&n.shift();var s=r===""?{}:R.getQueryVariables(r);return{pathString:e,queryString:r,path:n,query:s}};R.makeRequest=function(t){var e=R.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(i){return typeof i=="undefined"?e.path:e.path[i]},getQuery:function(i,n){var s;return typeof i=="undefined"?s=e.query:(s=e.query[i],s&&typeof n!="undefined"&&(s=s[n])),s},getQueryLast:function(i,n){var s,a=r.getQuery(i);return a?s=a[a.length-1]:s=n,s}};return r};R.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")};R.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};R.format=function(t){for(var e=/%./g,r,i,n=0,s=[],a=0;r=e.exec(t);){i=t.substring(a,e.lastIndex-2),i.length>0&&s.push(i),a=e.lastIndex;var o=r[0][1];switch(o){case"s":case"o":n<arguments.length?s.push(arguments[n+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(t.substring(a)),s.join("")};R.formatNumber=function(t,e,r,i){var n=t,s=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,o=i===void 0?".":i,u=n<0?"-":"",c=parseInt(n=Math.abs(+n||0).toFixed(s),10)+"",f=c.length>3?c.length%3:0;return u+(f?c.substr(0,f)+o:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(n-c).toFixed(s).slice(2):"")};R.formatSize=function(t){return t>=1073741824?t=R.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=R.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=R.formatNumber(t/1024,0)+" KiB":t=R.formatNumber(t,0)+" bytes",t};R.bytesFromIP=function(t){return t.indexOf(".")!==-1?R.bytesFromIPv4(t):t.indexOf(":")!==-1?R.bytesFromIPv6(t):null};R.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=R.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()};R.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,i=R.createBuffer(),n=0;n<8;++n){if(!t[n]||t[n].length===0){i.fillWithByte(0,r),r=0;continue}var s=R.hexToBytes(t[n]);s.length<2&&i.putByte(0),i.putBytes(s)}return i.getBytes()};R.bytesToIP=function(t){return t.length===4?R.bytesToIPv4(t):t.length===16?R.bytesToIPv6(t):null};R.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};R.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var s=R.bytesToHex(t[n]+t[n+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=e.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[i].end-r[i].start&&(i=r.length-1))}e.push(s)}if(r.length>0){var u=r[i];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};R.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in R&&!t.update)return e(null,R.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return R.cores=navigator.hardwareConcurrency,e(null,R.cores);if(typeof Worker=="undefined")return R.cores=1,e(null,R.cores);if(typeof Blob=="undefined")return R.cores=2,e(null,R.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var o=Date.now(),u=o+4;Date.now()<u;);self.postMessage({st:o,et:u})})}.toString(),")()"],{type:"application/javascript"}));i([],5,16);function i(a,o,u){if(o===0){var c=Math.floor(a.reduce(function(f,h){return f+h},0)/a.length);return R.cores=Math.max(1,c),URL.revokeObjectURL(r),e(null,R.cores)}n(u,function(f,h){a.push(s(u,h)),i(a,o-1,u)})}function n(a,o){for(var u=[],c=[],f=0;f<a;++f){var h=new Worker(r);h.addEventListener("message",function(p){if(c.push(p.data),c.length===a){for(var g=0;g<a;++g)u[g].terminate();o(null,c)}}),u.push(h)}for(var f=0;f<a;++f)u[f].postMessage(f)}function s(a,o){for(var u=[],c=0;c<a;++c)for(var f=o[c],h=u[c]=[],p=0;p<a;++p)if(c!==p){var g=o[p];(f.st>g.st&&f.st<g.et||g.st>f.st&&g.st<f.et)&&h.push(p)}return u.reduce(function(y,S){return Math.max(y,S.length)},0)}}});var Wa=T((V_,Xd)=>{var Ks=xe();Ks.pki=Ks.pki||{};var m0=Xd.exports=Ks.pki.oids=Ks.oids=Ks.oids||{};function F(t,e){m0[t]=e,m0[e]=t}function we(t,e){m0[t]=e}F("1.2.840.113549.1.1.1","rsaEncryption");F("1.2.840.113549.1.1.4","md5WithRSAEncryption");F("1.2.840.113549.1.1.5","sha1WithRSAEncryption");F("1.2.840.113549.1.1.7","RSAES-OAEP");F("1.2.840.113549.1.1.8","mgf1");F("1.2.840.113549.1.1.9","pSpecified");F("1.2.840.113549.1.1.10","RSASSA-PSS");F("1.2.840.113549.1.1.11","sha256WithRSAEncryption");F("1.2.840.113549.1.1.12","sha384WithRSAEncryption");F("1.2.840.113549.1.1.13","sha512WithRSAEncryption");F("1.3.101.112","EdDSA25519");F("1.2.840.10040.4.3","dsa-with-sha1");F("1.3.14.3.2.7","desCBC");F("1.3.14.3.2.26","sha1");F("2.16.840.1.101.3.4.2.1","sha256");F("2.16.840.1.101.3.4.2.2","sha384");F("2.16.840.1.101.3.4.2.3","sha512");F("1.2.840.113549.2.5","md5");F("1.2.840.113549.1.7.1","data");F("1.2.840.113549.1.7.2","signedData");F("1.2.840.113549.1.7.3","envelopedData");F("1.2.840.113549.1.7.4","signedAndEnvelopedData");F("1.2.840.113549.1.7.5","digestedData");F("1.2.840.113549.1.7.6","encryptedData");F("1.2.840.113549.1.9.1","emailAddress");F("1.2.840.113549.1.9.2","unstructuredName");F("1.2.840.113549.1.9.3","contentType");F("1.2.840.113549.1.9.4","messageDigest");F("1.2.840.113549.1.9.5","signingTime");F("1.2.840.113549.1.9.6","counterSignature");F("1.2.840.113549.1.9.7","challengePassword");F("1.2.840.113549.1.9.8","unstructuredAddress");F("1.2.840.113549.1.9.14","extensionRequest");F("1.2.840.113549.1.9.20","friendlyName");F("1.2.840.113549.1.9.21","localKeyId");F("1.2.840.113549.1.9.22.1","x509Certificate");F("1.2.840.113549.1.12.10.1.1","keyBag");F("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");F("1.2.840.113549.1.12.10.1.3","certBag");F("1.2.840.113549.1.12.10.1.4","crlBag");F("1.2.840.113549.1.12.10.1.5","secretBag");F("1.2.840.113549.1.12.10.1.6","safeContentsBag");F("1.2.840.113549.1.5.13","pkcs5PBES2");F("1.2.840.113549.1.5.12","pkcs5PBKDF2");F("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");F("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");F("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");F("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");F("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");F("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");F("1.2.840.113549.2.7","hmacWithSHA1");F("1.2.840.113549.2.8","hmacWithSHA224");F("1.2.840.113549.2.9","hmacWithSHA256");F("1.2.840.113549.2.10","hmacWithSHA384");F("1.2.840.113549.2.11","hmacWithSHA512");F("1.2.840.113549.3.7","des-EDE3-CBC");F("2.16.840.1.101.3.4.1.2","aes128-CBC");F("2.16.840.1.101.3.4.1.22","aes192-CBC");F("2.16.840.1.101.3.4.1.42","aes256-CBC");F("2.5.4.3","commonName");F("2.5.4.5","serialName");F("2.5.4.6","countryName");F("2.5.4.7","localityName");F("2.5.4.8","stateOrProvinceName");F("2.5.4.9","streetAddress");F("2.5.4.10","organizationName");F("2.5.4.11","organizationalUnitName");F("2.5.4.13","description");F("2.5.4.15","businessCategory");F("2.5.4.17","postalCode");F("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");F("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");F("2.16.840.1.113730.1.1","nsCertType");F("2.16.840.1.113730.1.13","nsComment");we("2.5.29.1","authorityKeyIdentifier");we("2.5.29.2","keyAttributes");we("2.5.29.3","certificatePolicies");we("2.5.29.4","keyUsageRestriction");we("2.5.29.5","policyMapping");we("2.5.29.6","subtreesConstraint");we("2.5.29.7","subjectAltName");we("2.5.29.8","issuerAltName");we("2.5.29.9","subjectDirectoryAttributes");we("2.5.29.10","basicConstraints");we("2.5.29.11","nameConstraints");we("2.5.29.12","policyConstraints");we("2.5.29.13","basicConstraints");F("2.5.29.14","subjectKeyIdentifier");F("2.5.29.15","keyUsage");we("2.5.29.16","privateKeyUsagePeriod");F("2.5.29.17","subjectAltName");F("2.5.29.18","issuerAltName");F("2.5.29.19","basicConstraints");we("2.5.29.20","cRLNumber");we("2.5.29.21","cRLReason");we("2.5.29.22","expirationDate");we("2.5.29.23","instructionCode");we("2.5.29.24","invalidityDate");we("2.5.29.25","cRLDistributionPoints");we("2.5.29.26","issuingDistributionPoint");we("2.5.29.27","deltaCRLIndicator");we("2.5.29.28","issuingDistributionPoint");we("2.5.29.29","certificateIssuer");we("2.5.29.30","nameConstraints");F("2.5.29.31","cRLDistributionPoints");F("2.5.29.32","certificatePolicies");we("2.5.29.33","policyMappings");we("2.5.29.34","policyConstraints");F("2.5.29.35","authorityKeyIdentifier");we("2.5.29.36","policyConstraints");F("2.5.29.37","extKeyUsage");we("2.5.29.46","freshestCRL");we("2.5.29.54","inhibitAnyPolicy");F("1.3.6.1.4.1.11129.2.4.2","timestampList");F("1.3.6.1.5.5.7.1.1","authorityInfoAccess");F("1.3.6.1.5.5.7.3.1","serverAuth");F("1.3.6.1.5.5.7.3.2","clientAuth");F("1.3.6.1.5.5.7.3.3","codeSigning");F("1.3.6.1.5.5.7.3.4","emailProtection");F("1.3.6.1.5.5.7.3.8","timeStamping")});var jn=T((j_,Qd)=>{var Oe=xe();Ue();Wa();var H=Qd.exports=Oe.asn1=Oe.asn1||{};H.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};H.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};H.create=function(t,e,r,i,n){if(Oe.util.isArray(i)){for(var s=[],a=0;a<i.length;++a)i[a]!==void 0&&s.push(i[a]);i=s}var o={tagClass:t,type:e,constructed:r,composed:r||Oe.util.isArray(i),value:i};return n&&"bitStringContents"in n&&(o.bitStringContents=n.bitStringContents,o.original=H.copy(o)),o};H.copy=function(t,e){var r;if(Oe.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(H.copy(t[i],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:H.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};H.equals=function(t,e,r){if(Oe.util.isArray(t)){if(!Oe.util.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!H.equals(t[i],e[i]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var n=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&H.equals(t.value,e.value);return r&&r.includeBitStringContents&&(n=n&&t.bitStringContents===e.bitStringContents),n};H.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,i=e&128;return i?r=t.getInt((e&127)<<3):r=e,r}};function Fs(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}var _4=function(t,e){var r=t.getByte();if(e--,r!==128){var i,n=r&128;if(!n)i=r;else{var s=r&127;Fs(t,e,s),i=t.getInt(s<<3)}if(i<0)throw new Error("Negative length: "+i);return i}};H.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Oe.util.createBuffer(t)),Ya(t,t.length(),0,e)};function Ya(t,e,r,i){var n;Fs(t,e,2);var s=t.getByte();e--;var a=s&192,o=s&31;n=t.length();var u=_4(t,e);if(e-=n-t.length(),u!==void 0&&u>e){if(i.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=t.length(),c.remaining=e,c.requested=u,c}u=e}var f,h,p=(s&32)==32;if(p)if(f=[],u===void 0)for(;;){if(Fs(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}n=t.length(),f.push(Ya(t,e,r+1,i)),e-=n-t.length()}else for(;u>0;)n=t.length(),f.push(Ya(t,u,r+1,i)),e-=n-t.length(),u-=n-t.length();if(f===void 0&&a===H.Class.UNIVERSAL&&o===H.Type.BITSTRING&&(h=t.bytes(u)),f===void 0&&i.decodeBitStrings&&a===H.Class.UNIVERSAL&&o===H.Type.BITSTRING&&u>1){var g=t.read,y=e,S=0;if(o===H.Type.BITSTRING&&(Fs(t,e,1),S=t.getByte(),e--),S===0)try{n=t.length();var B={verbose:i.verbose,strict:!0,decodeBitStrings:!0},I=Ya(t,e,r+1,B),M=n-t.length();e-=M,o==H.Type.BITSTRING&&M++;var D=I.tagClass;M===u&&(D===H.Class.UNIVERSAL||D===H.Class.CONTEXT_SPECIFIC)&&(f=[I])}catch(k){}f===void 0&&(t.read=g,e=y)}if(f===void 0){if(u===void 0){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(o===H.Type.BMPSTRING)for(f="";u>0;u-=2)Fs(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(u)}var q=h===void 0?null:{bitStringContents:h};return H.create(a,o,p,f,q)}H.toDer=function(t){var e=Oe.util.createBuffer(),r=t.tagClass|t.type,i=Oe.util.createBuffer(),n=!1;if("bitStringContents"in t&&(n=!0,t.original&&(n=H.equals(t,t.original))),n)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&i.putBuffer(H.toDer(t.value[s]))}else if(t.type===H.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===H.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(i.length()&127);else{var a=i.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)e.putByte(o.charCodeAt(s))}return e.putBuffer(i),e};H.oidToDer=function(t){var e=t.split("."),r=Oe.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var i,n,s,a,o=2;o<e.length;++o){i=!0,n=[],s=parseInt(e[o],10);do a=s&127,s=s>>>7,i||(a|=128),n.push(a),i=!1;while(s>0);for(var u=n.length-1;u>=0;--u)r.putByte(n[u])}return r};H.derToOid=function(t){var e;typeof t=="string"&&(t=Oe.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i=i<<7,r&128?i+=r&127:(e+="."+(i+r),i=0);return e};H.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var u=t.charAt(10),c=10;u!=="+"&&u!=="-"&&(o=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,0),c&&(u=t.charAt(c),u==="+"||u==="-")){var f=parseInt(t.substr(c+1,2),10),h=parseInt(t.substr(c+4,2),10),p=f*60+h;p*=6e4,u==="+"?e.setTime(+e-p):e.setTime(+e+p)}return e};H.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),u=0,c=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var h=t.length-5,p=t.charAt(h);if(p==="+"||p==="-"){var g=parseInt(t.substr(h+1,2),10),y=parseInt(t.substr(h+4,2),10);c=g*60+y,c*=6e4,p==="+"&&(c*=-1),f=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,u),e.setTime(+e+c)):(e.setFullYear(r,i,n),e.setHours(s,a,o,u)),e};H.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};H.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};H.integerToDer=function(t){var e=Oe.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};H.derToInteger=function(t){typeof t=="string"&&(t=Oe.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};H.validate=function(t,e,r,i){var n=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(n=!0,e.value&&Oe.util.isArray(e.value))for(var s=0,a=0;n&&a<e.value.length;++a)n=e.value[a].optional||!1,t.value[s]&&(n=H.validate(t.value[s],e.value[a],r,i),n?++s:e.value[a].optional&&(n=!0)),!n&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(n&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var o;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return n};var Zd=/[^\\u0000-\\u00ff]/;H.prettyPrint=function(t,e,r){var i="";e=e||0,r=r||2,e>0&&(i+=`
`);for(var n="",s=0;s<e*r;++s)n+=" ";switch(i+=n+"Tag: ",t.tagClass){case H.Class.UNIVERSAL:i+="Universal:";break;case H.Class.APPLICATION:i+="Application:";break;case H.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case H.Class.PRIVATE:i+="Private:";break}if(t.tagClass===H.Class.UNIVERSAL)switch(i+=t.type,t.type){case H.Type.NONE:i+=" (None)";break;case H.Type.BOOLEAN:i+=" (Boolean)";break;case H.Type.INTEGER:i+=" (Integer)";break;case H.Type.BITSTRING:i+=" (Bit string)";break;case H.Type.OCTETSTRING:i+=" (Octet string)";break;case H.Type.NULL:i+=" (Null)";break;case H.Type.OID:i+=" (Object Identifier)";break;case H.Type.ODESC:i+=" (Object Descriptor)";break;case H.Type.EXTERNAL:i+=" (External or Instance of)";break;case H.Type.REAL:i+=" (Real)";break;case H.Type.ENUMERATED:i+=" (Enumerated)";break;case H.Type.EMBEDDED:i+=" (Embedded PDV)";break;case H.Type.UTF8:i+=" (UTF8)";break;case H.Type.ROID:i+=" (Relative Object Identifier)";break;case H.Type.SEQUENCE:i+=" (Sequence)";break;case H.Type.SET:i+=" (Set)";break;case H.Type.PRINTABLESTRING:i+=" (Printable String)";break;case H.Type.IA5String:i+=" (IA5String (ASCII))";break;case H.Type.UTCTIME:i+=" (UTC time)";break;case H.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case H.Type.BMPSTRING:i+=" (BMP String)";break}else i+=t.type;if(i+=`
`,i+=n+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,o="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(a+=1,o+=H.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(o+=","));i+=n+"Sub values: "+a+o}else{if(i+=n+"Value: ",t.type===H.Type.OID){var u=H.derToOid(t.value);i+=u,Oe.pki&&Oe.pki.oids&&u in Oe.pki.oids&&(i+=" ("+Oe.pki.oids[u]+") ")}if(t.type===H.Type.INTEGER)try{i+=H.derToInteger(t.value)}catch(f){i+="0x"+Oe.util.bytesToHex(t.value)}else if(t.type===H.Type.BITSTRING){if(t.value.length>1?i+="0x"+Oe.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var c=t.value.charCodeAt(0);c==1?i+=" (1 unused bit shown)":c>1&&(i+=" ("+c+" unused bits shown)")}}else t.type===H.Type.OCTETSTRING?(Zd.test(t.value)||(i+="("+t.value+") "),i+="0x"+Oe.util.bytesToHex(t.value)):t.type===H.Type.UTF8?i+=Oe.util.decodeUtf8(t.value):t.type===H.Type.PRINTABLESTRING||t.type===H.Type.IA5String?i+=t.value:Zd.test(t.value)?i+="0x"+Oe.util.bytesToHex(t.value):t.value.length===0?i+="[null]":i+=t.value}return i}});var w0=T((H_,ep)=>{var It=xe();Ue();ep.exports=It.cipher=It.cipher||{};It.cipher.algorithms=It.cipher.algorithms||{};It.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=It.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new It.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};It.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=It.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new It.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};It.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),It.cipher.algorithms[t]=e};It.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in It.cipher.algorithms?It.cipher.algorithms[t]:null};var x0=It.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};x0.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=It.util.createBuffer(),this.output=t.output||It.util.createBuffer(),this.mode.start(e)};x0.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};x0.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var S0=T((W_,tp)=>{var At=xe();Ue();At.cipher=At.cipher||{};var he=tp.exports=At.cipher.modes=At.cipher.modes||{};he.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};he.ecb.prototype.start=function(t){};he.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};he.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};he.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};he.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};he.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};he.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=Ja(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};he.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock};he.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)};he.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};he.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};he.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0};he.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ja(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};he.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};he.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};he.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0};he.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ja(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};he.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};he.ofb.prototype.decrypt=he.ofb.prototype.encrypt;he.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0};he.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ja(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};he.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}$a(this._inBlock)};he.ctr.prototype.decrypt=he.ctr.prototype.encrypt;he.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0,this._R=3774873600};he.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=At.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=At.util.createBuffer(t.additionalData):r=At.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=At.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=e.length();if(i===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(_0(i*8)))}this._inBlock=this._j0.slice(0),$a(this._inBlock),this._partialBytes=0,r=At.util.createBuffer(r),this._aDataLength=_0(r.length()*8);var n=r.length()%this.blockSize;for(n&&r.fillWithByte(0,this.blockSize-n),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};he.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s<=0||r){if(r){var a=i%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),$a(this._inBlock)};he.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),$a(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize};he.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=At.util.createBuffer();var i=this._aDataLength.concat(_0(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var n=[];this.cipher.encrypt(this._j0,n);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^n[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};he.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){var s=t[n/32|0]&1<<31-n%32;s&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r};he.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,i=3;i>0;--i)e[i]=t[i]>>>1|(t[i-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};he.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=r/8|0,n=t[i]>>>(7-r%8)*4&15,s=this._m[r][n];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};he.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};he.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,s=new Array(n),a=0;a<n;++a){var o=[0,0,0,0],u=a/i|0,c=(i-1-a%i)*e;o[u]=1<<e-1<<c,s[a]=this.generateSubHashTable(this.multiply(o,t),e)}return s};he.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var s=i>>>1;s>0;)this.pow(n[2*s],n[s]=[]),s>>=1;for(s=2;s<i;){for(var a=1;a<s;++a){var o=n[s],u=n[a];n[s+a]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}s*=2}for(n[0]=[0,0,0,0],s=i+1;s<r;++s){var c=n[s^i];n[s]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return n};function Ja(t,e){if(typeof t=="string"&&(t=At.util.createBuffer(t)),At.util.isArray(t)&&t.length>4){var r=t;t=At.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!At.util.isArray(t)){for(var n=[],s=e/4,i=0;i<s;++i)n.push(t.getInt32());t=n}return t}function $a(t){t[t.length-1]=t[t.length-1]+1&4294967295}function _0(t){return[t/4294967296|0,t&4294967295]}});var C0=T((Y_,sp)=>{var Te=xe();w0();S0();Ue();sp.exports=Te.aes=Te.aes||{};Te.aes.startEncrypting=function(t,e,r,i){var n=Xa({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n};Te.aes.createEncryptionCipher=function(t,e){return Xa({key:t,output:null,decrypt:!1,mode:e})};Te.aes.startDecrypting=function(t,e,r,i){var n=Xa({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n};Te.aes.createDecryptionCipher=function(t,e){return Xa({key:t,output:null,decrypt:!0,mode:e})};Te.aes.Algorithm=function(t,e){E0||ip();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(i,n){return A0(r._w,i,n,!1)},decrypt:function(i,n){return A0(r._w,i,n,!0)}}}),r._init=!1};Te.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Te.util.createBuffer(e);else if(Te.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Te.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(!Te.util.isArray(e)){r=e,e=[];var n=r.length();if(n===16||n===24||n===32){n=n>>>2;for(var i=0;i<n;++i)e.push(r.getInt32())}}if(!Te.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=np(e,t.decrypt&&!a),this._init=!0}};Te.aes._expandKey=function(t,e){return E0||ip(),np(t,e)};Te.aes._updateBlock=A0;Hn("AES-ECB",Te.cipher.modes.ecb);Hn("AES-CBC",Te.cipher.modes.cbc);Hn("AES-CFB",Te.cipher.modes.cfb);Hn("AES-OFB",Te.cipher.modes.ofb);Hn("AES-CTR",Te.cipher.modes.ctr);Hn("AES-GCM",Te.cipher.modes.gcm);function Hn(t,e){var r=function(){return new Te.aes.Algorithm(t,e)};Te.cipher.registerAlgorithm(t,r)}var E0=!1,Wn=4,Gt,I0,rp,rn,yr;function ip(){E0=!0,rp=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Gt=new Array(256),I0=new Array(256),rn=new Array(4),yr=new Array(4);for(var e=0;e<4;++e)rn[e]=new Array(256),yr[e]=new Array(256);for(var r=0,i=0,n,s,a,o,u,c,f,e=0;e<256;++e){o=i^i<<1^i<<2^i<<3^i<<4,o=o>>8^o&255^99,Gt[r]=o,I0[o]=r,u=t[o],n=t[r],s=t[n],a=t[s],c=u<<24^o<<16^o<<8^(o^u),f=(n^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^n^a);for(var h=0;h<4;++h)rn[h][r]=c,yr[h][o]=f,c=c<<24|c>>>8,f=f<<24|f>>>8;r===0?r=i=1:(r=n^t[t[t[n^a]]],i^=t[t[i]])}}function np(t,e){for(var r=t.slice(0),i,n=1,s=r.length,a=s+6+1,o=Wn*a,u=s;u<o;++u)i=r[u-1],u%s==0?(i=Gt[i>>>16&255]<<24^Gt[i>>>8&255]<<16^Gt[i&255]<<8^Gt[i>>>24]^rp[n]<<24,n++):s>6&&u%s==4&&(i=Gt[i>>>24]<<24^Gt[i>>>16&255]<<16^Gt[i>>>8&255]<<8^Gt[i&255]),r[u]=r[u-s]^i;if(e){var c,f=yr[0],h=yr[1],p=yr[2],g=yr[3],y=r.slice(0);o=r.length;for(var u=0,S=o-Wn;u<o;u+=Wn,S-=Wn)if(u===0||u===o-Wn)y[u]=r[S],y[u+1]=r[S+3],y[u+2]=r[S+2],y[u+3]=r[S+1];else for(var B=0;B<Wn;++B)c=r[S+B],y[u+(3&-B)]=f[Gt[c>>>24]]^h[Gt[c>>>16&255]]^p[Gt[c>>>8&255]]^g[Gt[c&255]];r=y}return r}function A0(t,e,r,i){var n=t.length/4-1,s,a,o,u,c;i?(s=yr[0],a=yr[1],o=yr[2],u=yr[3],c=I0):(s=rn[0],a=rn[1],o=rn[2],u=rn[3],c=Gt);var f,h,p,g,y,S,B;f=e[0]^t[0],h=e[i?3:1]^t[1],p=e[2]^t[2],g=e[i?1:3]^t[3];for(var I=3,M=1;M<n;++M)y=s[f>>>24]^a[h>>>16&255]^o[p>>>8&255]^u[g&255]^t[++I],S=s[h>>>24]^a[p>>>16&255]^o[g>>>8&255]^u[f&255]^t[++I],B=s[p>>>24]^a[g>>>16&255]^o[f>>>8&255]^u[h&255]^t[++I],g=s[g>>>24]^a[f>>>16&255]^o[h>>>8&255]^u[p&255]^t[++I],f=y,h=S,p=B;r[0]=c[f>>>24]<<24^c[h>>>16&255]<<16^c[p>>>8&255]<<8^c[g&255]^t[++I],r[i?3:1]=c[h>>>24]<<24^c[p>>>16&255]<<16^c[g>>>8&255]<<8^c[f&255]^t[++I],r[2]=c[p>>>24]<<24^c[g>>>16&255]<<16^c[f>>>8&255]<<8^c[h&255]^t[++I],r[i?1:3]=c[g>>>24]<<24^c[f>>>16&255]<<16^c[h>>>8&255]<<8^c[p&255]^t[++I]}function Xa(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,i;t.decrypt?i=Te.cipher.createDecipher(r,t.key):i=Te.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof Te.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var fp=T((J_,op)=>{var Ne=xe();w0();S0();Ue();op.exports=Ne.des=Ne.des||{};Ne.des.startEncrypting=function(t,e,r,i){var n=Za({key:t,output:r,decrypt:!1,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Ne.des.createEncryptionCipher=function(t,e){return Za({key:t,output:null,decrypt:!1,mode:e})};Ne.des.startDecrypting=function(t,e,r,i){var n=Za({key:t,output:r,decrypt:!0,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Ne.des.createDecryptionCipher=function(t,e){return Za({key:t,output:null,decrypt:!0,mode:e})};Ne.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(i,n){return ap(r._keys,i,n,!1)},decrypt:function(i,n){return ap(r._keys,i,n,!0)}}}),r._init=!1};Ne.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ne.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=M4(e),this._init=!0}};Or("DES-ECB",Ne.cipher.modes.ecb);Or("DES-CBC",Ne.cipher.modes.cbc);Or("DES-CFB",Ne.cipher.modes.cfb);Or("DES-OFB",Ne.cipher.modes.ofb);Or("DES-CTR",Ne.cipher.modes.ctr);Or("3DES-ECB",Ne.cipher.modes.ecb);Or("3DES-CBC",Ne.cipher.modes.cbc);Or("3DES-CFB",Ne.cipher.modes.cfb);Or("3DES-OFB",Ne.cipher.modes.ofb);Or("3DES-CTR",Ne.cipher.modes.ctr);function Or(t,e){var r=function(){return new Ne.des.Algorithm(t,e)};Ne.cipher.registerAlgorithm(t,r)}var S4=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],E4=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],I4=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],A4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],C4=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],B4=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],R4=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],T4=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function M4(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],n=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],S=t.length()>8?3:1,B=[],I=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],M=0,D,q=0;q<S;q++){var k=t.getInt32(),O=t.getInt32();D=(k>>>4^O)&252645135,O^=D,k^=D<<4,D=(O>>>-16^k)&65535,k^=D,O^=D<<-16,D=(k>>>2^O)&858993459,O^=D,k^=D<<2,D=(O>>>-16^k)&65535,k^=D,O^=D<<-16,D=(k>>>1^O)&1431655765,O^=D,k^=D<<1,D=(O>>>8^k)&16711935,k^=D,O^=D<<8,D=(k>>>1^O)&1431655765,O^=D,k^=D<<1,D=k<<8|O>>>20&240,k=O<<24|O<<8&16711680|O>>>8&65280|O>>>24&240,O=D;for(var V=0;V<I.length;++V){I[V]?(k=k<<2|k>>>26,O=O<<2|O>>>26):(k=k<<1|k>>>27,O=O<<1|O>>>27),k&=-15,O&=-15;var U=e[k>>>28]|r[k>>>24&15]|i[k>>>20&15]|n[k>>>16&15]|s[k>>>12&15]|a[k>>>8&15]|o[k>>>4&15],X=u[O>>>28]|c[O>>>24&15]|f[O>>>20&15]|h[O>>>16&15]|p[O>>>12&15]|g[O>>>8&15]|y[O>>>4&15];D=(X>>>16^U)&65535,B[M++]=U^D,B[M++]=X^D<<16}}return B}function ap(t,e,r,i){var n=t.length===32?3:9,s;n===3?s=i?[30,-2,-2]:[0,32,2]:s=i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=e[0],u=e[1];a=(o>>>4^u)&252645135,u^=a,o^=a<<4,a=(o>>>16^u)&65535,u^=a,o^=a<<16,a=(u>>>2^o)&858993459,o^=a,u^=a<<2,a=(u>>>8^o)&16711935,o^=a,u^=a<<8,a=(o>>>1^u)&1431655765,u^=a,o^=a<<1,o=o<<1|o>>>31,u=u<<1|u>>>31;for(var c=0;c<n;c+=3){for(var f=s[c+1],h=s[c+2],p=s[c];p!=f;p+=h){var g=u^t[p],y=(u>>>4|u<<28)^t[p+1];a=o,o=u,u=a^(E4[g>>>24&63]|A4[g>>>16&63]|B4[g>>>8&63]|T4[g&63]|S4[y>>>24&63]|I4[y>>>16&63]|C4[y>>>8&63]|R4[y&63])}a=o,o=u,u=a}o=o>>>1|o<<31,u=u>>>1|u<<31,a=(o>>>1^u)&1431655765,u^=a,o^=a<<1,a=(u>>>8^o)&16711935,o^=a,u^=a<<8,a=(u>>>2^o)&858993459,o^=a,u^=a<<2,a=(o>>>16^u)&65535,u^=a,o^=a<<16,a=(o>>>4^u)&252645135,u^=a,o^=a<<4,r[0]=o,r[1]=u}function Za(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,i;t.decrypt?i=Ne.cipher.createDecipher(r,t.key):i=Ne.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof Ne.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var nn=T(($_,cp)=>{var Qa=xe();cp.exports=Qa.md=Qa.md||{};Qa.md.algorithms=Qa.md.algorithms||{}});var hp=T((X_,up)=>{var ni=xe();nn();Ue();var P4=up.exports=ni.hmac=ni.hmac||{};P4.create=function(){var t=null,e=null,r=null,i=null,n={};return n.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in ni.md.algorithms)e=ni.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(a===null)a=t;else{if(typeof a=="string")a=ni.util.createBuffer(a);else if(ni.util.isArray(a)){var o=a;a=ni.util.createBuffer();for(var u=0;u<o.length;++u)a.putByte(o[u])}var c=a.length();c>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=ni.util.createBuffer(),i=ni.util.createBuffer(),c=a.length();for(var u=0;u<c;++u){var o=a.at(u);r.putByte(54^o),i.putByte(92^o)}if(c<e.blockLength)for(var o=e.blockLength-c,u=0;u<o;++u)r.putByte(54),i.putByte(92);t=a,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},n.update=function(s){e.update(s)},n.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(i),e.update(s),e.digest()},n.digest=n.getMac,n}});var Us=T(()=>{});var dp=T((eS,lp)=>{var zt=xe();hp();nn();Ue();var D4=zt.pkcs5=zt.pkcs5||{},si;zt.util.isNodejs&&!zt.options.usePureJavaScript&&(si=Us());lp.exports=zt.pbkdf2=D4.pbkdf2=function(t,e,r,i,n,s){if(typeof n=="function"&&(s=n,n=null),zt.util.isNodejs&&!zt.options.usePureJavaScript&&si.pbkdf2&&(n===null||typeof n!="object")&&(si.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?si.pbkdf2Sync.length===4?si.pbkdf2(t,e,r,i,function(D,q){if(D)return s(D);s(null,q.toString("binary"))}):si.pbkdf2(t,e,r,i,n,function(D,q){if(D)return s(D);s(null,q.toString("binary"))}):si.pbkdf2Sync.length===4?si.pbkdf2Sync(t,e,r,i).toString("binary"):si.pbkdf2Sync(t,e,r,i,n).toString("binary");if((typeof n=="undefined"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in zt.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=zt.md[n].create()}var a=n.digestLength;if(i>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var u=Math.ceil(i/a),c=i-(u-1)*a,f=zt.hmac.create();f.start(n,t);var h="",p,g,y;if(!s){for(var S=1;S<=u;++S){f.start(null,null),f.update(e),f.update(zt.util.int32ToBytes(S)),p=y=f.digest().getBytes();for(var B=2;B<=r;++B)f.start(null,null),f.update(y),g=f.digest().getBytes(),p=zt.util.xorBytes(p,g,a),y=g;h+=S<u?p:p.substr(0,c)}return h}var S=1,B;function I(){if(S>u)return s(null,h);f.start(null,null),f.update(e),f.update(zt.util.int32ToBytes(S)),p=y=f.digest().getBytes(),B=2,M()}function M(){if(B<=r)return f.start(null,null),f.update(y),g=f.digest().getBytes(),p=zt.util.xorBytes(p,g,a),y=g,++B,zt.util.setImmediate(M);h+=S<u?p:p.substr(0,c),++S,I()}I()}});var yp=T((tS,bp)=>{var eo=xe();Ue();var pp=bp.exports=eo.pem=eo.pem||{};pp.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,i;if(t.procType&&(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=to(i)),t.contentDomain&&(i={name:"Content-Domain",values:[t.contentDomain]},r+=to(i)),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),r+=to(i)),t.headers)for(var n=0;n<t.headers.length;++n)r+=to(t.headers[n]);return t.procType&&(r+=`\r
`),r+=eo.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};pp.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,n=/\r?\n/,s;s=r.exec(t),!!s;){var a={type:s[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:eo.util.decode64(s[3])};if(e.push(a),!!s[2]){for(var o=s[2].split(n),u=0;s&&u<o.length;){for(var c=o[u].replace(/\s+$/,""),f=u+1;f<o.length;++f){var h=o[f];if(!/\s/.test(h[0]))break;c+=h,u=f}if(s=c.match(i),s){for(var p={name:s[1],values:[]},g=s[2].split(","),y=0;y<g.length;++y)p.values.push(O4(g[y]));if(a.procType)if(!a.contentDomain&&p.name==="Content-Domain")a.contentDomain=g[0]||"";else if(!a.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:g[0],parameters:g[1]||null}}else a.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:g[0],type:g[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function to(t){for(var e=t.name+": ",r=[],i=function(u,c){return" "+c},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+`\r
`;for(var s=0,a=-1,n=0;n<e.length;++n,++s)if(s>65&&a!==-1){var o=e[a];o===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+o+e.substr(a+1),s=n-a-1,a=-1,++n}else(e[n]===" "||e[n]==="	"||e[n]===",")&&(a=n);return e}function O4(t){return t.replace(/^\s+/,"")}});var _p=T((rS,wp)=>{var Nr=xe();nn();Ue();var gp=wp.exports=Nr.sha256=Nr.sha256||{};Nr.md.sha256=Nr.md.algorithms.sha256=gp;gp.create=function(){vp||N4();var t=null,e=Nr.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=Nr.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=Nr.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),xp(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Nr.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(B0.substr(0,i.blockLength-a));for(var o,u,c=i.fullMessageLength[0]*8,f=0;f<i.fullMessageLength.length-1;++f)o=i.fullMessageLength[f+1]*8,u=o/4294967296>>>0,c+=u,n.putInt32(c>>>0),c=o>>>0;n.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};xp(h,r,n);var p=Nr.util.createBuffer();return p.putInt32(h.h0),p.putInt32(h.h1),p.putInt32(h.h2),p.putInt32(h.h3),p.putInt32(h.h4),p.putInt32(h.h5),p.putInt32(h.h6),p.putInt32(h.h7),p},i};var B0=null,vp=!1,mp=null;function N4(){B0=String.fromCharCode(128),B0+=Nr.util.fillString(String.fromCharCode(0),64),mp=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],vp=!0}function xp(t,e,r){for(var i,n,s,a,o,u,c,f,h,p,g,y,S,B,I,M=r.length();M>=64;){for(c=0;c<16;++c)e[c]=r.getInt32();for(;c<64;++c)i=e[c-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[c-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[c]=i+e[c-7]+n+e[c-16]|0;for(f=t.h0,h=t.h1,p=t.h2,g=t.h3,y=t.h4,S=t.h5,B=t.h6,I=t.h7,c=0;c<64;++c)a=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),o=B^y&(S^B),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&h|p&(f^h),i=I+a+o+mp[c]+e[c],n=s+u,I=B,B=S,S=y,y=g+i>>>0,g=p,p=h,h=f,f=i+n>>>0;t.h0=t.h0+f|0,t.h1=t.h1+h|0,t.h2=t.h2+p|0,t.h3=t.h3+g|0,t.h4=t.h4+y|0,t.h5=t.h5+S|0,t.h6=t.h6+B|0,t.h7=t.h7+I|0,M-=64}}});var Ep=T((iS,Sp)=>{var Lr=xe();Ue();var ro=null;Lr.util.isNodejs&&!Lr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(ro=Us());var L4=Sp.exports=Lr.prng=Lr.prng||{};L4.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),n=0;n<32;++n)i[n]=r.create();e.pools=i,e.pool=0,e.generate=function(c,f){if(!f)return e.generateSync(c);var h=e.plugin.cipher,p=e.plugin.increment,g=e.plugin.formatKey,y=e.plugin.formatSeed,S=Lr.util.createBuffer();e.key=null,B();function B(I){if(I)return f(I);if(S.length()>=c)return f(null,S.getBytes(c));if(e.generated>1048575&&(e.key=null),e.key===null)return Lr.util.nextTick(function(){s(B)});var M=h(e.key,e.seed);e.generated+=M.length,S.putBytes(M),e.key=g(h(e.key,p(e.seed))),e.seed=y(h(e.key,e.seed)),Lr.util.setImmediate(B)}},e.generateSync=function(c){var f=e.plugin.cipher,h=e.plugin.increment,p=e.plugin.formatKey,g=e.plugin.formatSeed;e.key=null;for(var y=Lr.util.createBuffer();y.length()<c;){e.generated>1048575&&(e.key=null),e.key===null&&a();var S=f(e.key,e.seed);e.generated+=S.length,y.putBytes(S),e.key=p(f(e.key,h(e.seed))),e.seed=g(f(e.key,e.seed))}return y.getBytes(c)};function s(c){if(e.pools[0].messageLength>=32)return o(),c();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(h,p){if(h)return c(h);e.collect(p),o(),c()})}function a(){if(e.pools[0].messageLength>=32)return o();var c=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(c)),o()}function o(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var c=e.plugin.md.create();c.update(e.keyBytes);for(var f=1,h=0;h<32;++h)e.reseeds%f==0&&(c.update(e.pools[h].digest().getBytes()),e.pools[h].start()),f=f<<1;e.keyBytes=c.digest().getBytes(),c.start(),c.update(e.keyBytes);var p=c.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(p),e.generated=0}function u(c){var f=null,h=Lr.util.globalScope,p=h.crypto||h.msCrypto;p&&p.getRandomValues&&(f=function(k){return p.getRandomValues(k)});var g=Lr.util.createBuffer();if(f)for(;g.length()<c;){var y=Math.max(1,Math.min(c-g.length(),65536)/4),S=new Uint32Array(Math.floor(y));try{f(S);for(var B=0;B<S.length;++B)g.putInt32(S[B])}catch(k){if(!(typeof QuotaExceededError!="undefined"&&k instanceof QuotaExceededError))throw k}}if(g.length()<c)for(var I,M,D,q=Math.floor(Math.random()*65536);g.length()<c;){M=16807*(q&65535),I=16807*(q>>16),M+=(I&32767)<<16,M+=I>>15,M=(M&2147483647)+(M>>31),q=M&4294967295;for(var B=0;B<3;++B)D=q>>>(B<<3),D^=Math.floor(Math.random()*256),g.putByte(String.fromCharCode(D&255))}return g.getBytes(c)}return ro?(e.seedFile=function(c,f){ro.randomBytes(c,function(h,p){if(h)return f(h);f(null,p.toString())})},e.seedFileSync=function(c){return ro.randomBytes(c).toString()}):(e.seedFile=function(c,f){try{f(null,u(c))}catch(h){f(h)}},e.seedFileSync=u),e.collect=function(c){for(var f=c.length,h=0;h<f;++h)e.pools[e.pool].update(c.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(c,f){for(var h="",p=0;p<f;p+=8)h+=String.fromCharCode(c>>p&255);e.collect(h)},e.registerWorker=function(c){if(c===self)e.seedFile=function(h,p){function g(y){var S=y.data;S.forge&&S.forge.prng&&(self.removeEventListener("message",g),p(S.forge.prng.err,S.forge.prng.bytes))}self.addEventListener("message",g),self.postMessage({forge:{prng:{needed:h}}})};else{var f=function(h){var p=h.data;p.forge&&p.forge.prng&&e.seedFile(p.forge.prng.needed,function(g,y){c.postMessage({forge:{prng:{err:g,bytes:y}}})})};c.addEventListener("message",f)}},e}});var Yn=T((nS,R0)=>{var Ct=xe();C0();_p();Ep();Ue();(function(){if(Ct.random&&Ct.random.getBytes){R0.exports=Ct.random;return}(function(t){var e={},r=new Array(4),i=Ct.util.createBuffer();e.formatKey=function(h){var p=Ct.util.createBuffer(h);return h=new Array(4),h[0]=p.getInt32(),h[1]=p.getInt32(),h[2]=p.getInt32(),h[3]=p.getInt32(),Ct.aes._expandKey(h,!1)},e.formatSeed=function(h){var p=Ct.util.createBuffer(h);return h=new Array(4),h[0]=p.getInt32(),h[1]=p.getInt32(),h[2]=p.getInt32(),h[3]=p.getInt32(),h},e.cipher=function(h,p){return Ct.aes._updateBlock(h,p,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},e.increment=function(h){return++h[3],h},e.md=Ct.md.sha256;function n(){var h=Ct.prng.create(e);return h.getBytes=function(p,g){return h.generate(p,g)},h.getBytesSync=function(p){return h.generate(p)},h}var s=n(),a=null,o=Ct.util.globalScope,u=o.crypto||o.msCrypto;if(u&&u.getRandomValues&&(a=function(h){return u.getRandomValues(h)}),Ct.options.usePureJavaScript||!Ct.util.isNodejs&&!a){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var c="";for(var f in navigator)try{typeof navigator[f]=="string"&&(c+=navigator[f])}catch(h){}s.collect(c),c=null}t&&(t().mousemove(function(h){s.collectInt(h.clientX,16),s.collectInt(h.clientY,16)}),t().keypress(function(h){s.collectInt(h.charCode,8)}))}if(!Ct.random)Ct.random=s;else for(var f in s)Ct.random[f]=s[f];Ct.random.createInstance=n,R0.exports=Ct.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Bp=T((sS,Cp)=>{var Ht=xe();Ue();var T0=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Ip=[1,2,3,5],k4=function(t,e){return t<<e&65535|(t&65535)>>16-e},q4=function(t,e){return(t&65535)>>e|t<<16-e&65535};Cp.exports=Ht.rc2=Ht.rc2||{};Ht.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Ht.util.createBuffer(t)),e=e||128;var r=t,i=t.length(),n=e,s=Math.ceil(n/8),a=255>>(n&7),o;for(o=i;o<128;o++)r.putByte(T0[r.at(o-1)+r.at(o-i)&255]);for(r.setAt(128-s,T0[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,T0[r.at(o+1)^r.at(o+s)]);return r};var Ap=function(t,e,r){var i=!1,n=null,s=null,a=null,o,u,c,f,h=[];for(t=Ht.rc2.expandKey(t,e),c=0;c<64;c++)h.push(t.getInt16Le());r?(o=function(y){for(c=0;c<4;c++)y[c]+=h[f]+(y[(c+3)%4]&y[(c+2)%4])+(~y[(c+3)%4]&y[(c+1)%4]),y[c]=k4(y[c],Ip[c]),f++},u=function(y){for(c=0;c<4;c++)y[c]+=h[y[(c+3)%4]&63]}):(o=function(y){for(c=3;c>=0;c--)y[c]=q4(y[c],Ip[c]),y[c]-=h[f]+(y[(c+3)%4]&y[(c+2)%4])+(~y[(c+3)%4]&y[(c+1)%4]),f--},u=function(y){for(c=3;c>=0;c--)y[c]-=h[y[(c+3)%4]&63]});var p=function(y){var S=[];for(c=0;c<4;c++){var B=n.getInt16Le();a!==null&&(r?B^=a.getInt16Le():a.putInt16Le(B)),S.push(B&65535)}f=r?0:63;for(var I=0;I<y.length;I++)for(var M=0;M<y[I][0];M++)y[I][1](S);for(c=0;c<4;c++)a!==null&&(r?a.putInt16Le(S[c]):S[c]^=a.getInt16Le()),s.putInt16Le(S[c])},g=null;return g={start:function(y,S){y&&typeof y=="string"&&(y=Ht.util.createBuffer(y)),i=!1,n=Ht.util.createBuffer(),s=S||new Ht.util.createBuffer,a=y,g.output=s},update:function(y){for(i||n.putBuffer(y);n.length()>=8;)p([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(y){var S=!0;if(r)if(y)S=y(8,n,!r);else{var B=n.length()===8?8:8-n.length();n.fillWithByte(B,B)}if(S&&(i=!0,g.update()),!r&&(S=n.length()===0,S))if(y)S=y(8,s,!r);else{var I=s.length(),M=s.at(I-1);M>I?S=!1:s.truncate(M)}return S}},g};Ht.rc2.startEncrypting=function(t,e,r){var i=Ht.rc2.createEncryptionCipher(t,128);return i.start(e,r),i};Ht.rc2.createEncryptionCipher=function(t,e){return Ap(t,e,!0)};Ht.rc2.startDecrypting=function(t,e,r){var i=Ht.rc2.createDecryptionCipher(t,128);return i.start(e,r),i};Ht.rc2.createDecryptionCipher=function(t,e){return Ap(t,e,!1)}});var zs=T((aS,Lp)=>{var M0=xe();Lp.exports=M0.jsbn=M0.jsbn||{};var ai,K4=244837814094590,Rp=(K4&16777215)==15715070;function K(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}M0.jsbn.BigInteger=K;function ve(){return new K(null)}function F4(t,e,r,i,n,s){for(;--s>=0;){var a=e*this.data[t++]+r.data[i]+n;n=Math.floor(a/67108864),r.data[i++]=a&67108863}return n}function U4(t,e,r,i,n,s){for(var a=e&32767,o=e>>15;--s>=0;){var u=this.data[t]&32767,c=this.data[t++]>>15,f=o*u+c*a;u=a*u+((f&32767)<<15)+r.data[i]+(n&1073741823),n=(u>>>30)+(f>>>15)+o*c+(n>>>30),r.data[i++]=u&1073741823}return n}function Tp(t,e,r,i,n,s){for(var a=e&16383,o=e>>14;--s>=0;){var u=this.data[t]&16383,c=this.data[t++]>>14,f=o*u+c*a;u=a*u+((f&16383)<<14)+r.data[i]+n,n=(u>>28)+(f>>14)+o*c,r.data[i++]=u&268435455}return n}typeof navigator=="undefined"?(K.prototype.am=Tp,ai=28):Rp&&navigator.appName=="Microsoft Internet Explorer"?(K.prototype.am=U4,ai=30):Rp&&navigator.appName!="Netscape"?(K.prototype.am=F4,ai=26):(K.prototype.am=Tp,ai=28);K.prototype.DB=ai;K.prototype.DM=(1<<ai)-1;K.prototype.DV=1<<ai;var P0=52;K.prototype.FV=Math.pow(2,P0);K.prototype.F1=P0-ai;K.prototype.F2=2*ai-P0;var G4="0123456789abcdefghijklmnopqrstuvwxyz",io=new Array,Jn,ir;Jn="0".charCodeAt(0);for(ir=0;ir<=9;++ir)io[Jn++]=ir;Jn="a".charCodeAt(0);for(ir=10;ir<36;++ir)io[Jn++]=ir;Jn="A".charCodeAt(0);for(ir=10;ir<36;++ir)io[Jn++]=ir;function Mp(t){return G4.charAt(t)}function Pp(t,e){var r=io[t.charCodeAt(e)];return r??-1}function z4(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function V4(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Ti(t){var e=ve();return e.fromInt(t),e}function j4(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var a=r==8?t[i]&255:Pp(t,i);if(a<0){t.charAt(i)=="-"&&(n=!0);continue}n=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&K.ZERO.subTo(this,this)}function H4(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function W4(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=!1,s="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(i=this.data[a]>>o)>0&&(n=!0,s=Mp(i));a>=0;)o<e?(i=(this.data[a]&(1<<o)-1)<<e-o,i|=this.data[--a]>>(o+=this.DB-e)):(i=this.data[a]>>(o-=e)&r,o<=0&&(o+=this.DB,--a)),i>0&&(n=!0),n&&(s+=Mp(i));return n?s:"0"}function Y4(){var t=ve();return K.ZERO.subTo(this,t),t}function J4(){return this.s<0?this.negate():this}function $4(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function no(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function X4(){return this.t<=0?0:this.DB*(this.t-1)+no(this.data[this.t-1]^this.s&this.DM)}function Z4(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Q4(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function e6(t,e){var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)e.data[o+s+1]=this.data[o]>>i|a,a=(this.data[o]&n)<<r;for(o=s-1;o>=0;--o)e.data[o]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function t6(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&s)<<n,e.data[a-r]=this.data[a]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}function r6(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function i6(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&K.ZERO.subTo(e,e)}function n6(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function s6(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=ve());var s=ve(),a=this.s,o=t.s,u=this.DB-no(i.data[i.t-1]);u>0?(i.lShiftTo(u,s),n.lShiftTo(u,r)):(i.copyTo(s),n.copyTo(r));var c=s.t,f=s.data[c-1];if(f!=0){var h=f*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),p=this.FV/h,g=(1<<this.F1)/h,y=1<<this.F2,S=r.t,B=S-c,I=e??ve();for(s.dlShiftTo(B,I),r.compareTo(I)>=0&&(r.data[r.t++]=1,r.subTo(I,r)),K.ONE.dlShiftTo(c,I),I.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--B>=0;){var M=r.data[--S]==f?this.DM:Math.floor(r.data[S]*p+(r.data[S-1]+y)*g);if((r.data[S]+=s.am(0,M,r,B,0,c))<M)for(s.dlShiftTo(B,I),r.subTo(I,r);r.data[S]<--M;)r.subTo(I,r)}e!=null&&(r.drShiftTo(c,e),a!=o&&K.ZERO.subTo(e,e)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),a<0&&K.ZERO.subTo(r,r)}}}function a6(t){var e=ve();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(K.ZERO)>0&&t.subTo(e,e),e}function sn(t){this.m=t}function o6(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function f6(t){return t}function c6(t){t.divRemTo(this.m,null,t)}function u6(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function h6(t,e){t.squareTo(e),this.reduce(e)}sn.prototype.convert=o6;sn.prototype.revert=f6;sn.prototype.reduce=c6;sn.prototype.mulTo=u6;sn.prototype.sqrTo=h6;function l6(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function an(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function d6(t){var e=ve();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(K.ZERO)>0&&this.m.subTo(e,e),e}function p6(t){var e=ve();return t.copyTo(e),this.reduce(e),e}function b6(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function y6(t,e){t.squareTo(e),this.reduce(e)}function g6(t,e,r){t.multiplyTo(e,r),this.reduce(r)}an.prototype.convert=d6;an.prototype.revert=p6;an.prototype.reduce=b6;an.prototype.mulTo=g6;an.prototype.sqrTo=y6;function v6(){return(this.t>0?this.data[0]&1:this.s)==0}function m6(t,e){if(t>4294967295||t<1)return K.ONE;var r=ve(),i=ve(),n=e.convert(this),s=no(t)-1;for(n.copyTo(r);--s>=0;)if(e.sqrTo(r,i),(t&1<<s)>0)e.mulTo(i,n,r);else{var a=r;r=i,i=a}return e.revert(r)}function x6(t,e){var r;return t<256||e.isEven()?r=new sn(e):r=new an(e),this.exp(t,r)}K.prototype.copyTo=z4;K.prototype.fromInt=V4;K.prototype.fromString=j4;K.prototype.clamp=H4;K.prototype.dlShiftTo=Z4;K.prototype.drShiftTo=Q4;K.prototype.lShiftTo=e6;K.prototype.rShiftTo=t6;K.prototype.subTo=r6;K.prototype.multiplyTo=i6;K.prototype.squareTo=n6;K.prototype.divRemTo=s6;K.prototype.invDigit=l6;K.prototype.isEven=v6;K.prototype.exp=m6;K.prototype.toString=W4;K.prototype.negate=Y4;K.prototype.abs=J4;K.prototype.compareTo=$4;K.prototype.bitLength=X4;K.prototype.mod=a6;K.prototype.modPowInt=x6;K.ZERO=Ti(0);K.ONE=Ti(1);function w6(){var t=ve();return this.copyTo(t),t}function _6(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function S6(){return this.t==0?this.s:this.data[0]<<24>>24}function E6(){return this.t==0?this.s:this.data[0]<<16>>16}function I6(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function A6(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function C6(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=Ti(r),n=ve(),s=ve(),a="";for(this.divRemTo(i,n,s);n.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,n.divRemTo(i,n,s);return s.intValue().toString(t)+a}function B6(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,a=0,o=0;o<t.length;++o){var u=Pp(t,o);if(u<0){t.charAt(o)=="-"&&this.signum()==0&&(n=!0);continue}a=e*a+u,++s>=r&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),n&&K.ZERO.subTo(this,this)}function R6(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(K.ONE.shiftLeft(t-1),D0,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(K.ONE.shiftLeft(t-1),this);else{var i=new Array,n=t&7;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function T6(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function M6(t){return this.compareTo(t)==0}function P6(t){return this.compareTo(t)<0?this:t}function D6(t){return this.compareTo(t)>0?this:t}function O6(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;i<s;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function N6(t,e){return t&e}function L6(t){var e=ve();return this.bitwiseTo(t,N6,e),e}function D0(t,e){return t|e}function k6(t){var e=ve();return this.bitwiseTo(t,D0,e),e}function Dp(t,e){return t^e}function q6(t){var e=ve();return this.bitwiseTo(t,Dp,e),e}function Op(t,e){return t&~e}function K6(t){var e=ve();return this.bitwiseTo(t,Op,e),e}function F6(){for(var t=ve(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function U6(t){var e=ve();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function G6(t){var e=ve();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function z6(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function V6(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+z6(this.data[t]);return this.s<0?this.t*this.DB:-1}function j6(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function H6(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=j6(this.data[r]^e);return t}function W6(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function Y6(t,e){var r=K.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function J6(t){return this.changeBit(t,D0)}function $6(t){return this.changeBit(t,Op)}function X6(t){return this.changeBit(t,Dp)}function Z6(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function Q6(t){var e=ve();return this.addTo(t,e),e}function e8(t){var e=ve();return this.subTo(t,e),e}function t8(t){var e=ve();return this.multiplyTo(t,e),e}function r8(t){var e=ve();return this.divRemTo(t,e,null),e}function i8(t){var e=ve();return this.divRemTo(t,null,e),e}function n8(t){var e=ve(),r=ve();return this.divRemTo(t,e,r),new Array(e,r)}function s8(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function a8(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Gs(){}function Np(t){return t}function o8(t,e,r){t.multiplyTo(e,r)}function f8(t,e){t.squareTo(e)}Gs.prototype.convert=Np;Gs.prototype.revert=Np;Gs.prototype.mulTo=o8;Gs.prototype.sqrTo=f8;function c8(t){return this.exp(t,new Gs)}function u8(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function h8(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function $n(t){this.r2=ve(),this.q3=ve(),K.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function l8(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=ve();return t.copyTo(e),this.reduce(e),e}function d8(t){return t}function p8(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function b8(t,e){t.squareTo(e),this.reduce(e)}function y8(t,e,r){t.multiplyTo(e,r),this.reduce(r)}$n.prototype.convert=l8;$n.prototype.revert=d8;$n.prototype.reduce=p8;$n.prototype.mulTo=y8;$n.prototype.sqrTo=b8;function g8(t,e){var r=t.bitLength(),i,n=Ti(1),s;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?s=new sn(e):e.isEven()?s=new $n(e):s=new an(e);var a=new Array,o=3,u=i-1,c=(1<<i)-1;if(a[1]=s.convert(this),i>1){var f=ve();for(s.sqrTo(a[1],f);o<=c;)a[o]=ve(),s.mulTo(f,a[o-2],a[o]),o+=2}var h=t.t-1,p,g=!0,y=ve(),S;for(r=no(t.data[h])-1;h>=0;){for(r>=u?p=t.data[h]>>r-u&c:(p=(t.data[h]&(1<<r+1)-1)<<u-r,h>0&&(p|=t.data[h-1]>>this.DB+r-u)),o=i;(p&1)==0;)p>>=1,--o;if((r-=o)<0&&(r+=this.DB,--h),g)a[p].copyTo(n),g=!1;else{for(;o>1;)s.sqrTo(n,y),s.sqrTo(y,n),o-=2;o>0?s.sqrTo(n,y):(S=n,n=y,y=S),s.mulTo(y,a[p],n)}for(;h>=0&&(t.data[h]&1<<r)==0;)s.sqrTo(n,y),S=n,n=y,y=S,--r<0&&(r=this.DB-1,--h)}return s.revert(n)}function v8(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function m8(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function x8(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return K.ZERO;for(var r=t.clone(),i=this.clone(),n=Ti(1),s=Ti(0),a=Ti(0),o=Ti(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!n.isEven()||!s.isEven())&&(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(a,n),s.subTo(o,s)):(i.subTo(r,i),e&&a.subTo(n,a),o.subTo(s,o))}if(i.compareTo(K.ONE)!=0)return K.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var gr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],w8=(1<<26)/gr[gr.length-1];function _8(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=gr[gr.length-1]){for(e=0;e<gr.length;++e)if(r.data[0]==gr[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<gr.length;){for(var i=gr[e],n=e+1;n<gr.length&&i<w8;)i*=gr[n++];for(i=r.modInt(i);e<n;)if(i%gr[e++]==0)return!1}return r.millerRabin(t)}function S8(t){var e=this.subtract(K.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i=e.shiftRight(r),n=E8(),s,a=0;a<t;++a){do s=new K(this.bitLength(),n);while(s.compareTo(K.ONE)<=0||s.compareTo(e)>=0);var o=s.modPow(i,this);if(o.compareTo(K.ONE)!=0&&o.compareTo(e)!=0){for(var u=1;u++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(K.ONE)==0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}function E8(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}K.prototype.chunkSize=I6;K.prototype.toRadix=C6;K.prototype.fromRadix=B6;K.prototype.fromNumber=R6;K.prototype.bitwiseTo=O6;K.prototype.changeBit=Y6;K.prototype.addTo=Z6;K.prototype.dMultiply=s8;K.prototype.dAddOffset=a8;K.prototype.multiplyLowerTo=u8;K.prototype.multiplyUpperTo=h8;K.prototype.modInt=m8;K.prototype.millerRabin=S8;K.prototype.clone=w6;K.prototype.intValue=_6;K.prototype.byteValue=S6;K.prototype.shortValue=E6;K.prototype.signum=A6;K.prototype.toByteArray=T6;K.prototype.equals=M6;K.prototype.min=P6;K.prototype.max=D6;K.prototype.and=L6;K.prototype.or=k6;K.prototype.xor=q6;K.prototype.andNot=K6;K.prototype.not=F6;K.prototype.shiftLeft=U6;K.prototype.shiftRight=G6;K.prototype.getLowestSetBit=V6;K.prototype.bitCount=H6;K.prototype.testBit=W6;K.prototype.setBit=J6;K.prototype.clearBit=$6;K.prototype.flipBit=X6;K.prototype.add=Q6;K.prototype.subtract=e8;K.prototype.multiply=t8;K.prototype.divide=r8;K.prototype.remainder=i8;K.prototype.divideAndRemainder=n8;K.prototype.modPow=g8;K.prototype.modInverse=x8;K.prototype.pow=c8;K.prototype.gcd=v8;K.prototype.isProbablePrime=_8});var Up=T((oS,Fp)=>{var kr=xe();nn();Ue();var kp=Fp.exports=kr.sha1=kr.sha1||{};kr.md.sha1=kr.md.algorithms.sha1=kp;kp.create=function(){qp||I8();var t=null,e=kr.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=kr.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=kr.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),Kp(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=kr.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(O0.substr(0,i.blockLength-a));for(var o,u,c=i.fullMessageLength[0]*8,f=0;f<i.fullMessageLength.length-1;++f)o=i.fullMessageLength[f+1]*8,u=o/4294967296>>>0,c+=u,n.putInt32(c>>>0),c=o>>>0;n.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Kp(h,r,n);var p=kr.util.createBuffer();return p.putInt32(h.h0),p.putInt32(h.h1),p.putInt32(h.h2),p.putInt32(h.h3),p.putInt32(h.h4),p},i};var O0=null,qp=!1;function I8(){O0=String.fromCharCode(128),O0+=kr.util.fillString(String.fromCharCode(0),64),qp=!0}function Kp(t,e,r){for(var i,n,s,a,o,u,c,f,h=r.length();h>=64;){for(n=t.h0,s=t.h1,a=t.h2,o=t.h3,u=t.h4,f=0;f<16;++f)i=r.getInt32(),e[f]=i,c=o^s&(a^o),i=(n<<5|n>>>27)+c+u+1518500249+i,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<20;++f)i=e[f-3]^e[f-8]^e[f-14]^e[f-16],i=i<<1|i>>>31,e[f]=i,c=o^s&(a^o),i=(n<<5|n>>>27)+c+u+1518500249+i,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<32;++f)i=e[f-3]^e[f-8]^e[f-14]^e[f-16],i=i<<1|i>>>31,e[f]=i,c=s^a^o,i=(n<<5|n>>>27)+c+u+1859775393+i,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<40;++f)i=e[f-6]^e[f-16]^e[f-28]^e[f-32],i=i<<2|i>>>30,e[f]=i,c=s^a^o,i=(n<<5|n>>>27)+c+u+1859775393+i,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<60;++f)i=e[f-6]^e[f-16]^e[f-28]^e[f-32],i=i<<2|i>>>30,e[f]=i,c=s&a|o&(s^a),i=(n<<5|n>>>27)+c+u+2400959708+i,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<80;++f)i=e[f-6]^e[f-16]^e[f-28]^e[f-32],i=i<<2|i>>>30,e[f]=i,c=s^a^o,i=(n<<5|n>>>27)+c+u+3395469782+i,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+s|0,t.h2=t.h2+a|0,t.h3=t.h3+o|0,t.h4=t.h4+u|0,h-=64}}});var Vp=T((fS,zp)=>{var qr=xe();Ue();Yn();Up();var Gp=zp.exports=qr.pkcs1=qr.pkcs1||{};Gp.encode_rsa_oaep=function(t,e,r){var i,n,s,a;typeof r=="string"?(i=r,n=arguments[3]||void 0,s=arguments[4]||void 0):r&&(i=r.label||void 0,n=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=qr.md.sha1.create(),a||(a=s);var o=Math.ceil(t.n.bitLength()/8),u=o-2*s.digestLength-2;if(e.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=e.length,c.maxLength=u,c}i||(i=""),s.update(i,"raw");for(var f=s.digest(),h="",p=u-e.length,g=0;g<p;g++)h+="\0";var y=f.getBytes()+h+""+e;if(!n)n=qr.random.getBytes(s.digestLength);else if(n.length!==s.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=n.length,c.digestLength=s.digestLength,c}var S=so(n,o-s.digestLength-1,a),B=qr.util.xorBytes(y,S,y.length),I=so(B,s.digestLength,a),M=qr.util.xorBytes(n,I,n.length);return"\0"+M+B};Gp.decode_rsa_oaep=function(t,e,r){var i,n,s;typeof r=="string"?(i=r,n=arguments[3]||void 0):r&&(i=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var B=new Error("RSAES-OAEP encoded message length is invalid.");throw B.length=e.length,B.expectedLength=a,B}if(n===void 0?n=qr.md.sha1.create():n.start(),s||(s=n),a<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),n.update(i,"raw");for(var o=n.digest().getBytes(),u=e.charAt(0),c=e.substring(1,n.digestLength+1),f=e.substring(1+n.digestLength),h=so(f,n.digestLength,s),p=qr.util.xorBytes(c,h,c.length),g=so(p,a-n.digestLength-1,s),y=qr.util.xorBytes(f,g,f.length),S=y.substring(0,n.digestLength),B=u!=="\0",I=0;I<n.digestLength;++I)B|=o.charAt(I)!==S.charAt(I);for(var M=1,D=n.digestLength,q=n.digestLength;q<y.length;q++){var k=y.charCodeAt(q),O=k&1^1,V=M?65534:0;B|=k&V,M=M&O,D+=M}if(B||y.charCodeAt(D)!==1)throw new Error("Invalid RSAES-OAEP padding.");return y.substring(D+1)};function so(t,e,r){r||(r=qr.md.sha1.create());for(var i="",n=Math.ceil(e/r.digestLength),s=0;s<n;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}});var jp=T((cS,N0)=>{var Mi=xe();Ue();zs();Yn();(function(){if(Mi.prime){N0.exports=Mi.prime;return}var t=N0.exports=Mi.prime=Mi.prime||{},e=Mi.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new e(null);i.fromInt(30);var n=function(h,p){return h|p};t.generateProbablePrime=function(h,p,g){typeof p=="function"&&(g=p,p={}),p=p||{};var y=p.algorithm||"PRIMEINC";typeof y=="string"&&(y={name:y}),y.options=y.options||{};var S=p.prng||Mi.random,B={nextBytes:function(I){for(var M=S.getBytesSync(I.length),D=0;D<I.length;++D)I[D]=M.charCodeAt(D)}};if(y.name==="PRIMEINC")return s(h,B,y.options,g);throw new Error("Invalid prime generation algorithm: "+y.name)};function s(h,p,g,y){return"workers"in g?u(h,p,g,y):a(h,p,g,y)}function a(h,p,g,y){var S=c(h,p),B=0,I=f(S.bitLength());"millerRabinTests"in g&&(I=g.millerRabinTests);var M=10;"maxBlockTime"in g&&(M=g.maxBlockTime),o(S,h,p,B,I,M,y)}function o(h,p,g,y,S,B,I){var M=+new Date;do{if(h.bitLength()>p&&(h=c(p,g)),h.isProbablePrime(S))return I(null,h);h.dAddOffset(r[y++%8],0)}while(B<0||+new Date-M<B);Mi.util.setImmediate(function(){o(h,p,g,y,S,B,I)})}function u(h,p,g,y){if(typeof Worker=="undefined")return a(h,p,g,y);var S=c(h,p),B=g.workers,I=g.workLoad||100,M=I*30/8,D=g.workerScript||"forge/prime.worker.js";if(B===-1)return Mi.util.estimateCores(function(k,O){k&&(O=2),B=O-1,q()});q();function q(){B=Math.max(1,B);for(var k=[],O=0;O<B;++O)k[O]=new Worker(D);for(var V=B,O=0;O<B;++O)k[O].addEventListener("message",X);var U=!1;function X(E){if(!U){--V;var l=E.data;if(l.found){for(var b=0;b<k.length;++b)k[b].terminate();return U=!0,y(null,new e(l.prime,16))}S.bitLength()>h&&(S=c(h,p));var v=S.toString(16);E.target.postMessage({hex:v,workLoad:I}),S.dAddOffset(M,0)}}}}function c(h,p){var g=new e(h,p),y=h-1;return g.testBit(y)||g.bitwiseTo(e.ONE.shiftLeft(y),n,g),g.dAddOffset(31-g.mod(i).byteValue(),0),g}function f(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var oo=T((uS,Zp)=>{var re=xe();jn();zs();Wa();Vp();jp();Yn();Ue();typeof be=="undefined"&&(be=re.jsbn.BigInteger);var be,L0=re.util.isNodejs?Us():null,P=re.asn1,nr=re.util;re.pki=re.pki||{};Zp.exports=re.pki.rsa=re.rsa=re.rsa||{};var ie=re.pki,A8=[6,4,2,4,2,4,6,2],C8={name:"PrivateKeyInfo",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:P.Class.UNIVERSAL,type:P.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},B8={name:"RSAPrivateKey",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},R8={name:"RSAPublicKey",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},T8=re.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:P.Class.UNIVERSAL,type:P.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},M8=function(t){var e;if(t.algorithm in ie.oids)e=ie.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var i=P.oidToDer(e).getBytes(),n=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]),s=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);s.value.push(P.create(P.Class.UNIVERSAL,P.Type.OID,!1,i)),s.value.push(P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,""));var a=P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(s),n.value.push(a),P.toDer(n).getBytes()},Hp=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(be.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(be.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var i;do i=new be(re.util.bytesToHex(re.random.getBytes(e.n.bitLength()/8)),16);while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(be.ONE));t=t.multiply(i.modPow(e.e,e.n)).mod(e.n);for(var n=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);n.compareTo(s)<0;)n=n.add(e.p);var a=n.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return a=a.multiply(i.modInverse(e.n)).mod(e.n),a};ie.rsa.encrypt=function(t,e,r){var i=r,n,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=Wp(t,e,r)):(n=re.util.createBuffer(),n.putBytes(t));for(var a=new be(n.toHex(),16),o=Hp(a,e,i),u=o.toString(16),c=re.util.createBuffer(),f=s-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(re.util.hexToBytes(u)),c.getBytes()};ie.rsa.decrypt=function(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8);if(t.length!==n){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=n,s}var a=new be(re.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=Hp(a,e,r),u=o.toString(16),c=re.util.createBuffer(),f=n-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(re.util.hexToBytes(u)),i!==!1?ao(c.getBytes(),e,r):c.getBytes()};ie.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i=r.prng||re.random,n={nextBytes:function(o){for(var u=i.getBytesSync(o.length),c=0;c<o.length;++c)o[c]=u.charCodeAt(c)}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:t,rng:n,eInt:e||65537,e:new be(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};ie.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new be(null);r.fromInt(30);for(var i=0,n=function(h,p){return h|p},s=+new Date,a,o=0;t.keys===null&&(e<=0||o<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,c=u-1;t.pqState===0?(t.num=new be(u,t.rng),t.num.testBit(c)||t.num.bitwiseTo(be.ONE.shiftLeft(c),n,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(D8(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(A8[i++%8],0):t.pqState===2?t.pqState=t.num.subtract(be.ONE).gcd(t.e).compareTo(be.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(be.ONE),t.q1=t.q.subtract(be.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(be.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:ie.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ie.rsa.setPublicKey(t.n,t.e)}}a=+new Date,o+=a-s,s=a}return t.keys!==null};ie.rsa.generateKeyPair=function(t,e,r,i){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(i=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(i=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!re.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(i){if(Yp("generateKeyPair"))return L0.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,u,c){if(o)return i(o);i(null,{privateKey:ie.privateKeyFromPem(c),publicKey:ie.publicKeyFromPem(u)})});if(Jp("generateKey")&&Jp("exportKey"))return nr.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Xp(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return nr.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){i(o)}).then(function(o){if(o){var u=ie.privateKeyFromAsn1(P.fromDer(re.util.createBuffer(o)));i(null,{privateKey:u,publicKey:ie.setRsaPublicKey(u.n,u.e)})}});if($p("generateKey")&&$p("exportKey")){var n=nr.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Xp(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);n.oncomplete=function(o){var u=o.target.result,c=nr.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(f){var h=f.target.result,p=ie.privateKeyFromAsn1(P.fromDer(re.util.createBuffer(h)));i(null,{privateKey:p,publicKey:ie.setRsaPublicKey(p.n,p.e)})},c.onerror=function(f){i(f)}},n.onerror=function(o){i(o)};return}}else if(Yp("generateKeyPairSync")){var s=L0.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ie.privateKeyFromPem(s.privateKey),publicKey:ie.publicKeyFromPem(s.publicKey)}}}var a=ie.rsa.createKeyPairGenerationState(t,e,r);if(!i)return ie.rsa.stepKeyPairGenerationState(a,0),a.keys;P8(a,r,i)};ie.setRsaPublicKey=ie.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(i,n,s){if(typeof n=="string"?n=n.toUpperCase():n===void 0&&(n="RSAES-PKCS1-V1_5"),n==="RSAES-PKCS1-V1_5")n={encode:function(o,u,c){return Wp(o,u,2).getBytes()}};else if(n==="RSA-OAEP"||n==="RSAES-OAEP")n={encode:function(o,u){return re.pkcs1.encode_rsa_oaep(u,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(o){return o}};else if(typeof n=="string")throw new Error('Unsupported encryption scheme: "'+n+'".');var a=n.encode(i,r,!0);return ie.rsa.encrypt(a,r,!0)},r.verify=function(i,n,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(o,u){u=ao(u,r,!0);var c=P.fromDer(u);return o===c.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(o,u){return u=ao(u,r,!0),o===u}});var a=ie.rsa.decrypt(n,r,!0,!1);return s.verify(i,a,r.n.bitLength())},r};ie.setRsaPrivateKey=ie.rsa.setPrivateKey=function(t,e,r,i,n,s,a,o){var u={n:t,e,d:r,p:i,q:n,dP:s,dQ:a,qInv:o};return u.decrypt=function(c,f,h){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var p=ie.rsa.decrypt(c,u,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:ao};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(g,y){return re.pkcs1.decode_rsa_oaep(y,g,h)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(g){return g}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(p,u,!1)},u.sign=function(c,f){var h=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:M8},h=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return c}},h=1);var p=f.encode(c,u.n.bitLength());return ie.rsa.encrypt(p,u,h)},u};ie.wrapRsaPrivateKey=function(t){return P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(0).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(ie.oids.rsaEncryption).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,"")]),P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,P.toDer(t).getBytes())])};ie.privateKeyFromAsn1=function(t){var e={},r=[];if(P.validate(t,C8,e,r)&&(t=P.fromDer(re.util.createBuffer(e.privateKey))),e={},r=[],!P.validate(t,B8,e,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var n,s,a,o,u,c,f,h;return n=re.util.createBuffer(e.privateKeyModulus).toHex(),s=re.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=re.util.createBuffer(e.privateKeyPrivateExponent).toHex(),o=re.util.createBuffer(e.privateKeyPrime1).toHex(),u=re.util.createBuffer(e.privateKeyPrime2).toHex(),c=re.util.createBuffer(e.privateKeyExponent1).toHex(),f=re.util.createBuffer(e.privateKeyExponent2).toHex(),h=re.util.createBuffer(e.privateKeyCoefficient).toHex(),ie.setRsaPrivateKey(new be(n,16),new be(s,16),new be(a,16),new be(o,16),new be(u,16),new be(c,16),new be(f,16),new be(h,16))};ie.privateKeyToAsn1=ie.privateKeyToRSAPrivateKey=function(t){return P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(0).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.n)),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.e)),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.d)),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.p)),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.q)),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.dP)),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.dQ)),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.qInv))])};ie.publicKeyFromAsn1=function(t){var e={},r=[];if(P.validate(t,T8,e,r)){var i=P.derToOid(e.publicKeyOid);if(i!==ie.oids.rsaEncryption){var n=new Error("Cannot read public key. Unknown OID.");throw n.oid=i,n}t=e.rsaPublicKey}if(r=[],!P.validate(t,R8,e,r)){var n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw n.errors=r,n}var s=re.util.createBuffer(e.publicKeyModulus).toHex(),a=re.util.createBuffer(e.publicKeyExponent).toHex();return ie.setRsaPublicKey(new be(s,16),new be(a,16))};ie.publicKeyToAsn1=ie.publicKeyToSubjectPublicKeyInfo=function(t){return P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(ie.oids.rsaEncryption).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,"")]),P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,[ie.publicKeyToRSAPublicKey(t)])])};ie.publicKeyToRSAPublicKey=function(t){return P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.n)),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,Kr(t.e))])};function Wp(t,e,r){var i=re.util.createBuffer(),n=Math.ceil(e.n.bitLength()/8);if(t.length>n-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=n-11,s}i.putByte(0),i.putByte(r);var a=n-3-t.length,o;if(r===0||r===1){o=r===0?0:255;for(var u=0;u<a;++u)i.putByte(o)}else for(;a>0;){for(var c=0,f=re.random.getBytes(a),u=0;u<a;++u)o=f.charCodeAt(u),o===0?++c:i.putByte(o);a=c}return i.putByte(0),i.putBytes(t),i}function ao(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8),s=re.util.createBuffer(t),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(o===0){u=n-3-i;for(var c=0;c<u;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(u=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++u}else if(o===2)for(u=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++u}var f=s.getByte();if(f!==0||u!==n-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function P8(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var i={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(i.prng=e.prng),n();function n(){s(t.pBits,function(o,u){if(o)return r(o);if(t.p=u,t.q!==null)return a(o,t.q);s(t.qBits,a)})}function s(o,u){re.prime.generateProbablePrime(o,i,u)}function a(o,u){if(o)return r(o);if(t.q=u,t.p.compareTo(t.q)<0){var c=t.p;t.p=t.q,t.q=c}if(t.p.subtract(be.ONE).gcd(t.e).compareTo(be.ONE)!==0){t.p=null,n();return}if(t.q.subtract(be.ONE).gcd(t.e).compareTo(be.ONE)!==0){t.q=null,s(t.qBits,a);return}if(t.p1=t.p.subtract(be.ONE),t.q1=t.q.subtract(be.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(be.ONE)!==0){t.p=t.q=null,n();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,a);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:ie.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ie.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Kr(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=re.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function D8(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function Yp(t){return re.util.isNodejs&&typeof L0[t]=="function"}function Jp(t){return typeof nr.globalScope!="undefined"&&typeof nr.globalScope.crypto=="object"&&typeof nr.globalScope.crypto.subtle=="object"&&typeof nr.globalScope.crypto.subtle[t]=="function"}function $p(t){return typeof nr.globalScope!="undefined"&&typeof nr.globalScope.msCrypto=="object"&&typeof nr.globalScope.msCrypto.subtle=="object"&&typeof nr.globalScope.msCrypto.subtle[t]=="function"}function Xp(t){for(var e=re.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}});var n1=T((hS,i1)=>{var Y=xe();C0();jn();fp();nn();Wa();dp();yp();Yn();Bp();oo();Ue();typeof Qp=="undefined"&&(Qp=Y.jsbn.BigInteger);var Qp,L=Y.asn1,se=Y.pki=Y.pki||{};i1.exports=se.pbe=Y.pbe=Y.pbe||{};var on=se.oids,O8={name:"EncryptedPrivateKeyInfo",tagClass:L.Class.UNIVERSAL,type:L.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:L.Class.UNIVERSAL,type:L.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:L.Class.UNIVERSAL,type:L.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:L.Class.UNIVERSAL,type:L.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:L.Class.UNIVERSAL,type:L.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},N8={name:"PBES2Algorithms",tagClass:L.Class.UNIVERSAL,type:L.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:L.Class.UNIVERSAL,type:L.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:L.Class.UNIVERSAL,type:L.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:L.Class.UNIVERSAL,type:L.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:L.Class.UNIVERSAL,type:L.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:L.Class.UNIVERSAL,type:L.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:L.Class.UNIVERSAL,type:L.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:L.Class.UNIVERSAL,type:L.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:L.Class.UNIVERSAL,type:L.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:L.Class.UNIVERSAL,type:L.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:L.Class.UNIVERSAL,type:L.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:L.Class.UNIVERSAL,type:L.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},L8={name:"pkcs-12PbeParams",tagClass:L.Class.UNIVERSAL,type:L.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:L.Class.UNIVERSAL,type:L.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:L.Class.UNIVERSAL,type:L.Type.INTEGER,constructed:!1,capture:"iterations"}]};se.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i=Y.random.getBytesSync(r.saltSize),n=r.count,s=L.integerToDer(n),a,o,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,f,h;switch(r.algorithm){case"aes128":a=16,c=16,f=on["aes128-CBC"],h=Y.aes.createEncryptionCipher;break;case"aes192":a=24,c=16,f=on["aes192-CBC"],h=Y.aes.createEncryptionCipher;break;case"aes256":a=32,c=16,f=on["aes256-CBC"],h=Y.aes.createEncryptionCipher;break;case"des":a=8,c=8,f=on.desCBC,h=Y.des.createEncryptionCipher;break;default:var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),y=r1(g),S=Y.pkcs5.pbkdf2(e,i,n,a,y),B=Y.random.getBytesSync(c),I=h(S);I.start(B),I.update(L.toDer(t)),I.finish(),u=I.output.getBytes();var M=k8(i,s,a,g);o=L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(on.pkcs5PBES2).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(on.pkcs5PBKDF2).getBytes()),M]),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(f).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,B)])])])}else if(r.algorithm==="3des"){a=24;var D=new Y.util.ByteBuffer(i),S=se.pbe.generatePkcs12Key(e,D,1,n,a),B=se.pbe.generatePkcs12Key(e,D,2,n,a),I=Y.des.createEncryptionCipher(S);I.start(B),I.update(L.toDer(t)),I.finish(),u=I.output.getBytes(),o=L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(on["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,i),L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,s.getBytes())])])}else{var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var q=L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[o,L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,u)]);return q};se.decryptPrivateKeyInfo=function(t,e){var r=null,i={},n=[];if(!L.validate(t,O8,i,n)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=L.derToOid(i.encryptionOid),o=se.pbe.getCipher(a,i.encryptionParams,e),u=Y.util.createBuffer(i.encryptedData);return o.update(u),o.finish()&&(r=L.fromDer(o.output)),r};se.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:L.toDer(t).getBytes()};return Y.pem.encode(r,{maxline:e})};se.encryptedPrivateKeyFromPem=function(t){var e=Y.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return L.fromDer(e.body)};se.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=se.wrapRsaPrivateKey(se.privateKeyToAsn1(t));return i=se.encryptPrivateKeyInfo(i,e,r),se.encryptedPrivateKeyToPem(i)}var n,s,a,o;switch(r.algorithm){case"aes128":n="AES-128-CBC",a=16,s=Y.random.getBytesSync(16),o=Y.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",a=24,s=Y.random.getBytesSync(16),o=Y.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",a=32,s=Y.random.getBytesSync(16),o=Y.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",a=24,s=Y.random.getBytesSync(8),o=Y.des.createEncryptionCipher;break;case"des":n="DES-CBC",a=8,s=Y.random.getBytesSync(8),o=Y.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=Y.pbe.opensslDeriveBytes(e,s.substr(0,8),a),f=o(c);f.start(s),f.update(L.toDer(se.privateKeyToAsn1(t))),f.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:Y.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return Y.pem.encode(h)};se.decryptRsaPrivateKey=function(t,e){var r=null,i=Y.pem.decode(t)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(i.procType&&i.procType.type==="ENCRYPTED"){var s,a;switch(i.dekInfo.algorithm){case"DES-CBC":s=8,a=Y.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=Y.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=Y.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=Y.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=Y.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(h){return Y.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":s=8,a=function(h){return Y.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":s=16,a=function(h){return Y.rc2.createDecryptionCipher(h,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw n.algorithm=i.dekInfo.algorithm,n}var o=Y.util.hexToBytes(i.dekInfo.parameters),u=Y.pbe.opensslDeriveBytes(e,o.substr(0,8),s),c=a(u);if(c.start(o),c.update(Y.util.createBuffer(i.body)),c.finish())r=c.output.getBytes();else return r}else r=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?r=se.decryptPrivateKeyInfo(L.fromDer(r),e):r=L.fromDer(r),r!==null&&(r=se.privateKeyFromAsn1(r)),r};se.pbe.generatePkcs12Key=function(t,e,r,i,n,s){var a,o;if(typeof s=="undefined"||s===null){if(!("sha1"in Y.md))throw new Error('"sha1" hash algorithm unavailable.');s=Y.md.sha1.create()}var u=s.digestLength,c=s.blockLength,f=new Y.util.ByteBuffer,h=new Y.util.ByteBuffer;if(t!=null){for(o=0;o<t.length;o++)h.putInt16(t.charCodeAt(o));h.putInt16(0)}var p=h.length(),g=e.length(),y=new Y.util.ByteBuffer;y.fillWithByte(r,c);var S=c*Math.ceil(g/c),B=new Y.util.ByteBuffer;for(o=0;o<S;o++)B.putByte(e.at(o%g));var I=c*Math.ceil(p/c),M=new Y.util.ByteBuffer;for(o=0;o<I;o++)M.putByte(h.at(o%p));var D=B;D.putBuffer(M);for(var q=Math.ceil(n/u),k=1;k<=q;k++){var O=new Y.util.ByteBuffer;O.putBytes(y.bytes()),O.putBytes(D.bytes());for(var V=0;V<i;V++)s.start(),s.update(O.getBytes()),O=s.digest();var U=new Y.util.ByteBuffer;for(o=0;o<c;o++)U.putByte(O.at(o%u));var X=Math.ceil(g/c)+Math.ceil(p/c),E=new Y.util.ByteBuffer;for(a=0;a<X;a++){var l=new Y.util.ByteBuffer(D.getBytes(c)),b=511;for(o=U.length()-1;o>=0;o--)b=b>>8,b+=U.at(o)+l.at(o),l.setAt(o,b&255);E.putBuffer(l)}D=E,f.putBuffer(O)}return f.truncate(f.length()-n),f};se.pbe.getCipher=function(t,e,r){switch(t){case se.oids.pkcs5PBES2:return se.pbe.getCipherForPBES2(t,e,r);case se.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case se.oids["pbewithSHAAnd40BitRC2-CBC"]:return se.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}};se.pbe.getCipherForPBES2=function(t,e,r){var i={},n=[];if(!L.validate(e,N8,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}if(t=L.derToOid(i.kdfOid),t!==se.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=L.derToOid(i.encOid),t!==se.oids["aes128-CBC"]&&t!==se.oids["aes192-CBC"]&&t!==se.oids["aes256-CBC"]&&t!==se.oids["des-EDE3-CBC"]&&t!==se.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=i.kdfSalt,o=Y.util.createBuffer(i.kdfIterationCount);o=o.getInt(o.length()<<3);var u,c;switch(se.oids[t]){case"aes128-CBC":u=16,c=Y.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=Y.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=Y.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=Y.des.createDecryptionCipher;break;case"desCBC":u=8,c=Y.des.createDecryptionCipher;break}var f=t1(i.prfOid),h=Y.pkcs5.pbkdf2(r,a,o,u,f),p=i.encIv,g=c(h);return g.start(p),g};se.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},n=[];if(!L.validate(e,L8,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=Y.util.createBuffer(i.salt),o=Y.util.createBuffer(i.iterations);o=o.getInt(o.length()<<3);var u,c,f;switch(t){case se.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=Y.des.startDecrypting;break;case se.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(S,B){var I=Y.rc2.createDecryptionCipher(S,40);return I.start(B,null),I};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var h=t1(i.prfOid),p=se.pbe.generatePkcs12Key(r,a,1,o,u,h);h.start();var g=se.pbe.generatePkcs12Key(r,a,2,o,c,h);return f(p,g)};se.pbe.opensslDeriveBytes=function(t,e,r,i){if(typeof i=="undefined"||i===null){if(!("md5"in Y.md))throw new Error('"md5" hash algorithm unavailable.');i=Y.md.md5.create()}e===null&&(e="");for(var n=[e1(i,t+e)],s=16,a=1;s<r;++a,s+=16)n.push(e1(i,n[a-1]+t+e));return n.join("").substr(0,r)};function e1(t,e){return t.start().update(e).digest().getBytes()}function t1(t){var e;if(!t)e="hmacWithSHA1";else if(e=se.oids[L.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return r1(e)}function r1(t){var e=Y.md;switch(t){case"hmacWithSHA224":e=Y.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function k8(t,e,r,i){var n=L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,t),L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,e.getBytes())]);return i!=="hmacWithSHA1"&&n.value.push(L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,Y.util.hexToBytes(r.toString(16))),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(se.oids[i]).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.NULL,!1,"")])),n}});var fn={};Dt(fn,{concat:()=>q8});function q8(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));let r=new Uint8Array(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}var cn=_e(()=>{});var Vs=T(s1=>{"use strict";s1.get=(t=self)=>{let e=t.crypto||t.msCrypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var k0=T((dS,o1)=>{"use strict";var{concat:K8}=(cn(),fn),{fromString:a1}=(br(),pr),F8=Vs();function U8({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:i="SHA-256",saltLength:n=16,iterations:s=32767}={}){let a=F8.get();r*=8;async function o(c,f){let h=a.getRandomValues(new Uint8Array(n)),p=a.getRandomValues(new Uint8Array(e)),g={name:t,iv:p},y={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},S=await a.subtle.importKey("raw",a1(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),B=await a.subtle.deriveKey(y,S,{name:t,length:r},!0,["encrypt"]),I=await a.subtle.encrypt(g,B,c);return K8([h,g.iv,new Uint8Array(I)])}async function u(c,f){let h=c.slice(0,n),p=c.slice(n,n+e),g=c.slice(n+e),y={name:t,iv:p},S={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},B=await a.subtle.importKey("raw",a1(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),I=await a.subtle.deriveKey(S,B,{name:t,length:r},!0,["decrypt"]),M=await a.subtle.decrypt(y,I,g);return new Uint8Array(M)}return{encrypt:o,decrypt:u}}o1.exports={create:U8}});var c1=T((pS,f1)=>{"use strict";var{base64:G8}=(Ts(),Un),z8=k0();f1.exports={import:async function(t,e){let r=G8.decode(t);return await z8.create().decrypt(r,e)}}});var un={};Dt(un,{equals:()=>V8});function V8(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var hn=_e(()=>{});var F0=T((bS,d1)=>{var De=xe();nn();Ue();var js=d1.exports=De.sha512=De.sha512||{};De.md.sha512=De.md.algorithms.sha512=js;var u1=De.sha384=De.sha512.sha384=De.sha512.sha384||{};u1.create=function(){return js.create("SHA-384")};De.md.sha384=De.md.algorithms.sha384=u1;De.sha512.sha256=De.sha512.sha256||{create:function(){return js.create("SHA-512/256")}};De.md["sha512/256"]=De.md.algorithms["sha512/256"]=De.sha512.sha256;De.sha512.sha224=De.sha512.sha224||{create:function(){return js.create("SHA-512/224")}};De.md["sha512/224"]=De.md.algorithms["sha512/224"]=De.sha512.sha224;js.create=function(t){if(h1||j8(),typeof t=="undefined"&&(t="SHA-512"),!(t in ln))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=ln[t],r=null,i=De.util.createBuffer(),n=new Array(80),s=0;s<80;++s)n[s]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var u=o.messageLengthSize/4,c=0;c<u;++c)o.fullMessageLength.push(0);i=De.util.createBuffer(),r=new Array(e.length);for(var c=0;c<e.length;++c)r[c]=e[c].slice(0);return o},o.start(),o.update=function(u,c){c==="utf8"&&(u=De.util.encodeUtf8(u));var f=u.length;o.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var h=o.fullMessageLength.length-1;h>=0;--h)o.fullMessageLength[h]+=f[1],f[1]=f[0]+(o.fullMessageLength[h]/4294967296>>>0),o.fullMessageLength[h]=o.fullMessageLength[h]>>>0,f[0]=f[1]/4294967296>>>0;return i.putBytes(u),l1(r,n,i),(i.read>2048||i.length()===0)&&i.compact(),o},o.digest=function(){var u=De.util.createBuffer();u.putBytes(i.bytes());var c=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,f=c&o.blockLength-1;u.putBytes(q0.substr(0,o.blockLength-f));for(var h,p,g=o.fullMessageLength[0]*8,y=0;y<o.fullMessageLength.length-1;++y)h=o.fullMessageLength[y+1]*8,p=h/4294967296>>>0,g+=p,u.putInt32(g>>>0),g=h>>>0;u.putInt32(g);for(var S=new Array(r.length),y=0;y<r.length;++y)S[y]=r[y].slice(0);l1(S,n,u);var B=De.util.createBuffer(),I;t==="SHA-512"?I=S.length:t==="SHA-384"?I=S.length-2:I=S.length-4;for(var y=0;y<I;++y)B.putInt32(S[y][0]),(y!==I-1||t!=="SHA-512/224")&&B.putInt32(S[y][1]);return B},o};var q0=null,h1=!1,K0=null,ln=null;function j8(){q0=String.fromCharCode(128),q0+=De.util.fillString(String.fromCharCode(0),128),K0=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],ln={},ln["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],ln["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],ln["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],ln["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],h1=!0}function l1(t,e,r){for(var i,n,s,a,o,u,c,f,h,p,g,y,S,B,I,M,D,q,k,O,V,U,X,E,l,b,v,m,x,C,A,w,d,_,z,j=r.length();j>=128;){for(x=0;x<16;++x)e[x][0]=r.getInt32()>>>0,e[x][1]=r.getInt32()>>>0;for(;x<80;++x)w=e[x-2],C=w[0],A=w[1],i=((C>>>19|A<<13)^(A>>>29|C<<3)^C>>>6)>>>0,n=((C<<13|A>>>19)^(A<<3|C>>>29)^(C<<26|A>>>6))>>>0,_=e[x-15],C=_[0],A=_[1],s=((C>>>1|A<<31)^(C>>>8|A<<24)^C>>>7)>>>0,a=((C<<31|A>>>1)^(C<<24|A>>>8)^(C<<25|A>>>7))>>>0,d=e[x-7],z=e[x-16],A=n+d[1]+a+z[1],e[x][0]=i+d[0]+s+z[0]+(A/4294967296>>>0)>>>0,e[x][1]=A>>>0;for(S=t[0][0],B=t[0][1],I=t[1][0],M=t[1][1],D=t[2][0],q=t[2][1],k=t[3][0],O=t[3][1],V=t[4][0],U=t[4][1],X=t[5][0],E=t[5][1],l=t[6][0],b=t[6][1],v=t[7][0],m=t[7][1],x=0;x<80;++x)c=((V>>>14|U<<18)^(V>>>18|U<<14)^(U>>>9|V<<23))>>>0,f=((V<<18|U>>>14)^(V<<14|U>>>18)^(U<<23|V>>>9))>>>0,h=(l^V&(X^l))>>>0,p=(b^U&(E^b))>>>0,o=((S>>>28|B<<4)^(B>>>2|S<<30)^(B>>>7|S<<25))>>>0,u=((S<<4|B>>>28)^(B<<30|S>>>2)^(B<<25|S>>>7))>>>0,g=(S&I|D&(S^I))>>>0,y=(B&M|q&(B^M))>>>0,A=m+f+p+K0[x][1]+e[x][1],i=v+c+h+K0[x][0]+e[x][0]+(A/4294967296>>>0)>>>0,n=A>>>0,A=u+y,s=o+g+(A/4294967296>>>0)>>>0,a=A>>>0,v=l,m=b,l=X,b=E,X=V,E=U,A=O+n,V=k+i+(A/4294967296>>>0)>>>0,U=A>>>0,k=D,O=q,D=I,q=M,I=S,M=B,A=n+a,S=i+s+(A/4294967296>>>0)>>>0,B=A>>>0;A=t[0][1]+B,t[0][0]=t[0][0]+S+(A/4294967296>>>0)>>>0,t[0][1]=A>>>0,A=t[1][1]+M,t[1][0]=t[1][0]+I+(A/4294967296>>>0)>>>0,t[1][1]=A>>>0,A=t[2][1]+q,t[2][0]=t[2][0]+D+(A/4294967296>>>0)>>>0,t[2][1]=A>>>0,A=t[3][1]+O,t[3][0]=t[3][0]+k+(A/4294967296>>>0)>>>0,t[3][1]=A>>>0,A=t[4][1]+U,t[4][0]=t[4][0]+V+(A/4294967296>>>0)>>>0,t[4][1]=A>>>0,A=t[5][1]+E,t[5][0]=t[5][0]+X+(A/4294967296>>>0)>>>0,t[5][1]=A>>>0,A=t[6][1]+b,t[6][0]=t[6][0]+l+(A/4294967296>>>0)>>>0,t[6][1]=A>>>0,A=t[7][1]+m,t[7][0]=t[7][0]+v+(A/4294967296>>>0)>>>0,t[7][1]=A>>>0,j-=128}}});var p1=T(U0=>{var H8=xe();jn();var Bt=H8.asn1;U0.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Bt.Class.UNIVERSAL,type:Bt.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Bt.Class.UNIVERSAL,type:Bt.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Bt.Class.UNIVERSAL,type:Bt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Bt.Class.UNIVERSAL,type:Bt.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Bt.Class.UNIVERSAL,type:Bt.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};U0.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Bt.Class.UNIVERSAL,type:Bt.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Bt.Class.UNIVERSAL,type:Bt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Bt.Class.UNIVERSAL,type:Bt.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Bt.Class.UNIVERSAL,type:Bt.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var $0=T((gS,A1)=>{var Ot=xe();zs();Yn();F0();Ue();var b1=p1(),W8=b1.publicKeyValidator,Y8=b1.privateKeyValidator;typeof y1=="undefined"&&(y1=Ot.jsbn.BigInteger);var y1,G0=Ot.util.ByteBuffer,Wt=typeof Buffer=="undefined"?Uint8Array:Buffer;Ot.pki=Ot.pki||{};A1.exports=Ot.pki.ed25519=Ot.ed25519=Ot.ed25519||{};var le=Ot.ed25519;le.constants={};le.constants.PUBLIC_KEY_BYTE_LENGTH=32;le.constants.PRIVATE_KEY_BYTE_LENGTH=64;le.constants.SEED_BYTE_LENGTH=32;le.constants.SIGN_BYTE_LENGTH=64;le.constants.HASH_BYTE_LENGTH=64;le.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Ot.random.getBytesSync(le.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==le.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+le.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=oi({message:e,encoding:"binary"});for(var r=new Wt(le.constants.PUBLIC_KEY_BYTE_LENGTH),i=new Wt(le.constants.PRIVATE_KEY_BYTE_LENGTH),n=0;n<32;++n)i[n]=e[n];return Z8(r,i),{publicKey:r,privateKey:i}};le.privateKeyFromAsn1=function(t){var e={},r=[],i=Ot.asn1.validate(t,Y8,e,r);if(!i){var n=new Error("Invalid Key.");throw n.errors=r,n}var s=Ot.asn1.derToOid(e.privateKeyOid),a=Ot.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=e.privateKey,u=oi({message:Ot.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:u}};le.publicKeyFromAsn1=function(t){var e={},r=[],i=Ot.asn1.validate(t,W8,e,r);if(!i){var n=new Error("Invalid Key.");throw n.errors=r,n}var s=Ot.asn1.derToOid(e.publicKeyOid),a=Ot.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=e.ed25519PublicKey;if(o.length!==le.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return oi({message:o,encoding:"binary"})};le.publicKeyFromPrivateKey=function(t){t=t||{};var e=oi({message:t.privateKey,encoding:"binary"});if(e.length!==le.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+le.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Wt(le.constants.PUBLIC_KEY_BYTE_LENGTH),i=0;i<r.length;++i)r[i]=e[32+i];return r};le.sign=function(t){t=t||{};var e=oi(t),r=oi({message:t.privateKey,encoding:"binary"});if(r.length===le.constants.SEED_BYTE_LENGTH){var i=le.generateKeyPair({seed:r});r=i.privateKey}else if(r.length!==le.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+le.constants.SEED_BYTE_LENGTH+" or "+le.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new Wt(le.constants.SIGN_BYTE_LENGTH+e.length);Q8(n,e,e.length,r);for(var s=new Wt(le.constants.SIGN_BYTE_LENGTH),a=0;a<s.length;++a)s[a]=n[a];return s};le.verify=function(t){t=t||{};var e=oi(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=oi({message:t.signature,encoding:"binary"});if(r.length!==le.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+le.constants.SIGN_BYTE_LENGTH);var i=oi({message:t.publicKey,encoding:"binary"});if(i.length!==le.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+le.constants.PUBLIC_KEY_BYTE_LENGTH);var n=new Wt(le.constants.SIGN_BYTE_LENGTH+e.length),s=new Wt(le.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<le.constants.SIGN_BYTE_LENGTH;++a)n[a]=r[a];for(a=0;a<e.length;++a)n[a+le.constants.SIGN_BYTE_LENGTH]=e[a];return em(s,n,n.length,i)>=0};function oi(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Wt)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new G0(e,r)}else if(!(e instanceof G0))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var i=new Wt(e.length()),n=0;n<i.length;++n)i[n]=e.at(n);return i}var z0=Z(),fo=Z([1]),J8=Z([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),$8=Z([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),g1=Z([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),v1=Z([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),V0=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),X8=Z([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Hs(t,e){var r=Ot.md.sha512.create(),i=new G0(t);r.update(i.getBytes(e),"binary");var n=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(n,"binary");for(var s=new Wt(le.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)s[a]=n.charCodeAt(a);return s}function Z8(t,e){var r=[Z(),Z(),Z(),Z()],i,n=Hs(e,32);for(n[0]&=248,n[31]&=127,n[31]|=64,Y0(r,n),W0(t,r),i=0;i<32;++i)e[i+32]=t[i];return 0}function Q8(t,e,r,i){var n,s,a=new Float64Array(64),o=[Z(),Z(),Z(),Z()],u=Hs(i,32);u[0]&=248,u[31]&=127,u[31]|=64;var c=r+64;for(n=0;n<r;++n)t[64+n]=e[n];for(n=0;n<32;++n)t[32+n]=u[32+n];var f=Hs(t.subarray(32),r+32);for(j0(f),Y0(o,f),W0(t,o),n=32;n<64;++n)t[n]=i[n];var h=Hs(t,r+64);for(j0(h),n=32;n<64;++n)a[n]=0;for(n=0;n<32;++n)a[n]=f[n];for(n=0;n<32;++n)for(s=0;s<32;s++)a[n+s]+=h[n]*u[s];return m1(t.subarray(32),a),c}function em(t,e,r,i){var n,s,a=new Wt(32),o=[Z(),Z(),Z(),Z()],u=[Z(),Z(),Z(),Z()];if(s=-1,r<64||tm(u,i))return-1;for(n=0;n<r;++n)t[n]=e[n];for(n=0;n<32;++n)t[n+32]=i[n];var c=Hs(t,r);if(j0(c),E1(o,u,c),Y0(u,e.subarray(32)),H0(o,u),W0(a,o),r-=64,_1(e,0,a,0)){for(n=0;n<r;++n)t[n]=0;return-1}for(n=0;n<r;++n)t[n]=e[n+64];return s=r,s}function m1(t,e){var r,i,n,s;for(i=63;i>=32;--i){for(r=0,n=i-32,s=i-12;n<s;++n)e[n]+=r-16*e[i]*V0[n-(i-32)],r=e[n]+128>>8,e[n]-=r*256;e[n]+=r,e[i]=0}for(r=0,n=0;n<32;++n)e[n]+=r-(e[31]>>4)*V0[n],r=e[n]>>8,e[n]&=255;for(n=0;n<32;++n)e[n]-=r*V0[n];for(i=0;i<32;++i)e[i+1]+=e[i]>>8,t[i]=e[i]&255}function j0(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;m1(t,e)}function H0(t,e){var r=Z(),i=Z(),n=Z(),s=Z(),a=Z(),o=Z(),u=Z(),c=Z(),f=Z();Zn(r,t[1],t[0]),Zn(f,e[1],e[0]),Ee(r,r,f),Xn(i,t[0],t[1]),Xn(f,e[0],e[1]),Ee(i,i,f),Ee(n,t[3],e[3]),Ee(n,n,$8),Ee(s,t[2],e[2]),Xn(s,s,s),Zn(a,i,r),Zn(o,s,n),Xn(u,s,n),Xn(c,i,r),Ee(t[0],a,o),Ee(t[1],c,u),Ee(t[2],u,o),Ee(t[3],a,c)}function x1(t,e,r){for(var i=0;i<4;++i)I1(t[i],e[i],r)}function W0(t,e){var r=Z(),i=Z(),n=Z();sm(n,e[2]),Ee(r,e[0],n),Ee(i,e[1],n),co(t,i),t[31]^=S1(r)<<7}function co(t,e){var r,i,n,s=Z(),a=Z();for(r=0;r<16;++r)a[r]=e[r];for(J0(a),J0(a),J0(a),i=0;i<2;++i){for(s[0]=a[0]-65517,r=1;r<15;++r)s[r]=a[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),n=s[15]>>16&1,s[14]&=65535,I1(a,s,1-n)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}function tm(t,e){var r=Z(),i=Z(),n=Z(),s=Z(),a=Z(),o=Z(),u=Z();return Pi(t[2],fo),rm(t[1],e),dn(n,t[1]),Ee(s,n,J8),Zn(n,n,t[2]),Xn(s,t[2],s),dn(a,s),dn(o,a),Ee(u,o,a),Ee(r,u,n),Ee(r,r,s),im(r,r),Ee(r,r,n),Ee(r,r,s),Ee(r,r,s),Ee(t[0],r,s),dn(i,t[0]),Ee(i,i,s),w1(i,n)&&Ee(t[0],t[0],X8),dn(i,t[0]),Ee(i,i,s),w1(i,n)?-1:(S1(t[0])===e[31]>>7&&Zn(t[0],z0,t[0]),Ee(t[3],t[0],t[1]),0)}function rm(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function im(t,e){var r=Z(),i;for(i=0;i<16;++i)r[i]=e[i];for(i=250;i>=0;--i)dn(r,r),i!==1&&Ee(r,r,e);for(i=0;i<16;++i)t[i]=r[i]}function w1(t,e){var r=new Wt(32),i=new Wt(32);return co(r,t),co(i,e),_1(r,0,i,0)}function _1(t,e,r,i){return nm(t,e,r,i,32)}function nm(t,e,r,i,n){var s,a=0;for(s=0;s<n;++s)a|=t[e+s]^r[i+s];return(1&a-1>>>8)-1}function S1(t){var e=new Wt(32);return co(e,t),e[0]&1}function E1(t,e,r){var i,n;for(Pi(t[0],z0),Pi(t[1],fo),Pi(t[2],fo),Pi(t[3],z0),n=255;n>=0;--n)i=r[n/8|0]>>(n&7)&1,x1(t,e,i),H0(e,t),H0(t,t),x1(t,e,i)}function Y0(t,e){var r=[Z(),Z(),Z(),Z()];Pi(r[0],g1),Pi(r[1],v1),Pi(r[2],fo),Ee(r[3],g1,v1),E1(t,r,e)}function Pi(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function sm(t,e){var r=Z(),i;for(i=0;i<16;++i)r[i]=e[i];for(i=253;i>=0;--i)dn(r,r),i!==2&&i!==4&&Ee(r,r,e);for(i=0;i<16;++i)t[i]=r[i]}function J0(t){var e,r,i=1;for(e=0;e<16;++e)r=t[e]+i+65535,i=Math.floor(r/65536),t[e]=r-i*65536;t[0]+=i-1+37*(i-1)}function I1(t,e,r){for(var i,n=~(r-1),s=0;s<16;++s)i=n&(t[s]^e[s]),t[s]^=i,e[s]^=i}function Z(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function Xn(t,e,r){for(var i=0;i<16;++i)t[i]=e[i]+r[i]}function Zn(t,e,r){for(var i=0;i<16;++i)t[i]=e[i]-r[i]}function dn(t,e){Ee(t,e,e)}function Ee(t,e,r){var i,n,s=0,a=0,o=0,u=0,c=0,f=0,h=0,p=0,g=0,y=0,S=0,B=0,I=0,M=0,D=0,q=0,k=0,O=0,V=0,U=0,X=0,E=0,l=0,b=0,v=0,m=0,x=0,C=0,A=0,w=0,d=0,_=r[0],z=r[1],j=r[2],W=r[3],J=r[4],Q=r[5],ee=r[6],Pe=r[7],te=r[8],ne=r[9],vt=r[10],ae=r[11],oe=r[12],mt=r[13],fe=r[14],ce=r[15];i=e[0],s+=i*_,a+=i*z,o+=i*j,u+=i*W,c+=i*J,f+=i*Q,h+=i*ee,p+=i*Pe,g+=i*te,y+=i*ne,S+=i*vt,B+=i*ae,I+=i*oe,M+=i*mt,D+=i*fe,q+=i*ce,i=e[1],a+=i*_,o+=i*z,u+=i*j,c+=i*W,f+=i*J,h+=i*Q,p+=i*ee,g+=i*Pe,y+=i*te,S+=i*ne,B+=i*vt,I+=i*ae,M+=i*oe,D+=i*mt,q+=i*fe,k+=i*ce,i=e[2],o+=i*_,u+=i*z,c+=i*j,f+=i*W,h+=i*J,p+=i*Q,g+=i*ee,y+=i*Pe,S+=i*te,B+=i*ne,I+=i*vt,M+=i*ae,D+=i*oe,q+=i*mt,k+=i*fe,O+=i*ce,i=e[3],u+=i*_,c+=i*z,f+=i*j,h+=i*W,p+=i*J,g+=i*Q,y+=i*ee,S+=i*Pe,B+=i*te,I+=i*ne,M+=i*vt,D+=i*ae,q+=i*oe,k+=i*mt,O+=i*fe,V+=i*ce,i=e[4],c+=i*_,f+=i*z,h+=i*j,p+=i*W,g+=i*J,y+=i*Q,S+=i*ee,B+=i*Pe,I+=i*te,M+=i*ne,D+=i*vt,q+=i*ae,k+=i*oe,O+=i*mt,V+=i*fe,U+=i*ce,i=e[5],f+=i*_,h+=i*z,p+=i*j,g+=i*W,y+=i*J,S+=i*Q,B+=i*ee,I+=i*Pe,M+=i*te,D+=i*ne,q+=i*vt,k+=i*ae,O+=i*oe,V+=i*mt,U+=i*fe,X+=i*ce,i=e[6],h+=i*_,p+=i*z,g+=i*j,y+=i*W,S+=i*J,B+=i*Q,I+=i*ee,M+=i*Pe,D+=i*te,q+=i*ne,k+=i*vt,O+=i*ae,V+=i*oe,U+=i*mt,X+=i*fe,E+=i*ce,i=e[7],p+=i*_,g+=i*z,y+=i*j,S+=i*W,B+=i*J,I+=i*Q,M+=i*ee,D+=i*Pe,q+=i*te,k+=i*ne,O+=i*vt,V+=i*ae,U+=i*oe,X+=i*mt,E+=i*fe,l+=i*ce,i=e[8],g+=i*_,y+=i*z,S+=i*j,B+=i*W,I+=i*J,M+=i*Q,D+=i*ee,q+=i*Pe,k+=i*te,O+=i*ne,V+=i*vt,U+=i*ae,X+=i*oe,E+=i*mt,l+=i*fe,b+=i*ce,i=e[9],y+=i*_,S+=i*z,B+=i*j,I+=i*W,M+=i*J,D+=i*Q,q+=i*ee,k+=i*Pe,O+=i*te,V+=i*ne,U+=i*vt,X+=i*ae,E+=i*oe,l+=i*mt,b+=i*fe,v+=i*ce,i=e[10],S+=i*_,B+=i*z,I+=i*j,M+=i*W,D+=i*J,q+=i*Q,k+=i*ee,O+=i*Pe,V+=i*te,U+=i*ne,X+=i*vt,E+=i*ae,l+=i*oe,b+=i*mt,v+=i*fe,m+=i*ce,i=e[11],B+=i*_,I+=i*z,M+=i*j,D+=i*W,q+=i*J,k+=i*Q,O+=i*ee,V+=i*Pe,U+=i*te,X+=i*ne,E+=i*vt,l+=i*ae,b+=i*oe,v+=i*mt,m+=i*fe,x+=i*ce,i=e[12],I+=i*_,M+=i*z,D+=i*j,q+=i*W,k+=i*J,O+=i*Q,V+=i*ee,U+=i*Pe,X+=i*te,E+=i*ne,l+=i*vt,b+=i*ae,v+=i*oe,m+=i*mt,x+=i*fe,C+=i*ce,i=e[13],M+=i*_,D+=i*z,q+=i*j,k+=i*W,O+=i*J,V+=i*Q,U+=i*ee,X+=i*Pe,E+=i*te,l+=i*ne,b+=i*vt,v+=i*ae,m+=i*oe,x+=i*mt,C+=i*fe,A+=i*ce,i=e[14],D+=i*_,q+=i*z,k+=i*j,O+=i*W,V+=i*J,U+=i*Q,X+=i*ee,E+=i*Pe,l+=i*te,b+=i*ne,v+=i*vt,m+=i*ae,x+=i*oe,C+=i*mt,A+=i*fe,w+=i*ce,i=e[15],q+=i*_,k+=i*z,O+=i*j,V+=i*W,U+=i*J,X+=i*Q,E+=i*ee,l+=i*Pe,b+=i*te,v+=i*ne,m+=i*vt,x+=i*ae,C+=i*oe,A+=i*mt,w+=i*fe,d+=i*ce,s+=38*k,a+=38*O,o+=38*V,u+=38*U,c+=38*X,f+=38*E,h+=38*l,p+=38*b,g+=38*v,y+=38*m,S+=38*x,B+=38*C,I+=38*A,M+=38*w,D+=38*d,n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=B+n+65535,n=Math.floor(i/65536),B=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=M+n+65535,n=Math.floor(i/65536),M=i-n*65536,i=D+n+65535,n=Math.floor(i/65536),D=i-n*65536,i=q+n+65535,n=Math.floor(i/65536),q=i-n*65536,s+=n-1+37*(n-1),n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=B+n+65535,n=Math.floor(i/65536),B=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=M+n+65535,n=Math.floor(i/65536),M=i-n*65536,i=D+n+65535,n=Math.floor(i/65536),D=i-n*65536,i=q+n+65535,n=Math.floor(i/65536),q=i-n*65536,s+=n-1+37*(n-1),t[0]=s,t[1]=a,t[2]=o,t[3]=u,t[4]=c,t[5]=f,t[6]=h,t[7]=p,t[8]=g,t[9]=y,t[10]=S,t[11]=B,t[12]=I,t[13]=M,t[14]=D,t[15]=q}});var uo=T(Ws=>{"use strict";Ue();zs();var am=xe(),{fromString:om}=(br(),pr),{toString:C1}=(Dr(),Pr),{concat:B1}=(cn(),fn);Ws.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=B1([new Uint8Array(e-r.length),r])}return C1(r,"base64url")};Ws.base64urlToBigInteger=t=>{let e=Ws.base64urlToBuffer(t);return new am.jsbn.BigInteger(C1(e,"base16"),16)};Ws.base64urlToBuffer=(t,e)=>{let r=om(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=B1([new Uint8Array(e-r.length),r])}return r}});var M1=T(Ys=>{"use strict";jn();oo();var Di=xe(),{bigIntegerToUintBase64url:Fr,base64urlToBigInteger:Ur}=uo(),{fromString:R1}=(br(),pr),{toString:T1}=(Dr(),Pr);Ys.pkcs1ToJwk=function(t){let e=Di.asn1.fromDer(T1(t,"ascii")),r=Di.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Fr(r.n),e:Fr(r.e),d:Fr(r.d),p:Fr(r.p),q:Fr(r.q),dp:Fr(r.dP),dq:Fr(r.dQ),qi:Fr(r.qInv),alg:"RS256",kid:"2011-04-29"}};Ys.jwkToPkcs1=function(t){let e=Di.pki.privateKeyToAsn1({n:Ur(t.n),e:Ur(t.e),d:Ur(t.d),p:Ur(t.p),q:Ur(t.q),dP:Ur(t.dp),dQ:Ur(t.dq),qInv:Ur(t.qi)});return R1(Di.asn1.toDer(e).getBytes(),"ascii")};Ys.pkixToJwk=function(t){let e=Di.asn1.fromDer(T1(t,"ascii")),r=Di.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Fr(r.n),e:Fr(r.e),alg:"RS256",kid:"2011-04-29"}};Ys.jwkToPkix=function(t){let e=Di.pki.publicKeyToAsn1({n:Ur(t.n),e:Ur(t.e)});return R1(Di.asn1.toDer(e).getBytes(),"ascii")}});var N1=T((xS,O1)=>{"use strict";oo();var P1=xe(),{base64urlToBigInteger:fm}=uo();function D1(t,e){return e.map(r=>fm(t[r]))}function cm(t){return P1.pki.setRsaPrivateKey(...D1(t,["n","e","d","p","q","dp","dq","qi"]))}function um(t){return P1.pki.setRsaPublicKey(...D1(t,["n","e"]))}O1.exports={jwk2pub:um,jwk2priv:cm}});var q1=T(ci=>{"use strict";var fi=Vs(),hm=Ma(),{toString:lm}=(Dr(),Pr),{fromString:dm}=(br(),pr);ci.utils=M1();ci.generateKey=async function(t){let e=await fi.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await L1(e);return{privateKey:r[0],publicKey:r[1]}};ci.unmarshalPrivateKey=async function(t){let r=[await fi.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await pm(t)],i=await L1({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}};ci.getRandomValues=hm;ci.hashAndSign=async function(t,e){let r=await fi.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await fi.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)};ci.hashAndVerify=async function(t,e,r){let i=await fi.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return fi.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};function L1(t){return Promise.all([fi.get().subtle.exportKey("jwk",t.privateKey),fi.get().subtle.exportKey("jwk",t.publicKey)])}function pm(t){return fi.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:bm,jwk2priv:ym}=N1();function k1(t,e,r,i){let n=e?bm(t):ym(t),s=lm(Uint8Array.from(r),"ascii"),a=i(s,n);return dm(a,"ascii")}ci.encrypt=function(t,e){return k1(t,!0,e,(r,i)=>i.encrypt(r))};ci.decrypt=function(t,e){return k1(t,!1,e,(r,i)=>i.decrypt(r))}});var ho=T((_S,K1)=>{"use strict";var{base64:gm}=(Ts(),Un),vm=k0();K1.exports={export:async function(t,e){let i=await vm.create().encrypt(t,e);return gm.encode(i)}}});var V1=T((SS,z1)=>{"use strict";var{sha256:F1}=(en(),Ci),U1=Zt(),{equals:G1}=(hn(),un),{toString:mm}=(Dr(),Pr);F0();$0();var lo=xe(),sr=q1(),po=Va(),xm=ho(),bo=class{constructor(e){this._key=e}async verify(e,r){return sr.hashAndVerify(this._key,r,e)}marshal(){return sr.utils.jwkToPkix(this._key)}get bytes(){return po.PublicKey.encode({Type:po.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return sr.encrypt(this._key,e)}equals(e){return G1(this.bytes,e.bytes)}async hash(){let{bytes:e}=await F1.digest(this.bytes);return e}},Js=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return sr.getRandomValues(16)}async sign(e){return sr.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw U1(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new bo(this._publicKey)}decrypt(e){return sr.decrypt(this._key,e)}marshal(){return sr.utils.jwkToPkcs1(this._key)}get bytes(){return po.PrivateKey.encode({Type:po.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return G1(this.bytes,e.bytes)}async hash(){let{bytes:e}=await F1.digest(this.bytes);return e}async id(){let e=await this.public.hash();return mm(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let i=new lo.util.ByteBuffer(this.marshal()),n=lo.asn1.fromDer(i),s=lo.pki.privateKeyFromAsn1(n),a={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return lo.pki.encryptRsaPrivateKey(s,e,a)}else{if(r==="libp2p-key")return xm.export(this.bytes,e);throw U1(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function wm(t){let e=sr.utils.pkcs1ToJwk(t),r=await sr.unmarshalPrivateKey(e);return new Js(r.privateKey,r.publicKey)}function _m(t){let e=sr.utils.pkixToJwk(t);return new bo(e)}async function Sm(t){let e=await sr.unmarshalPrivateKey(t);return new Js(e.privateKey,e.publicKey)}async function Em(t){let e=await sr.generateKey(t);return new Js(e.privateKey,e.publicKey)}z1.exports={RsaPublicKey:bo,RsaPrivateKey:Js,unmarshalRsaPublicKey:_m,unmarshalRsaPrivateKey:wm,generateKeyPair:Em,fromJwk:Sm}});var j1=T(pn=>{"use strict";$0();var Qn=xe();pn.publicKeyLength=Qn.pki.ed25519.constants.PUBLIC_KEY_BYTE_LENGTH;pn.privateKeyLength=Qn.pki.ed25519.constants.PRIVATE_KEY_BYTE_LENGTH;pn.generateKey=async function(){return Qn.pki.ed25519.generateKeyPair()};pn.generateKeyFromSeed=async function(t){return Qn.pki.ed25519.generateKeyPair({seed:t})};pn.hashAndSign=async function(t,e){return Qn.pki.ed25519.sign({message:e,privateKey:t})};pn.hashAndVerify=async function(t,e,r){return Qn.pki.ed25519.verify({signature:e,message:r,publicKey:t})}});var $1=T((IS,J1)=>{"use strict";var H1=Zt(),{equals:W1}=(hn(),un),{sha256:Y1}=(en(),Ci),{base58btc:Im}=(Fn(),Kn),{identity:Am}=(Ka(),Ls),qt=j1(),yo=Va(),Cm=ho(),go=class{constructor(e){this._key=ts(e,qt.publicKeyLength)}async verify(e,r){return qt.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return yo.PublicKey.encode({Type:yo.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return W1(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Y1.digest(this.bytes);return e}},es=class{constructor(e,r){this._key=ts(e,qt.privateKeyLength),this._publicKey=ts(r,qt.publicKeyLength)}async sign(e){return qt.hashAndSign(this._key,e)}get public(){return new go(this._publicKey)}marshal(){return this._key}get bytes(){return yo.PrivateKey.encode({Type:yo.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return W1(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Y1.digest(this.bytes);return e}async id(){let e=await Am.digest(this.public.bytes);return Im.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return Cm.export(this.bytes,e);throw H1(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function Bm(t){if(t.length>qt.privateKeyLength){t=ts(t,qt.privateKeyLength+qt.publicKeyLength);let i=t.slice(0,qt.privateKeyLength),n=t.slice(qt.privateKeyLength,t.length);return new es(i,n)}t=ts(t,qt.privateKeyLength);let e=t.slice(0,qt.privateKeyLength),r=t.slice(qt.publicKeyLength);return new es(e,r)}function Rm(t){return t=ts(t,qt.publicKeyLength),new go(t)}async function Tm(){let{privateKey:t,publicKey:e}=await qt.generateKey();return new es(t,e)}async function Mm(t){let{privateKey:e,publicKey:r}=await qt.generateKeyFromSeed(t);return new es(e,r)}function ts(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw H1(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}J1.exports={Ed25519PublicKey:go,Ed25519PrivateKey:es,unmarshalEd25519PrivateKey:Bm,unmarshalEd25519PublicKey:Rm,generateKeyPair:Tm,generateKeyPairFromSeed:Mm}});var Z1=T((AS,X1)=>{var me={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function ar(t,e){if(!t)throw new Error(e)}function ye(t,e,r){if(ar(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let i=r.join(", "),n=`Expected ${t} to be an Uint8Array with length [${i}]`;ar(r.includes(e.length),n)}else{let i=`Expected ${t} to be an Uint8Array with length ${r}`;ar(e.length===r,i)}}function bn(t){ar(rs(t)==="Boolean","Expected compressed to be a Boolean")}function vr(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),ye("output",t,e),t}function rs(t){return Object.prototype.toString.call(t).slice(8,-1)}X1.exports=t=>({contextRandomize(e){switch(ar(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&ye("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(me.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return ye("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(ye("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(me.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(ye("private key",e,32),ye("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(me.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(ye("private key",e,32),ye("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(me.TWEAK_MUL)}},publicKeyVerify(e){return ye("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,i){switch(ye("private key",e,32),bn(r),i=vr(i,r?33:65),t.publicKeyCreate(i,e)){case 0:return i;case 1:throw new Error(me.SECKEY_INVALID);case 2:throw new Error(me.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,i){switch(ye("public key",e,[33,65]),bn(r),i=vr(i,r?33:65),t.publicKeyConvert(i,e)){case 0:return i;case 1:throw new Error(me.PUBKEY_PARSE);case 2:throw new Error(me.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,i){switch(ye("public key",e,[33,65]),bn(r),i=vr(i,r?33:65),t.publicKeyNegate(i,e)){case 0:return i;case 1:throw new Error(me.PUBKEY_PARSE);case 2:throw new Error(me.IMPOSSIBLE_CASE);case 3:throw new Error(me.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,i){ar(Array.isArray(e),"Expected public keys to be an Array"),ar(e.length>0,"Expected public keys array will have more than zero items");for(let n of e)ye("public key",n,[33,65]);switch(bn(r),i=vr(i,r?33:65),t.publicKeyCombine(i,e)){case 0:return i;case 1:throw new Error(me.PUBKEY_PARSE);case 2:throw new Error(me.PUBKEY_COMBINE);case 3:throw new Error(me.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,i=!0,n){switch(ye("public key",e,[33,65]),ye("tweak",r,32),bn(i),n=vr(n,i?33:65),t.publicKeyTweakAdd(n,e,r)){case 0:return n;case 1:throw new Error(me.PUBKEY_PARSE);case 2:throw new Error(me.TWEAK_ADD)}},publicKeyTweakMul(e,r,i=!0,n){switch(ye("public key",e,[33,65]),ye("tweak",r,32),bn(i),n=vr(n,i?33:65),t.publicKeyTweakMul(n,e,r)){case 0:return n;case 1:throw new Error(me.PUBKEY_PARSE);case 2:throw new Error(me.TWEAK_MUL)}},signatureNormalize(e){switch(ye("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(me.SIG_PARSE)}},signatureExport(e,r){ye("signature",e,64),r=vr(r,72);let i={output:r,outputlen:72};switch(t.signatureExport(i,e)){case 0:return r.slice(0,i.outputlen);case 1:throw new Error(me.SIG_PARSE);case 2:throw new Error(me.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(ye("signature",e),r=vr(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(me.SIG_PARSE);case 2:throw new Error(me.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,i={},n){ye("message",e,32),ye("private key",r,32),ar(rs(i)==="Object","Expected options to be an Object"),i.data!==void 0&&ye("options.data",i.data),i.noncefn!==void 0&&ar(rs(i.noncefn)==="Function","Expected options.noncefn to be a Function"),n=vr(n,64);let s={signature:n,recid:null};switch(t.ecdsaSign(s,e,r,i.data,i.noncefn)){case 0:return s;case 1:throw new Error(me.SIGN);case 2:throw new Error(me.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,i){switch(ye("signature",e,64),ye("message",r,32),ye("public key",i,[33,65]),t.ecdsaVerify(e,r,i)){case 0:return!0;case 3:return!1;case 1:throw new Error(me.SIG_PARSE);case 2:throw new Error(me.PUBKEY_PARSE)}},ecdsaRecover(e,r,i,n=!0,s){switch(ye("signature",e,64),ar(rs(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),ye("message",i,32),bn(n),s=vr(s,n?33:65),t.ecdsaRecover(s,e,r,i)){case 0:return s;case 1:throw new Error(me.SIG_PARSE);case 2:throw new Error(me.RECOVER);case 3:throw new Error(me.IMPOSSIBLE_CASE)}},ecdh(e,r,i={},n){switch(ye("public key",e,[33,65]),ye("private key",r,32),ar(rs(i)==="Object","Expected options to be an Object"),i.data!==void 0&&ye("options.data",i.data),i.hashfn!==void 0?(ar(rs(i.hashfn)==="Function","Expected options.hashfn to be a Function"),i.xbuf!==void 0&&ye("options.xbuf",i.xbuf,32),i.ybuf!==void 0&&ye("options.ybuf",i.ybuf,32),ye("output",n)):n=vr(n,32),t.ecdh(n,e,r,i.data,i.hashfn,i.xbuf,i.ybuf)){case 0:return n;case 1:throw new Error(me.PUBKEY_PARSE);case 2:throw new Error(me.ECDH)}}})});var Q1=T((CS,Pm)=>{Pm.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var eb=T(()=>{});var Gr=T((tb,X0)=>{(function(t,e){"use strict";function r(E,l){if(!E)throw new Error(l||"Assertion failed")}function i(E,l){E.super_=l;var b=function(){};b.prototype=l.prototype,E.prototype=new b,E.prototype.constructor=E}function n(E,l,b){if(n.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((l==="le"||l==="be")&&(b=l,l=10),this._init(E||0,l||10,b||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=eb().Buffer}catch(E){}n.isBN=function(l){return l instanceof n?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===n.wordSize&&Array.isArray(l.words)},n.max=function(l,b){return l.cmp(b)>0?l:b},n.min=function(l,b){return l.cmp(b)<0?l:b},n.prototype._init=function(l,b,v){if(typeof l=="number")return this._initNumber(l,b,v);if(typeof l=="object")return this._initArray(l,b,v);b==="hex"&&(b=16),r(b===(b|0)&&b>=2&&b<=36),l=l.toString().replace(/\s+/g,"");var m=0;l[0]==="-"&&(m++,this.negative=1),m<l.length&&(b===16?this._parseHex(l,m,v):(this._parseBase(l,b,m),v==="le"&&this._initArray(this.toArray(),b,v)))},n.prototype._initNumber=function(l,b,v){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(r(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),b,v)},n.prototype._initArray=function(l,b,v){if(r(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var x,C,A=0;if(v==="be")for(m=l.length-1,x=0;m>=0;m-=3)C=l[m]|l[m-1]<<8|l[m-2]<<16,this.words[x]|=C<<A&67108863,this.words[x+1]=C>>>26-A&67108863,A+=24,A>=26&&(A-=26,x++);else if(v==="le")for(m=0,x=0;m<l.length;m+=3)C=l[m]|l[m+1]<<8|l[m+2]<<16,this.words[x]|=C<<A&67108863,this.words[x+1]=C>>>26-A&67108863,A+=24,A>=26&&(A-=26,x++);return this.strip()};function a(E,l){var b=E.charCodeAt(l);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function o(E,l,b){var v=a(E,b);return b-1>=l&&(v|=a(E,b-1)<<4),v}n.prototype._parseHex=function(l,b,v){this.length=Math.ceil((l.length-b)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var x=0,C=0,A;if(v==="be")for(m=l.length-1;m>=b;m-=2)A=o(l,b,m)<<x,this.words[C]|=A&67108863,x>=18?(x-=18,C+=1,this.words[C]|=A>>>26):x+=8;else{var w=l.length-b;for(m=w%2==0?b+1:b;m<l.length;m+=2)A=o(l,b,m)<<x,this.words[C]|=A&67108863,x>=18?(x-=18,C+=1,this.words[C]|=A>>>26):x+=8}this.strip()};function u(E,l,b,v){for(var m=0,x=Math.min(E.length,b),C=l;C<x;C++){var A=E.charCodeAt(C)-48;m*=v,A>=49?m+=A-49+10:A>=17?m+=A-17+10:m+=A}return m}n.prototype._parseBase=function(l,b,v){this.words=[0],this.length=1;for(var m=0,x=1;x<=67108863;x*=b)m++;m--,x=x/b|0;for(var C=l.length-v,A=C%m,w=Math.min(C,C-A)+v,d=0,_=v;_<w;_+=m)d=u(l,_,_+m,b),this.imuln(x),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(A!==0){var z=1;for(d=u(l,_,l.length,b),_=0;_<A;_++)z*=b;this.imuln(z),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},n.prototype.copy=function(l){l.words=new Array(this.length);for(var b=0;b<this.length;b++)l.words[b]=this.words[b];l.length=this.length,l.negative=this.negative,l.red=this.red},n.prototype.clone=function(){var l=new n(null);return this.copy(l),l},n.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(l,b){l=l||10,b=b|0||1;var v;if(l===16||l==="hex"){v="";for(var m=0,x=0,C=0;C<this.length;C++){var A=this.words[C],w=((A<<m|x)&16777215).toString(16);x=A>>>24-m&16777215,x!==0||C!==this.length-1?v=c[6-w.length]+w+v:v=w+v,m+=2,m>=26&&(m-=26,C--)}for(x!==0&&(v=x.toString(16)+v);v.length%b!=0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(l===(l|0)&&l>=2&&l<=36){var d=f[l],_=h[l];v="";var z=this.clone();for(z.negative=0;!z.isZero();){var j=z.modn(_).toString(l);z=z.idivn(_),z.isZero()?v=j+v:v=c[d-j.length]+j+v}for(this.isZero()&&(v="0"+v);v.length%b!=0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(l,b){return r(typeof s!="undefined"),this.toArrayLike(s,l,b)},n.prototype.toArray=function(l,b){return this.toArrayLike(Array,l,b)},n.prototype.toArrayLike=function(l,b,v){var m=this.byteLength(),x=v||Math.max(1,m);r(m<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0"),this.strip();var C=b==="le",A=new l(x),w,d,_=this.clone();if(C){for(d=0;!_.isZero();d++)w=_.andln(255),_.iushrn(8),A[d]=w;for(;d<x;d++)A[d]=0}else{for(d=0;d<x-m;d++)A[d]=0;for(d=0;!_.isZero();d++)w=_.andln(255),_.iushrn(8),A[x-d-1]=w}return A},Math.clz32?n.prototype._countBits=function(l){return 32-Math.clz32(l)}:n.prototype._countBits=function(l){var b=l,v=0;return b>=4096&&(v+=13,b>>>=13),b>=64&&(v+=7,b>>>=7),b>=8&&(v+=4,b>>>=4),b>=2&&(v+=2,b>>>=2),v+b},n.prototype._zeroBits=function(l){if(l===0)return 26;var b=l,v=0;return(b&8191)==0&&(v+=13,b>>>=13),(b&127)==0&&(v+=7,b>>>=7),(b&15)==0&&(v+=4,b>>>=4),(b&3)==0&&(v+=2,b>>>=2),(b&1)==0&&v++,v},n.prototype.bitLength=function(){var l=this.words[this.length-1],b=this._countBits(l);return(this.length-1)*26+b};function p(E){for(var l=new Array(E.bitLength()),b=0;b<l.length;b++){var v=b/26|0,m=b%26;l[b]=(E.words[v]&1<<m)>>>m}return l}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,b=0;b<this.length;b++){var v=this._zeroBits(this.words[b]);if(l+=v,v!==26)break}return l},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},n.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var b=0;b<l.length;b++)this.words[b]=this.words[b]|l.words[b];return this.strip()},n.prototype.ior=function(l){return r((this.negative|l.negative)==0),this.iuor(l)},n.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},n.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},n.prototype.iuand=function(l){var b;this.length>l.length?b=l:b=this;for(var v=0;v<b.length;v++)this.words[v]=this.words[v]&l.words[v];return this.length=b.length,this.strip()},n.prototype.iand=function(l){return r((this.negative|l.negative)==0),this.iuand(l)},n.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},n.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},n.prototype.iuxor=function(l){var b,v;this.length>l.length?(b=this,v=l):(b=l,v=this);for(var m=0;m<v.length;m++)this.words[m]=b.words[m]^v.words[m];if(this!==b)for(;m<b.length;m++)this.words[m]=b.words[m];return this.length=b.length,this.strip()},n.prototype.ixor=function(l){return r((this.negative|l.negative)==0),this.iuxor(l)},n.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},n.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},n.prototype.inotn=function(l){r(typeof l=="number"&&l>=0);var b=Math.ceil(l/26)|0,v=l%26;this._expand(b),v>0&&b--;for(var m=0;m<b;m++)this.words[m]=~this.words[m]&67108863;return v>0&&(this.words[m]=~this.words[m]&67108863>>26-v),this.strip()},n.prototype.notn=function(l){return this.clone().inotn(l)},n.prototype.setn=function(l,b){r(typeof l=="number"&&l>=0);var v=l/26|0,m=l%26;return this._expand(v+1),b?this.words[v]=this.words[v]|1<<m:this.words[v]=this.words[v]&~(1<<m),this.strip()},n.prototype.iadd=function(l){var b;if(this.negative!==0&&l.negative===0)return this.negative=0,b=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,b=this.isub(l),l.negative=1,b._normSign();var v,m;this.length>l.length?(v=this,m=l):(v=l,m=this);for(var x=0,C=0;C<m.length;C++)b=(v.words[C]|0)+(m.words[C]|0)+x,this.words[C]=b&67108863,x=b>>>26;for(;x!==0&&C<v.length;C++)b=(v.words[C]|0)+x,this.words[C]=b&67108863,x=b>>>26;if(this.length=v.length,x!==0)this.words[this.length]=x,this.length++;else if(v!==this)for(;C<v.length;C++)this.words[C]=v.words[C];return this},n.prototype.add=function(l){var b;return l.negative!==0&&this.negative===0?(l.negative=0,b=this.sub(l),l.negative^=1,b):l.negative===0&&this.negative!==0?(this.negative=0,b=l.sub(this),this.negative=1,b):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},n.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var b=this.iadd(l);return l.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var v=this.cmp(l);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,x;v>0?(m=this,x=l):(m=l,x=this);for(var C=0,A=0;A<x.length;A++)b=(m.words[A]|0)-(x.words[A]|0)+C,C=b>>26,this.words[A]=b&67108863;for(;C!==0&&A<m.length;A++)b=(m.words[A]|0)+C,C=b>>26,this.words[A]=b&67108863;if(C===0&&A<m.length&&m!==this)for(;A<m.length;A++)this.words[A]=m.words[A];return this.length=Math.max(this.length,A),m!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(l){return this.clone().isub(l)};function g(E,l,b){b.negative=l.negative^E.negative;var v=E.length+l.length|0;b.length=v,v=v-1|0;var m=E.words[0]|0,x=l.words[0]|0,C=m*x,A=C&67108863,w=C/67108864|0;b.words[0]=A;for(var d=1;d<v;d++){for(var _=w>>>26,z=w&67108863,j=Math.min(d,l.length-1),W=Math.max(0,d-E.length+1);W<=j;W++){var J=d-W|0;m=E.words[J]|0,x=l.words[W]|0,C=m*x+z,_+=C/67108864|0,z=C&67108863}b.words[d]=z|0,w=_|0}return w!==0?b.words[d]=w|0:b.length--,b.strip()}var y=function(l,b,v){var m=l.words,x=b.words,C=v.words,A=0,w,d,_,z=m[0]|0,j=z&8191,W=z>>>13,J=m[1]|0,Q=J&8191,ee=J>>>13,Pe=m[2]|0,te=Pe&8191,ne=Pe>>>13,vt=m[3]|0,ae=vt&8191,oe=vt>>>13,mt=m[4]|0,fe=mt&8191,ce=mt>>>13,Jc=m[5]|0,Ge=Jc&8191,ze=Jc>>>13,$c=m[6]|0,Ve=$c&8191,je=$c>>>13,Xc=m[7]|0,He=Xc&8191,We=Xc>>>13,Zc=m[8]|0,Ye=Zc&8191,Je=Zc>>>13,Qc=m[9]|0,$e=Qc&8191,Xe=Qc>>>13,eu=x[0]|0,Ze=eu&8191,Qe=eu>>>13,tu=x[1]|0,et=tu&8191,tt=tu>>>13,ru=x[2]|0,rt=ru&8191,it=ru>>>13,iu=x[3]|0,nt=iu&8191,st=iu>>>13,nu=x[4]|0,at=nu&8191,ot=nu>>>13,su=x[5]|0,ft=su&8191,ct=su>>>13,au=x[6]|0,ut=au&8191,ht=au>>>13,ou=x[7]|0,lt=ou&8191,dt=ou>>>13,fu=x[8]|0,pt=fu&8191,bt=fu>>>13,cu=x[9]|0,yt=cu&8191,gt=cu>>>13;v.negative=l.negative^b.negative,v.length=19,w=Math.imul(j,Ze),d=Math.imul(j,Qe),d=d+Math.imul(W,Ze)|0,_=Math.imul(W,Qe);var $o=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+($o>>>26)|0,$o&=67108863,w=Math.imul(Q,Ze),d=Math.imul(Q,Qe),d=d+Math.imul(ee,Ze)|0,_=Math.imul(ee,Qe),w=w+Math.imul(j,et)|0,d=d+Math.imul(j,tt)|0,d=d+Math.imul(W,et)|0,_=_+Math.imul(W,tt)|0;var Xo=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(Xo>>>26)|0,Xo&=67108863,w=Math.imul(te,Ze),d=Math.imul(te,Qe),d=d+Math.imul(ne,Ze)|0,_=Math.imul(ne,Qe),w=w+Math.imul(Q,et)|0,d=d+Math.imul(Q,tt)|0,d=d+Math.imul(ee,et)|0,_=_+Math.imul(ee,tt)|0,w=w+Math.imul(j,rt)|0,d=d+Math.imul(j,it)|0,d=d+Math.imul(W,rt)|0,_=_+Math.imul(W,it)|0;var Zo=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(Zo>>>26)|0,Zo&=67108863,w=Math.imul(ae,Ze),d=Math.imul(ae,Qe),d=d+Math.imul(oe,Ze)|0,_=Math.imul(oe,Qe),w=w+Math.imul(te,et)|0,d=d+Math.imul(te,tt)|0,d=d+Math.imul(ne,et)|0,_=_+Math.imul(ne,tt)|0,w=w+Math.imul(Q,rt)|0,d=d+Math.imul(Q,it)|0,d=d+Math.imul(ee,rt)|0,_=_+Math.imul(ee,it)|0,w=w+Math.imul(j,nt)|0,d=d+Math.imul(j,st)|0,d=d+Math.imul(W,nt)|0,_=_+Math.imul(W,st)|0;var Qo=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(Qo>>>26)|0,Qo&=67108863,w=Math.imul(fe,Ze),d=Math.imul(fe,Qe),d=d+Math.imul(ce,Ze)|0,_=Math.imul(ce,Qe),w=w+Math.imul(ae,et)|0,d=d+Math.imul(ae,tt)|0,d=d+Math.imul(oe,et)|0,_=_+Math.imul(oe,tt)|0,w=w+Math.imul(te,rt)|0,d=d+Math.imul(te,it)|0,d=d+Math.imul(ne,rt)|0,_=_+Math.imul(ne,it)|0,w=w+Math.imul(Q,nt)|0,d=d+Math.imul(Q,st)|0,d=d+Math.imul(ee,nt)|0,_=_+Math.imul(ee,st)|0,w=w+Math.imul(j,at)|0,d=d+Math.imul(j,ot)|0,d=d+Math.imul(W,at)|0,_=_+Math.imul(W,ot)|0;var ef=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(ef>>>26)|0,ef&=67108863,w=Math.imul(Ge,Ze),d=Math.imul(Ge,Qe),d=d+Math.imul(ze,Ze)|0,_=Math.imul(ze,Qe),w=w+Math.imul(fe,et)|0,d=d+Math.imul(fe,tt)|0,d=d+Math.imul(ce,et)|0,_=_+Math.imul(ce,tt)|0,w=w+Math.imul(ae,rt)|0,d=d+Math.imul(ae,it)|0,d=d+Math.imul(oe,rt)|0,_=_+Math.imul(oe,it)|0,w=w+Math.imul(te,nt)|0,d=d+Math.imul(te,st)|0,d=d+Math.imul(ne,nt)|0,_=_+Math.imul(ne,st)|0,w=w+Math.imul(Q,at)|0,d=d+Math.imul(Q,ot)|0,d=d+Math.imul(ee,at)|0,_=_+Math.imul(ee,ot)|0,w=w+Math.imul(j,ft)|0,d=d+Math.imul(j,ct)|0,d=d+Math.imul(W,ft)|0,_=_+Math.imul(W,ct)|0;var tf=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(tf>>>26)|0,tf&=67108863,w=Math.imul(Ve,Ze),d=Math.imul(Ve,Qe),d=d+Math.imul(je,Ze)|0,_=Math.imul(je,Qe),w=w+Math.imul(Ge,et)|0,d=d+Math.imul(Ge,tt)|0,d=d+Math.imul(ze,et)|0,_=_+Math.imul(ze,tt)|0,w=w+Math.imul(fe,rt)|0,d=d+Math.imul(fe,it)|0,d=d+Math.imul(ce,rt)|0,_=_+Math.imul(ce,it)|0,w=w+Math.imul(ae,nt)|0,d=d+Math.imul(ae,st)|0,d=d+Math.imul(oe,nt)|0,_=_+Math.imul(oe,st)|0,w=w+Math.imul(te,at)|0,d=d+Math.imul(te,ot)|0,d=d+Math.imul(ne,at)|0,_=_+Math.imul(ne,ot)|0,w=w+Math.imul(Q,ft)|0,d=d+Math.imul(Q,ct)|0,d=d+Math.imul(ee,ft)|0,_=_+Math.imul(ee,ct)|0,w=w+Math.imul(j,ut)|0,d=d+Math.imul(j,ht)|0,d=d+Math.imul(W,ut)|0,_=_+Math.imul(W,ht)|0;var rf=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(rf>>>26)|0,rf&=67108863,w=Math.imul(He,Ze),d=Math.imul(He,Qe),d=d+Math.imul(We,Ze)|0,_=Math.imul(We,Qe),w=w+Math.imul(Ve,et)|0,d=d+Math.imul(Ve,tt)|0,d=d+Math.imul(je,et)|0,_=_+Math.imul(je,tt)|0,w=w+Math.imul(Ge,rt)|0,d=d+Math.imul(Ge,it)|0,d=d+Math.imul(ze,rt)|0,_=_+Math.imul(ze,it)|0,w=w+Math.imul(fe,nt)|0,d=d+Math.imul(fe,st)|0,d=d+Math.imul(ce,nt)|0,_=_+Math.imul(ce,st)|0,w=w+Math.imul(ae,at)|0,d=d+Math.imul(ae,ot)|0,d=d+Math.imul(oe,at)|0,_=_+Math.imul(oe,ot)|0,w=w+Math.imul(te,ft)|0,d=d+Math.imul(te,ct)|0,d=d+Math.imul(ne,ft)|0,_=_+Math.imul(ne,ct)|0,w=w+Math.imul(Q,ut)|0,d=d+Math.imul(Q,ht)|0,d=d+Math.imul(ee,ut)|0,_=_+Math.imul(ee,ht)|0,w=w+Math.imul(j,lt)|0,d=d+Math.imul(j,dt)|0,d=d+Math.imul(W,lt)|0,_=_+Math.imul(W,dt)|0;var nf=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(nf>>>26)|0,nf&=67108863,w=Math.imul(Ye,Ze),d=Math.imul(Ye,Qe),d=d+Math.imul(Je,Ze)|0,_=Math.imul(Je,Qe),w=w+Math.imul(He,et)|0,d=d+Math.imul(He,tt)|0,d=d+Math.imul(We,et)|0,_=_+Math.imul(We,tt)|0,w=w+Math.imul(Ve,rt)|0,d=d+Math.imul(Ve,it)|0,d=d+Math.imul(je,rt)|0,_=_+Math.imul(je,it)|0,w=w+Math.imul(Ge,nt)|0,d=d+Math.imul(Ge,st)|0,d=d+Math.imul(ze,nt)|0,_=_+Math.imul(ze,st)|0,w=w+Math.imul(fe,at)|0,d=d+Math.imul(fe,ot)|0,d=d+Math.imul(ce,at)|0,_=_+Math.imul(ce,ot)|0,w=w+Math.imul(ae,ft)|0,d=d+Math.imul(ae,ct)|0,d=d+Math.imul(oe,ft)|0,_=_+Math.imul(oe,ct)|0,w=w+Math.imul(te,ut)|0,d=d+Math.imul(te,ht)|0,d=d+Math.imul(ne,ut)|0,_=_+Math.imul(ne,ht)|0,w=w+Math.imul(Q,lt)|0,d=d+Math.imul(Q,dt)|0,d=d+Math.imul(ee,lt)|0,_=_+Math.imul(ee,dt)|0,w=w+Math.imul(j,pt)|0,d=d+Math.imul(j,bt)|0,d=d+Math.imul(W,pt)|0,_=_+Math.imul(W,bt)|0;var sf=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(sf>>>26)|0,sf&=67108863,w=Math.imul($e,Ze),d=Math.imul($e,Qe),d=d+Math.imul(Xe,Ze)|0,_=Math.imul(Xe,Qe),w=w+Math.imul(Ye,et)|0,d=d+Math.imul(Ye,tt)|0,d=d+Math.imul(Je,et)|0,_=_+Math.imul(Je,tt)|0,w=w+Math.imul(He,rt)|0,d=d+Math.imul(He,it)|0,d=d+Math.imul(We,rt)|0,_=_+Math.imul(We,it)|0,w=w+Math.imul(Ve,nt)|0,d=d+Math.imul(Ve,st)|0,d=d+Math.imul(je,nt)|0,_=_+Math.imul(je,st)|0,w=w+Math.imul(Ge,at)|0,d=d+Math.imul(Ge,ot)|0,d=d+Math.imul(ze,at)|0,_=_+Math.imul(ze,ot)|0,w=w+Math.imul(fe,ft)|0,d=d+Math.imul(fe,ct)|0,d=d+Math.imul(ce,ft)|0,_=_+Math.imul(ce,ct)|0,w=w+Math.imul(ae,ut)|0,d=d+Math.imul(ae,ht)|0,d=d+Math.imul(oe,ut)|0,_=_+Math.imul(oe,ht)|0,w=w+Math.imul(te,lt)|0,d=d+Math.imul(te,dt)|0,d=d+Math.imul(ne,lt)|0,_=_+Math.imul(ne,dt)|0,w=w+Math.imul(Q,pt)|0,d=d+Math.imul(Q,bt)|0,d=d+Math.imul(ee,pt)|0,_=_+Math.imul(ee,bt)|0,w=w+Math.imul(j,yt)|0,d=d+Math.imul(j,gt)|0,d=d+Math.imul(W,yt)|0,_=_+Math.imul(W,gt)|0;var af=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(af>>>26)|0,af&=67108863,w=Math.imul($e,et),d=Math.imul($e,tt),d=d+Math.imul(Xe,et)|0,_=Math.imul(Xe,tt),w=w+Math.imul(Ye,rt)|0,d=d+Math.imul(Ye,it)|0,d=d+Math.imul(Je,rt)|0,_=_+Math.imul(Je,it)|0,w=w+Math.imul(He,nt)|0,d=d+Math.imul(He,st)|0,d=d+Math.imul(We,nt)|0,_=_+Math.imul(We,st)|0,w=w+Math.imul(Ve,at)|0,d=d+Math.imul(Ve,ot)|0,d=d+Math.imul(je,at)|0,_=_+Math.imul(je,ot)|0,w=w+Math.imul(Ge,ft)|0,d=d+Math.imul(Ge,ct)|0,d=d+Math.imul(ze,ft)|0,_=_+Math.imul(ze,ct)|0,w=w+Math.imul(fe,ut)|0,d=d+Math.imul(fe,ht)|0,d=d+Math.imul(ce,ut)|0,_=_+Math.imul(ce,ht)|0,w=w+Math.imul(ae,lt)|0,d=d+Math.imul(ae,dt)|0,d=d+Math.imul(oe,lt)|0,_=_+Math.imul(oe,dt)|0,w=w+Math.imul(te,pt)|0,d=d+Math.imul(te,bt)|0,d=d+Math.imul(ne,pt)|0,_=_+Math.imul(ne,bt)|0,w=w+Math.imul(Q,yt)|0,d=d+Math.imul(Q,gt)|0,d=d+Math.imul(ee,yt)|0,_=_+Math.imul(ee,gt)|0;var of=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(of>>>26)|0,of&=67108863,w=Math.imul($e,rt),d=Math.imul($e,it),d=d+Math.imul(Xe,rt)|0,_=Math.imul(Xe,it),w=w+Math.imul(Ye,nt)|0,d=d+Math.imul(Ye,st)|0,d=d+Math.imul(Je,nt)|0,_=_+Math.imul(Je,st)|0,w=w+Math.imul(He,at)|0,d=d+Math.imul(He,ot)|0,d=d+Math.imul(We,at)|0,_=_+Math.imul(We,ot)|0,w=w+Math.imul(Ve,ft)|0,d=d+Math.imul(Ve,ct)|0,d=d+Math.imul(je,ft)|0,_=_+Math.imul(je,ct)|0,w=w+Math.imul(Ge,ut)|0,d=d+Math.imul(Ge,ht)|0,d=d+Math.imul(ze,ut)|0,_=_+Math.imul(ze,ht)|0,w=w+Math.imul(fe,lt)|0,d=d+Math.imul(fe,dt)|0,d=d+Math.imul(ce,lt)|0,_=_+Math.imul(ce,dt)|0,w=w+Math.imul(ae,pt)|0,d=d+Math.imul(ae,bt)|0,d=d+Math.imul(oe,pt)|0,_=_+Math.imul(oe,bt)|0,w=w+Math.imul(te,yt)|0,d=d+Math.imul(te,gt)|0,d=d+Math.imul(ne,yt)|0,_=_+Math.imul(ne,gt)|0;var ff=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(ff>>>26)|0,ff&=67108863,w=Math.imul($e,nt),d=Math.imul($e,st),d=d+Math.imul(Xe,nt)|0,_=Math.imul(Xe,st),w=w+Math.imul(Ye,at)|0,d=d+Math.imul(Ye,ot)|0,d=d+Math.imul(Je,at)|0,_=_+Math.imul(Je,ot)|0,w=w+Math.imul(He,ft)|0,d=d+Math.imul(He,ct)|0,d=d+Math.imul(We,ft)|0,_=_+Math.imul(We,ct)|0,w=w+Math.imul(Ve,ut)|0,d=d+Math.imul(Ve,ht)|0,d=d+Math.imul(je,ut)|0,_=_+Math.imul(je,ht)|0,w=w+Math.imul(Ge,lt)|0,d=d+Math.imul(Ge,dt)|0,d=d+Math.imul(ze,lt)|0,_=_+Math.imul(ze,dt)|0,w=w+Math.imul(fe,pt)|0,d=d+Math.imul(fe,bt)|0,d=d+Math.imul(ce,pt)|0,_=_+Math.imul(ce,bt)|0,w=w+Math.imul(ae,yt)|0,d=d+Math.imul(ae,gt)|0,d=d+Math.imul(oe,yt)|0,_=_+Math.imul(oe,gt)|0;var cf=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(cf>>>26)|0,cf&=67108863,w=Math.imul($e,at),d=Math.imul($e,ot),d=d+Math.imul(Xe,at)|0,_=Math.imul(Xe,ot),w=w+Math.imul(Ye,ft)|0,d=d+Math.imul(Ye,ct)|0,d=d+Math.imul(Je,ft)|0,_=_+Math.imul(Je,ct)|0,w=w+Math.imul(He,ut)|0,d=d+Math.imul(He,ht)|0,d=d+Math.imul(We,ut)|0,_=_+Math.imul(We,ht)|0,w=w+Math.imul(Ve,lt)|0,d=d+Math.imul(Ve,dt)|0,d=d+Math.imul(je,lt)|0,_=_+Math.imul(je,dt)|0,w=w+Math.imul(Ge,pt)|0,d=d+Math.imul(Ge,bt)|0,d=d+Math.imul(ze,pt)|0,_=_+Math.imul(ze,bt)|0,w=w+Math.imul(fe,yt)|0,d=d+Math.imul(fe,gt)|0,d=d+Math.imul(ce,yt)|0,_=_+Math.imul(ce,gt)|0;var uf=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(uf>>>26)|0,uf&=67108863,w=Math.imul($e,ft),d=Math.imul($e,ct),d=d+Math.imul(Xe,ft)|0,_=Math.imul(Xe,ct),w=w+Math.imul(Ye,ut)|0,d=d+Math.imul(Ye,ht)|0,d=d+Math.imul(Je,ut)|0,_=_+Math.imul(Je,ht)|0,w=w+Math.imul(He,lt)|0,d=d+Math.imul(He,dt)|0,d=d+Math.imul(We,lt)|0,_=_+Math.imul(We,dt)|0,w=w+Math.imul(Ve,pt)|0,d=d+Math.imul(Ve,bt)|0,d=d+Math.imul(je,pt)|0,_=_+Math.imul(je,bt)|0,w=w+Math.imul(Ge,yt)|0,d=d+Math.imul(Ge,gt)|0,d=d+Math.imul(ze,yt)|0,_=_+Math.imul(ze,gt)|0;var hf=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(hf>>>26)|0,hf&=67108863,w=Math.imul($e,ut),d=Math.imul($e,ht),d=d+Math.imul(Xe,ut)|0,_=Math.imul(Xe,ht),w=w+Math.imul(Ye,lt)|0,d=d+Math.imul(Ye,dt)|0,d=d+Math.imul(Je,lt)|0,_=_+Math.imul(Je,dt)|0,w=w+Math.imul(He,pt)|0,d=d+Math.imul(He,bt)|0,d=d+Math.imul(We,pt)|0,_=_+Math.imul(We,bt)|0,w=w+Math.imul(Ve,yt)|0,d=d+Math.imul(Ve,gt)|0,d=d+Math.imul(je,yt)|0,_=_+Math.imul(je,gt)|0;var lf=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(lf>>>26)|0,lf&=67108863,w=Math.imul($e,lt),d=Math.imul($e,dt),d=d+Math.imul(Xe,lt)|0,_=Math.imul(Xe,dt),w=w+Math.imul(Ye,pt)|0,d=d+Math.imul(Ye,bt)|0,d=d+Math.imul(Je,pt)|0,_=_+Math.imul(Je,bt)|0,w=w+Math.imul(He,yt)|0,d=d+Math.imul(He,gt)|0,d=d+Math.imul(We,yt)|0,_=_+Math.imul(We,gt)|0;var df=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(df>>>26)|0,df&=67108863,w=Math.imul($e,pt),d=Math.imul($e,bt),d=d+Math.imul(Xe,pt)|0,_=Math.imul(Xe,bt),w=w+Math.imul(Ye,yt)|0,d=d+Math.imul(Ye,gt)|0,d=d+Math.imul(Je,yt)|0,_=_+Math.imul(Je,gt)|0;var pf=(A+w|0)+((d&8191)<<13)|0;A=(_+(d>>>13)|0)+(pf>>>26)|0,pf&=67108863,w=Math.imul($e,yt),d=Math.imul($e,gt),d=d+Math.imul(Xe,yt)|0,_=Math.imul(Xe,gt);var bf=(A+w|0)+((d&8191)<<13)|0;return A=(_+(d>>>13)|0)+(bf>>>26)|0,bf&=67108863,C[0]=$o,C[1]=Xo,C[2]=Zo,C[3]=Qo,C[4]=ef,C[5]=tf,C[6]=rf,C[7]=nf,C[8]=sf,C[9]=af,C[10]=of,C[11]=ff,C[12]=cf,C[13]=uf,C[14]=hf,C[15]=lf,C[16]=df,C[17]=pf,C[18]=bf,A!==0&&(C[19]=A,v.length++),v};Math.imul||(y=g);function S(E,l,b){b.negative=l.negative^E.negative,b.length=E.length+l.length;for(var v=0,m=0,x=0;x<b.length-1;x++){var C=m;m=0;for(var A=v&67108863,w=Math.min(x,l.length-1),d=Math.max(0,x-E.length+1);d<=w;d++){var _=x-d,z=E.words[_]|0,j=l.words[d]|0,W=z*j,J=W&67108863;C=C+(W/67108864|0)|0,J=J+A|0,A=J&67108863,C=C+(J>>>26)|0,m+=C>>>26,C&=67108863}b.words[x]=A,v=C,C=m}return v!==0?b.words[x]=v:b.length--,b.strip()}function B(E,l,b){var v=new I;return v.mulp(E,l,b)}n.prototype.mulTo=function(l,b){var v,m=this.length+l.length;return this.length===10&&l.length===10?v=y(this,l,b):m<63?v=g(this,l,b):m<1024?v=S(this,l,b):v=B(this,l,b),v};function I(E,l){this.x=E,this.y=l}I.prototype.makeRBT=function(l){for(var b=new Array(l),v=n.prototype._countBits(l)-1,m=0;m<l;m++)b[m]=this.revBin(m,v,l);return b},I.prototype.revBin=function(l,b,v){if(l===0||l===v-1)return l;for(var m=0,x=0;x<b;x++)m|=(l&1)<<b-x-1,l>>=1;return m},I.prototype.permute=function(l,b,v,m,x,C){for(var A=0;A<C;A++)m[A]=b[l[A]],x[A]=v[l[A]]},I.prototype.transform=function(l,b,v,m,x,C){this.permute(C,l,b,v,m,x);for(var A=1;A<x;A<<=1)for(var w=A<<1,d=Math.cos(2*Math.PI/w),_=Math.sin(2*Math.PI/w),z=0;z<x;z+=w)for(var j=d,W=_,J=0;J<A;J++){var Q=v[z+J],ee=m[z+J],Pe=v[z+J+A],te=m[z+J+A],ne=j*Pe-W*te;te=j*te+W*Pe,Pe=ne,v[z+J]=Q+Pe,m[z+J]=ee+te,v[z+J+A]=Q-Pe,m[z+J+A]=ee-te,J!==w&&(ne=d*j-_*W,W=d*W+_*j,j=ne)}},I.prototype.guessLen13b=function(l,b){var v=Math.max(b,l)|1,m=v&1,x=0;for(v=v/2|0;v;v=v>>>1)x++;return 1<<x+1+m},I.prototype.conjugate=function(l,b,v){if(!(v<=1))for(var m=0;m<v/2;m++){var x=l[m];l[m]=l[v-m-1],l[v-m-1]=x,x=b[m],b[m]=-b[v-m-1],b[v-m-1]=-x}},I.prototype.normalize13b=function(l,b){for(var v=0,m=0;m<b/2;m++){var x=Math.round(l[2*m+1]/b)*8192+Math.round(l[2*m]/b)+v;l[m]=x&67108863,x<67108864?v=0:v=x/67108864|0}return l},I.prototype.convert13b=function(l,b,v,m){for(var x=0,C=0;C<b;C++)x=x+(l[C]|0),v[2*C]=x&8191,x=x>>>13,v[2*C+1]=x&8191,x=x>>>13;for(C=2*b;C<m;++C)v[C]=0;r(x===0),r((x&~8191)==0)},I.prototype.stub=function(l){for(var b=new Array(l),v=0;v<l;v++)b[v]=0;return b},I.prototype.mulp=function(l,b,v){var m=2*this.guessLen13b(l.length,b.length),x=this.makeRBT(m),C=this.stub(m),A=new Array(m),w=new Array(m),d=new Array(m),_=new Array(m),z=new Array(m),j=new Array(m),W=v.words;W.length=m,this.convert13b(l.words,l.length,A,m),this.convert13b(b.words,b.length,_,m),this.transform(A,C,w,d,m,x),this.transform(_,C,z,j,m,x);for(var J=0;J<m;J++){var Q=w[J]*z[J]-d[J]*j[J];d[J]=w[J]*j[J]+d[J]*z[J],w[J]=Q}return this.conjugate(w,d,m),this.transform(w,d,W,C,m,x),this.conjugate(W,C,m),this.normalize13b(W,m),v.negative=l.negative^b.negative,v.length=l.length+b.length,v.strip()},n.prototype.mul=function(l){var b=new n(null);return b.words=new Array(this.length+l.length),this.mulTo(l,b)},n.prototype.mulf=function(l){var b=new n(null);return b.words=new Array(this.length+l.length),B(this,l,b)},n.prototype.imul=function(l){return this.clone().mulTo(l,this)},n.prototype.imuln=function(l){r(typeof l=="number"),r(l<67108864);for(var b=0,v=0;v<this.length;v++){var m=(this.words[v]|0)*l,x=(m&67108863)+(b&67108863);b>>=26,b+=m/67108864|0,b+=x>>>26,this.words[v]=x&67108863}return b!==0&&(this.words[v]=b,this.length++),this},n.prototype.muln=function(l){return this.clone().imuln(l)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(l){var b=p(l);if(b.length===0)return new n(1);for(var v=this,m=0;m<b.length&&b[m]===0;m++,v=v.sqr());if(++m<b.length)for(var x=v.sqr();m<b.length;m++,x=x.sqr())b[m]!==0&&(v=v.mul(x));return v},n.prototype.iushln=function(l){r(typeof l=="number"&&l>=0);var b=l%26,v=(l-b)/26,m=67108863>>>26-b<<26-b,x;if(b!==0){var C=0;for(x=0;x<this.length;x++){var A=this.words[x]&m,w=(this.words[x]|0)-A<<b;this.words[x]=w|C,C=A>>>26-b}C&&(this.words[x]=C,this.length++)}if(v!==0){for(x=this.length-1;x>=0;x--)this.words[x+v]=this.words[x];for(x=0;x<v;x++)this.words[x]=0;this.length+=v}return this.strip()},n.prototype.ishln=function(l){return r(this.negative===0),this.iushln(l)},n.prototype.iushrn=function(l,b,v){r(typeof l=="number"&&l>=0);var m;b?m=(b-b%26)/26:m=0;var x=l%26,C=Math.min((l-x)/26,this.length),A=67108863^67108863>>>x<<x,w=v;if(m-=C,m=Math.max(0,m),w){for(var d=0;d<C;d++)w.words[d]=this.words[d];w.length=C}if(C!==0)if(this.length>C)for(this.length-=C,d=0;d<this.length;d++)this.words[d]=this.words[d+C];else this.words[0]=0,this.length=1;var _=0;for(d=this.length-1;d>=0&&(_!==0||d>=m);d--){var z=this.words[d]|0;this.words[d]=_<<26-x|z>>>x,_=z&A}return w&&_!==0&&(w.words[w.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(l,b,v){return r(this.negative===0),this.iushrn(l,b,v)},n.prototype.shln=function(l){return this.clone().ishln(l)},n.prototype.ushln=function(l){return this.clone().iushln(l)},n.prototype.shrn=function(l){return this.clone().ishrn(l)},n.prototype.ushrn=function(l){return this.clone().iushrn(l)},n.prototype.testn=function(l){r(typeof l=="number"&&l>=0);var b=l%26,v=(l-b)/26,m=1<<b;if(this.length<=v)return!1;var x=this.words[v];return!!(x&m)},n.prototype.imaskn=function(l){r(typeof l=="number"&&l>=0);var b=l%26,v=(l-b)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(b!==0&&v++,this.length=Math.min(v,this.length),b!==0){var m=67108863^67108863>>>b<<b;this.words[this.length-1]&=m}return this.strip()},n.prototype.maskn=function(l){return this.clone().imaskn(l)},n.prototype.iaddn=function(l){return r(typeof l=="number"),r(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},n.prototype._iaddn=function(l){this.words[0]+=l;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},n.prototype.isubn=function(l){if(r(typeof l=="number"),r(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},n.prototype.addn=function(l){return this.clone().iaddn(l)},n.prototype.subn=function(l){return this.clone().isubn(l)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(l,b,v){var m=l.length+v,x;this._expand(m);var C,A=0;for(x=0;x<l.length;x++){C=(this.words[x+v]|0)+A;var w=(l.words[x]|0)*b;C-=w&67108863,A=(C>>26)-(w/67108864|0),this.words[x+v]=C&67108863}for(;x<this.length-v;x++)C=(this.words[x+v]|0)+A,A=C>>26,this.words[x+v]=C&67108863;if(A===0)return this.strip();for(r(A===-1),A=0,x=0;x<this.length;x++)C=-(this.words[x]|0)+A,A=C>>26,this.words[x]=C&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(l,b){var v=this.length-l.length,m=this.clone(),x=l,C=x.words[x.length-1]|0,A=this._countBits(C);v=26-A,v!==0&&(x=x.ushln(v),m.iushln(v),C=x.words[x.length-1]|0);var w=m.length-x.length,d;if(b!=="mod"){d=new n(null),d.length=w+1,d.words=new Array(d.length);for(var _=0;_<d.length;_++)d.words[_]=0}var z=m.clone()._ishlnsubmul(x,1,w);z.negative===0&&(m=z,d&&(d.words[w]=1));for(var j=w-1;j>=0;j--){var W=(m.words[x.length+j]|0)*67108864+(m.words[x.length+j-1]|0);for(W=Math.min(W/C|0,67108863),m._ishlnsubmul(x,W,j);m.negative!==0;)W--,m.negative=0,m._ishlnsubmul(x,1,j),m.isZero()||(m.negative^=1);d&&(d.words[j]=W)}return d&&d.strip(),m.strip(),b!=="div"&&v!==0&&m.iushrn(v),{div:d||null,mod:m}},n.prototype.divmod=function(l,b,v){if(r(!l.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var m,x,C;return this.negative!==0&&l.negative===0?(C=this.neg().divmod(l,b),b!=="mod"&&(m=C.div.neg()),b!=="div"&&(x=C.mod.neg(),v&&x.negative!==0&&x.iadd(l)),{div:m,mod:x}):this.negative===0&&l.negative!==0?(C=this.divmod(l.neg(),b),b!=="mod"&&(m=C.div.neg()),{div:m,mod:C.mod}):(this.negative&l.negative)!=0?(C=this.neg().divmod(l.neg(),b),b!=="div"&&(x=C.mod.neg(),v&&x.negative!==0&&x.isub(l)),{div:C.div,mod:x}):l.length>this.length||this.cmp(l)<0?{div:new n(0),mod:this}:l.length===1?b==="div"?{div:this.divn(l.words[0]),mod:null}:b==="mod"?{div:null,mod:new n(this.modn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new n(this.modn(l.words[0]))}:this._wordDiv(l,b)},n.prototype.div=function(l){return this.divmod(l,"div",!1).div},n.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},n.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},n.prototype.divRound=function(l){var b=this.divmod(l);if(b.mod.isZero())return b.div;var v=b.div.negative!==0?b.mod.isub(l):b.mod,m=l.ushrn(1),x=l.andln(1),C=v.cmp(m);return C<0||x===1&&C===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},n.prototype.modn=function(l){r(l<=67108863);for(var b=(1<<26)%l,v=0,m=this.length-1;m>=0;m--)v=(b*v+(this.words[m]|0))%l;return v},n.prototype.idivn=function(l){r(l<=67108863);for(var b=0,v=this.length-1;v>=0;v--){var m=(this.words[v]|0)+b*67108864;this.words[v]=m/l|0,b=m%l}return this.strip()},n.prototype.divn=function(l){return this.clone().idivn(l)},n.prototype.egcd=function(l){r(l.negative===0),r(!l.isZero());var b=this,v=l.clone();b.negative!==0?b=b.umod(l):b=b.clone();for(var m=new n(1),x=new n(0),C=new n(0),A=new n(1),w=0;b.isEven()&&v.isEven();)b.iushrn(1),v.iushrn(1),++w;for(var d=v.clone(),_=b.clone();!b.isZero();){for(var z=0,j=1;(b.words[0]&j)==0&&z<26;++z,j<<=1);if(z>0)for(b.iushrn(z);z-- >0;)(m.isOdd()||x.isOdd())&&(m.iadd(d),x.isub(_)),m.iushrn(1),x.iushrn(1);for(var W=0,J=1;(v.words[0]&J)==0&&W<26;++W,J<<=1);if(W>0)for(v.iushrn(W);W-- >0;)(C.isOdd()||A.isOdd())&&(C.iadd(d),A.isub(_)),C.iushrn(1),A.iushrn(1);b.cmp(v)>=0?(b.isub(v),m.isub(C),x.isub(A)):(v.isub(b),C.isub(m),A.isub(x))}return{a:C,b:A,gcd:v.iushln(w)}},n.prototype._invmp=function(l){r(l.negative===0),r(!l.isZero());var b=this,v=l.clone();b.negative!==0?b=b.umod(l):b=b.clone();for(var m=new n(1),x=new n(0),C=v.clone();b.cmpn(1)>0&&v.cmpn(1)>0;){for(var A=0,w=1;(b.words[0]&w)==0&&A<26;++A,w<<=1);if(A>0)for(b.iushrn(A);A-- >0;)m.isOdd()&&m.iadd(C),m.iushrn(1);for(var d=0,_=1;(v.words[0]&_)==0&&d<26;++d,_<<=1);if(d>0)for(v.iushrn(d);d-- >0;)x.isOdd()&&x.iadd(C),x.iushrn(1);b.cmp(v)>=0?(b.isub(v),m.isub(x)):(v.isub(b),x.isub(m))}var z;return b.cmpn(1)===0?z=m:z=x,z.cmpn(0)<0&&z.iadd(l),z},n.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var b=this.clone(),v=l.clone();b.negative=0,v.negative=0;for(var m=0;b.isEven()&&v.isEven();m++)b.iushrn(1),v.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;v.isEven();)v.iushrn(1);var x=b.cmp(v);if(x<0){var C=b;b=v,v=C}else if(x===0||v.cmpn(1)===0)break;b.isub(v)}while(!0);return v.iushln(m)},n.prototype.invm=function(l){return this.egcd(l).a.umod(l)},n.prototype.isEven=function(){return(this.words[0]&1)==0},n.prototype.isOdd=function(){return(this.words[0]&1)==1},n.prototype.andln=function(l){return this.words[0]&l},n.prototype.bincn=function(l){r(typeof l=="number");var b=l%26,v=(l-b)/26,m=1<<b;if(this.length<=v)return this._expand(v+1),this.words[v]|=m,this;for(var x=m,C=v;x!==0&&C<this.length;C++){var A=this.words[C]|0;A+=x,x=A>>>26,A&=67108863,this.words[C]=A}return x!==0&&(this.words[C]=x,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(l){var b=l<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var v;if(this.length>1)v=1;else{b&&(l=-l),r(l<=67108863,"Number is too big");var m=this.words[0]|0;v=m===l?0:m<l?-1:1}return this.negative!==0?-v|0:v},n.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var b=this.ucmp(l);return this.negative!==0?-b|0:b},n.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var b=0,v=this.length-1;v>=0;v--){var m=this.words[v]|0,x=l.words[v]|0;if(m!==x){m<x?b=-1:m>x&&(b=1);break}}return b},n.prototype.gtn=function(l){return this.cmpn(l)===1},n.prototype.gt=function(l){return this.cmp(l)===1},n.prototype.gten=function(l){return this.cmpn(l)>=0},n.prototype.gte=function(l){return this.cmp(l)>=0},n.prototype.ltn=function(l){return this.cmpn(l)===-1},n.prototype.lt=function(l){return this.cmp(l)===-1},n.prototype.lten=function(l){return this.cmpn(l)<=0},n.prototype.lte=function(l){return this.cmp(l)<=0},n.prototype.eqn=function(l){return this.cmpn(l)===0},n.prototype.eq=function(l){return this.cmp(l)===0},n.red=function(l){return new U(l)},n.prototype.toRed=function(l){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(l){return this.red=l,this},n.prototype.forceRed=function(l){return r(!this.red,"Already a number in reduction context"),this._forceRed(l)},n.prototype.redAdd=function(l){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},n.prototype.redIAdd=function(l){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},n.prototype.redSub=function(l){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},n.prototype.redISub=function(l){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},n.prototype.redShl=function(l){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},n.prototype.redMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},n.prototype.redIMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(l){return r(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var M={k256:null,p224:null,p192:null,p25519:null};function D(E,l){this.name=E,this.p=new n(l,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var l=new n(null);return l.words=new Array(Math.ceil(this.n/13)),l},D.prototype.ireduce=function(l){var b=l,v;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),v=b.bitLength();while(v>this.n);var m=v<this.n?-1:b.ucmp(this.p);return m===0?(b.words[0]=0,b.length=1):m>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},D.prototype.split=function(l,b){l.iushrn(this.n,0,b)},D.prototype.imulK=function(l){return l.imul(this.k)};function q(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(q,D),q.prototype.split=function(l,b){for(var v=4194303,m=Math.min(l.length,9),x=0;x<m;x++)b.words[x]=l.words[x];if(b.length=m,l.length<=9){l.words[0]=0,l.length=1;return}var C=l.words[9];for(b.words[b.length++]=C&v,x=10;x<l.length;x++){var A=l.words[x]|0;l.words[x-10]=(A&v)<<4|C>>>22,C=A}C>>>=22,l.words[x-10]=C,C===0&&l.length>10?l.length-=10:l.length-=9},q.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var b=0,v=0;v<l.length;v++){var m=l.words[v]|0;b+=m*977,l.words[v]=b&67108863,b=m*64+(b/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function k(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(k,D);function O(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(O,D);function V(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(V,D),V.prototype.imulK=function(l){for(var b=0,v=0;v<l.length;v++){var m=(l.words[v]|0)*19+b,x=m&67108863;m>>>=26,l.words[v]=x,b=m}return b!==0&&(l.words[l.length++]=b),l},n._prime=function(l){if(M[l])return M[l];var b;if(l==="k256")b=new q;else if(l==="p224")b=new k;else if(l==="p192")b=new O;else if(l==="p25519")b=new V;else throw new Error("Unknown prime "+l);return M[l]=b,b};function U(E){if(typeof E=="string"){var l=n._prime(E);this.m=l.p,this.prime=l}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}U.prototype._verify1=function(l){r(l.negative===0,"red works only with positives"),r(l.red,"red works only with red numbers")},U.prototype._verify2=function(l,b){r((l.negative|b.negative)==0,"red works only with positives"),r(l.red&&l.red===b.red,"red works only with red numbers")},U.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):l.umod(this.m)._forceRed(this)},U.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},U.prototype.add=function(l,b){this._verify2(l,b);var v=l.add(b);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},U.prototype.iadd=function(l,b){this._verify2(l,b);var v=l.iadd(b);return v.cmp(this.m)>=0&&v.isub(this.m),v},U.prototype.sub=function(l,b){this._verify2(l,b);var v=l.sub(b);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},U.prototype.isub=function(l,b){this._verify2(l,b);var v=l.isub(b);return v.cmpn(0)<0&&v.iadd(this.m),v},U.prototype.shl=function(l,b){return this._verify1(l),this.imod(l.ushln(b))},U.prototype.imul=function(l,b){return this._verify2(l,b),this.imod(l.imul(b))},U.prototype.mul=function(l,b){return this._verify2(l,b),this.imod(l.mul(b))},U.prototype.isqr=function(l){return this.imul(l,l.clone())},U.prototype.sqr=function(l){return this.mul(l,l)},U.prototype.sqrt=function(l){if(l.isZero())return l.clone();var b=this.m.andln(3);if(r(b%2==1),b===3){var v=this.m.add(new n(1)).iushrn(2);return this.pow(l,v)}for(var m=this.m.subn(1),x=0;!m.isZero()&&m.andln(1)===0;)x++,m.iushrn(1);r(!m.isZero());var C=new n(1).toRed(this),A=C.redNeg(),w=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new n(2*d*d).toRed(this);this.pow(d,w).cmp(A)!==0;)d.redIAdd(A);for(var _=this.pow(d,m),z=this.pow(l,m.addn(1).iushrn(1)),j=this.pow(l,m),W=x;j.cmp(C)!==0;){for(var J=j,Q=0;J.cmp(C)!==0;Q++)J=J.redSqr();r(Q<W);var ee=this.pow(_,new n(1).iushln(W-Q-1));z=z.redMul(ee),_=ee.redSqr(),j=j.redMul(_),W=Q}return z},U.prototype.invm=function(l){var b=l._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},U.prototype.pow=function(l,b){if(b.isZero())return new n(1).toRed(this);if(b.cmpn(1)===0)return l.clone();var v=4,m=new Array(1<<v);m[0]=new n(1).toRed(this),m[1]=l;for(var x=2;x<m.length;x++)m[x]=this.mul(m[x-1],l);var C=m[0],A=0,w=0,d=b.bitLength()%26;for(d===0&&(d=26),x=b.length-1;x>=0;x--){for(var _=b.words[x],z=d-1;z>=0;z--){var j=_>>z&1;if(C!==m[0]&&(C=this.sqr(C)),j===0&&A===0){w=0;continue}A<<=1,A|=j,w++,!(w!==v&&(x!==0||z!==0))&&(C=this.mul(C,m[A]),w=0,A=0)}d=26}return C},U.prototype.convertTo=function(l){var b=l.umod(this.m);return b===l?b.clone():b},U.prototype.convertFrom=function(l){var b=l.clone();return b.red=null,b},n.mont=function(l){return new X(l)};function X(E){U.call(this,E),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(X,U),X.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},X.prototype.convertFrom=function(l){var b=this.imod(l.mul(this.rinv));return b.red=null,b},X.prototype.imul=function(l,b){if(l.isZero()||b.isZero())return l.words[0]=0,l.length=1,l;var v=l.imul(b),m=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=v.isub(m).iushrn(this.shift),C=x;return x.cmp(this.m)>=0?C=x.isub(this.m):x.cmpn(0)<0&&(C=x.iadd(this.m)),C._forceRed(this)},X.prototype.mul=function(l,b){if(l.isZero()||b.isZero())return new n(0)._forceRed(this);var v=l.mul(b),m=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=v.isub(m).iushrn(this.shift),C=x;return x.cmp(this.m)>=0?C=x.isub(this.m):x.cmpn(0)<0&&(C=x.iadd(this.m)),C._forceRed(this)},X.prototype.invm=function(l){var b=this.imod(l._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(typeof X0=="undefined"||X0,tb)});var Oi=T((TS,ib)=>{ib.exports=rb;function rb(t,e){if(!t)throw new Error(e||"Assertion failed")}rb.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)}});var Z0=T(ab=>{"use strict";var vo=ab;function Dm(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!="string"){for(var i=0;i<t.length;i++)r[i]=t[i]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t);for(var i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var i=0;i<t.length;i++){var n=t.charCodeAt(i),s=n>>8,a=n&255;s?r.push(s,a):r.push(a)}return r}vo.toArray=Dm;function nb(t){return t.length===1?"0"+t:t}vo.zero2=nb;function sb(t){for(var e="",r=0;r<t.length;r++)e+=nb(t[r].toString(16));return e}vo.toHex=sb;vo.encode=function(e,r){return r==="hex"?sb(e):e}});var Qt=T(ob=>{"use strict";var mr=ob,Om=Gr(),Nm=Oi(),mo=Z0();mr.assert=Nm;mr.toArray=mo.toArray;mr.zero2=mo.zero2;mr.toHex=mo.toHex;mr.encode=mo.encode;function Lm(t,e,r){var i=new Array(Math.max(t.bitLength(),r)+1);i.fill(0);for(var n=1<<e+1,s=t.clone(),a=0;a<i.length;a++){var o,u=s.andln(n-1);s.isOdd()?(u>(n>>1)-1?o=(n>>1)-u:o=u,s.isubn(o)):o=0,i[a]=o,s.iushrn(1)}return i}mr.getNAF=Lm;function km(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var i=0,n=0,s;t.cmpn(-i)>0||e.cmpn(-n)>0;){var a=t.andln(3)+i&3,o=e.andln(3)+n&3;a===3&&(a=-1),o===3&&(o=-1);var u;(a&1)==0?u=0:(s=t.andln(7)+i&7,(s===3||s===5)&&o===2?u=-a:u=a),r[0].push(u);var c;(o&1)==0?c=0:(s=e.andln(7)+n&7,(s===3||s===5)&&a===2?c=-o:c=o),r[1].push(c),2*i===u+1&&(i=1-i),2*n===c+1&&(n=1-n),t.iushrn(1),e.iushrn(1)}return r}mr.getJSF=km;function qm(t,e,r){var i="_"+e;t.prototype[e]=function(){return this[i]!==void 0?this[i]:this[i]=r.call(this)}}mr.cachedProperty=qm;function Km(t){return typeof t=="string"?mr.toArray(t,"hex"):t}mr.parseBytes=Km;function Fm(t){return new Om(t,"hex","le")}mr.intFromLE=Fm});var rc=T((DS,tc)=>{var Q0;tc.exports=function(e){return Q0||(Q0=new Ni(null)),Q0.generate(e)};function Ni(t){this.rand=t}tc.exports.Rand=Ni;Ni.prototype.generate=function(e){return this._rand(e)};Ni.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Ni.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Ni.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Ni.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(ec=Us(),typeof ec.randomBytes!="function")throw new Error("Not supported");Ni.prototype._rand=function(e){return ec.randomBytes(e)}}catch(t){}var ec});var Xs=T((OS,fb)=>{"use strict";var yn=Gr(),$s=Qt(),xo=$s.getNAF,Um=$s.getJSF,wo=$s.assert;function Li(t,e){this.type=t,this.p=new yn(e.p,16),this.red=e.prime?yn.red(e.prime):yn.mont(this.p),this.zero=new yn(0).toRed(this.red),this.one=new yn(1).toRed(this.red),this.two=new yn(2).toRed(this.red),this.n=e.n&&new yn(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}fb.exports=Li;Li.prototype.point=function(){throw new Error("Not implemented")};Li.prototype.validate=function(){throw new Error("Not implemented")};Li.prototype._fixedNafMul=function(e,r){wo(e.precomputed);var i=e._getDoubles(),n=xo(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2==0?2:1);s/=3;var a=[],o,u;for(o=0;o<n.length;o+=i.step){u=0;for(var c=o+i.step-1;c>=o;c--)u=(u<<1)+n[c];a.push(u)}for(var f=this.jpoint(null,null,null),h=this.jpoint(null,null,null),p=s;p>0;p--){for(o=0;o<a.length;o++)u=a[o],u===p?h=h.mixedAdd(i.points[o]):u===-p&&(h=h.mixedAdd(i.points[o].neg()));f=f.add(h)}return f.toP()};Li.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,a=xo(r,i,this._bitLength),o=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var c=0;u>=0&&a[u]===0;u--)c++;if(u>=0&&c++,o=o.dblp(c),u<0)break;var f=a[u];wo(f!==0),e.type==="affine"?f>0?o=o.mixedAdd(s[f-1>>1]):o=o.mixedAdd(s[-f-1>>1].neg()):f>0?o=o.add(s[f-1>>1]):o=o.add(s[-f-1>>1].neg())}return e.type==="affine"?o.toP():o};Li.prototype._wnafMulAdd=function(e,r,i,n,s){var a=this._wnafT1,o=this._wnafT2,u=this._wnafT3,c=0,f,h,p;for(f=0;f<n;f++){p=r[f];var g=p._getNAFPoints(e);a[f]=g.wnd,o[f]=g.points}for(f=n-1;f>=1;f-=2){var y=f-1,S=f;if(a[y]!==1||a[S]!==1){u[y]=xo(i[y],a[y],this._bitLength),u[S]=xo(i[S],a[S],this._bitLength),c=Math.max(u[y].length,c),c=Math.max(u[S].length,c);continue}var B=[r[y],null,null,r[S]];r[y].y.cmp(r[S].y)===0?(B[1]=r[y].add(r[S]),B[2]=r[y].toJ().mixedAdd(r[S].neg())):r[y].y.cmp(r[S].y.redNeg())===0?(B[1]=r[y].toJ().mixedAdd(r[S]),B[2]=r[y].add(r[S].neg())):(B[1]=r[y].toJ().mixedAdd(r[S]),B[2]=r[y].toJ().mixedAdd(r[S].neg()));var I=[-3,-1,-5,-7,0,7,5,1,3],M=Um(i[y],i[S]);for(c=Math.max(M[0].length,c),u[y]=new Array(c),u[S]=new Array(c),h=0;h<c;h++){var D=M[0][h]|0,q=M[1][h]|0;u[y][h]=I[(D+1)*3+(q+1)],u[S][h]=0,o[y]=B}}var k=this.jpoint(null,null,null),O=this._wnafT4;for(f=c;f>=0;f--){for(var V=0;f>=0;){var U=!0;for(h=0;h<n;h++)O[h]=u[h][f]|0,O[h]!==0&&(U=!1);if(!U)break;V++,f--}if(f>=0&&V++,k=k.dblp(V),f<0)break;for(h=0;h<n;h++){var X=O[h];X!==0&&(X>0?p=o[h][X-1>>1]:X<0&&(p=o[h][-X-1>>1].neg()),p.type==="affine"?k=k.mixedAdd(p):k=k.add(p))}}for(f=0;f<n;f++)o[f]=null;return s?k:k.toP()};function or(t,e){this.curve=t,this.type=e,this.precomputed=null}Li.BasePoint=or;or.prototype.eq=function(){throw new Error("Not implemented")};or.prototype.validate=function(){return this.curve.validate(this)};Li.prototype.decodePoint=function(e,r){e=$s.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*i){e[0]===6?wo(e[e.length-1]%2==0):e[0]===7&&wo(e[e.length-1]%2==1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};or.prototype.encodeCompressed=function(e){return this.encode(e,!0)};or.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};or.prototype.encode=function(e,r){return $s.encode(this._encode(r),e)};or.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};or.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};or.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var a=0;a<e;a++)n=n.dbl();i.push(n)}return{step:e,points:i}};or.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}};or.prototype._getBeta=function(){return null};or.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r}});var Zs=T((NS,ic)=>{typeof Object.create=="function"?ic.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ic.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}}});var ub=T((LS,cb)=>{"use strict";var Gm=Qt(),qe=Gr(),nc=Zs(),is=Xs(),zm=Gm.assert;function fr(t){is.call(this,"short",t),this.a=new qe(t.a,16).toRed(this.red),this.b=new qe(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}nc(fr,is);cb.exports=fr;fr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new qe(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new qe(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],zm(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new qe(o.a,16),b:new qe(o.b,16)}}):a=this._getEndoBasis(i),{beta:r,lambda:i,basis:a}}};fr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:qe.mont(e),i=new qe(2).toRed(r).redInvm(),n=i.redNeg(),s=new qe(3).toRed(r).redNeg().redSqrt().redMul(i),a=n.redAdd(s).fromRed(),o=n.redSub(s).fromRed();return[a,o]};fr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new qe(1),a=new qe(0),o=new qe(0),u=new qe(1),c,f,h,p,g,y,S,B=0,I,M;i.cmpn(0)!==0;){var D=n.div(i);I=n.sub(D.mul(i)),M=o.sub(D.mul(s));var q=u.sub(D.mul(a));if(!h&&I.cmp(r)<0)c=S.neg(),f=s,h=I.neg(),p=M;else if(h&&++B==2)break;S=I,n=i,i=I,o=s,s=M,u=a,a=q}g=I.neg(),y=M;var k=h.sqr().add(p.sqr()),O=g.sqr().add(y.sqr());return O.cmp(k)>=0&&(g=c,y=f),h.negative&&(h=h.neg(),p=p.neg()),g.negative&&(g=g.neg(),y=y.neg()),[{a:h,b:p},{a:g,b:y}]};fr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),a=i.b.neg().mul(e).divRound(this.n),o=s.mul(i.a),u=a.mul(n.a),c=s.mul(i.b),f=a.mul(n.b),h=e.sub(o).sub(u),p=c.add(f).neg();return{k1:h,k2:p}};fr.prototype.pointFromX=function(e,r){e=new qe(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)};fr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};fr.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(r[a]),u=e[a],c=u._getBeta();o.k1.negative&&(o.k1.ineg(),u=u.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[a*2]=u,n[a*2+1]=c,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var f=this._wnafMulAdd(1,n,s,a*2,i),h=0;h<a*2;h++)n[h]=null,s[h]=null;return f};function Rt(t,e,r,i){is.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new qe(e,16),this.y=new qe(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}nc(Rt,is.BasePoint);fr.prototype.point=function(e,r,i){return new Rt(this,e,r,i)};fr.prototype.pointFromJSON=function(e,r){return Rt.fromJSON(this,e,r)};Rt.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}};Rt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Rt.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(o){return e.point(o[0],o[1],i)}var a=r[2];return n.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[n].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[n].concat(a.naf.points.map(s))}},n};Rt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Rt.prototype.isInfinity=function(){return this.inf};Rt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};Rt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Rt.prototype.getX=function(){return this.x.fromRed()};Rt.prototype.getY=function(){return this.y.fromRed()};Rt.prototype.mul=function(e){return e=new qe(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Rt.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)};Rt.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)};Rt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Rt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};Rt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Nt(t,e,r,i){is.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new qe(0)):(this.x=new qe(e,16),this.y=new qe(r,16),this.z=new qe(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}nc(Nt,is.BasePoint);fr.prototype.jpoint=function(e,r,i){return new Nt(this,e,r,i)};Nt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)};Nt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Nt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),a=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(i.redMul(this.z)),u=n.redSub(s),c=a.redSub(o);if(u.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=u.redSqr(),h=f.redMul(u),p=n.redMul(f),g=c.redSqr().redIAdd(h).redISub(p).redISub(p),y=c.redMul(p.redISub(g)).redISub(a.redMul(h)),S=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(g,y,S)};Nt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,a=e.y.redMul(r).redMul(this.z),o=i.redSub(n),u=s.redSub(a);if(o.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),f=c.redMul(o),h=i.redMul(c),p=u.redSqr().redIAdd(f).redISub(h).redISub(h),g=u.redMul(h.redISub(p)).redISub(s.redMul(f)),y=this.z.redMul(o);return this.curve.jpoint(p,g,y)};Nt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,u=this.z,c=u.redSqr().redSqr(),f=o.redAdd(o);for(r=0;r<e;r++){var h=a.redSqr(),p=f.redSqr(),g=p.redSqr(),y=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c)),S=a.redMul(p),B=y.redSqr().redISub(S.redAdd(S)),I=S.redISub(B),M=y.redMul(I);M=M.redIAdd(M).redISub(g);var D=f.redMul(u);r+1<e&&(c=c.redMul(g)),a=B,u=D,f=M}return this.curve.jpoint(a,f.redMul(s),u)};Nt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Nt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var u=n.redAdd(n).redIAdd(n),c=u.redSqr().redISub(o).redISub(o),f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),e=c,r=u.redMul(o.redISub(c)).redISub(f),i=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),p=this.y.redSqr(),g=p.redSqr(),y=this.x.redAdd(p).redSqr().redISub(h).redISub(g);y=y.redIAdd(y);var S=h.redAdd(h).redIAdd(h),B=S.redSqr(),I=g.redIAdd(g);I=I.redIAdd(I),I=I.redIAdd(I),e=B.redISub(y).redISub(y),r=S.redMul(y.redISub(e)).redISub(I),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)};Nt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var u=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=u.redSqr().redISub(o).redISub(o);e=c;var f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),r=u.redMul(o.redISub(c)).redISub(f),i=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),p=this.y.redSqr(),g=this.x.redMul(p),y=this.x.redSub(h).redMul(this.x.redAdd(h));y=y.redAdd(y).redIAdd(y);var S=g.redIAdd(g);S=S.redIAdd(S);var B=S.redAdd(S);e=y.redSqr().redISub(B),i=this.y.redAdd(this.z).redSqr().redISub(p).redISub(h);var I=p.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I),r=y.redMul(S.redISub(e)).redISub(I)}return this.curve.jpoint(e,r,i)};Nt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),a=r.redSqr(),o=i.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),c=r.redAdd(r);c=c.redIAdd(c);var f=c.redMul(o),h=u.redSqr().redISub(f.redAdd(f)),p=f.redISub(h),g=o.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var y=u.redMul(p).redISub(g),S=i.redAdd(i).redMul(n);return this.curve.jpoint(h,y,S)};Nt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(n);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var u=o.redSqr(),c=n.redIAdd(n);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var f=s.redIAdd(o).redSqr().redISub(a).redISub(u).redISub(c),h=r.redMul(f);h=h.redIAdd(h),h=h.redIAdd(h);var p=this.x.redMul(u).redISub(h);p=p.redIAdd(p),p=p.redIAdd(p);var g=this.y.redMul(f.redMul(c.redISub(f)).redISub(o.redMul(u)));g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var y=this.z.redAdd(o).redSqr().redISub(i).redISub(u);return this.curve.jpoint(p,g,y)};Nt.prototype.mul=function(e,r){return e=new qe(e,r),this.curve._wnafMul(this,e)};Nt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0};Nt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};Nt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Nt.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var db=T((kS,lb)=>{"use strict";var ns=Gr(),hb=Zs(),_o=Xs(),Vm=Qt();function ss(t){_o.call(this,"mont",t),this.a=new ns(t.a,16).toRed(this.red),this.b=new ns(t.b,16).toRed(this.red),this.i4=new ns(4).toRed(this.red).redInvm(),this.two=new ns(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}hb(ss,_o);lb.exports=ss;ss.prototype.validate=function(e){var r=e.normalize().x,i=r.redSqr(),n=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=n.redSqrt();return s.redSqr().cmp(n)===0};function Tt(t,e,r){_o.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new ns(e,16),this.z=new ns(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}hb(Tt,_o.BasePoint);ss.prototype.decodePoint=function(e,r){return this.point(Vm.toArray(e,r),1)};ss.prototype.point=function(e,r){return new Tt(this,e,r)};ss.prototype.pointFromJSON=function(e){return Tt.fromJSON(this,e)};Tt.prototype.precompute=function(){};Tt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Tt.fromJSON=function(e,r){return new Tt(e,r[0],r[1]||e.one)};Tt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Tt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Tt.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),s=r.redSub(n),a=r.redMul(n),o=s.redMul(n.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,o)};Tt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Tt.prototype.diffAdd=function(e,r){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),s=e.x.redAdd(e.z),a=e.x.redSub(e.z),o=a.redMul(i),u=s.redMul(n),c=r.z.redMul(o.redAdd(u).redSqr()),f=r.x.redMul(o.redISub(u).redSqr());return this.curve.point(c,f)};Tt.prototype.mul=function(e){for(var r=e.clone(),i=this,n=this.curve.point(null,null),s=this,a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var o=a.length-1;o>=0;o--)a[o]===0?(i=i.diffAdd(n,s),n=n.dbl()):(n=i.diffAdd(n,s),i=i.dbl());return n};Tt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Tt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Tt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Tt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Tt.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var yb=T((qS,bb)=>{"use strict";var jm=Qt(),ui=Gr(),pb=Zs(),So=Xs(),Hm=jm.assert;function zr(t){this.twisted=(t.a|0)!=1,this.mOneA=this.twisted&&(t.a|0)==-1,this.extended=this.mOneA,So.call(this,"edwards",t),this.a=new ui(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new ui(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new ui(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Hm(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)==1}pb(zr,So);bb.exports=zr;zr.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};zr.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};zr.prototype.jpoint=function(e,r,i,n){return this.point(e,r,i,n)};zr.prototype.pointFromX=function(e,r){e=new ui(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),a=n.redMul(s.redInvm()),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var u=o.fromRed().isOdd();return(r&&!u||!r&&u)&&(o=o.redNeg()),this.point(e,o)};zr.prototype.pointFromY=function(e,r){e=new ui(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return o.fromRed().isOdd()!==r&&(o=o.redNeg()),this.point(o,e)};zr.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),i=e.y.redSqr(),n=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return n.cmp(s)===0};function Me(t,e,r,i,n){So.BasePoint.call(this,t,"projective"),e===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ui(e,16),this.y=new ui(r,16),this.z=i?new ui(i,16):this.curve.one,this.t=n&&new ui(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}pb(Me,So.BasePoint);zr.prototype.pointFromJSON=function(e){return Me.fromJSON(this,e)};zr.prototype.point=function(e,r,i,n){return new Me(this,e,r,i,n)};Me.fromJSON=function(e,r){return new Me(e,r[0],r[1],r[2])};Me.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Me.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Me.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),a=n.redAdd(r),o=a.redSub(i),u=n.redSub(r),c=s.redMul(o),f=a.redMul(u),h=s.redMul(u),p=o.redMul(a);return this.curve.point(c,f,p,h)};Me.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),n,s,a,o,u,c;if(this.curve.twisted){o=this.curve._mulA(r);var f=o.redAdd(i);this.zOne?(n=e.redSub(r).redSub(i).redMul(f.redSub(this.curve.two)),s=f.redMul(o.redSub(i)),a=f.redSqr().redSub(f).redSub(f)):(u=this.z.redSqr(),c=f.redSub(u).redISub(u),n=e.redSub(r).redISub(i).redMul(c),s=f.redMul(o.redSub(i)),a=f.redMul(c))}else o=r.redAdd(i),u=this.curve._mulC(this.z).redSqr(),c=o.redSub(u).redSub(u),n=this.curve._mulC(e.redISub(o)).redMul(c),s=this.curve._mulC(o).redMul(r.redISub(i)),a=o.redMul(c);return this.curve.point(n,s,a)};Me.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Me.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),a=i.redSub(r),o=s.redSub(n),u=s.redAdd(n),c=i.redAdd(r),f=a.redMul(o),h=u.redMul(c),p=a.redMul(c),g=o.redMul(u);return this.curve.point(f,h,g,p)};Me.prototype._projAdd=function(e){var r=this.z.redMul(e.z),i=r.redSqr(),n=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(n).redMul(s),o=i.redSub(a),u=i.redAdd(a),c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(s),f=r.redMul(o).redMul(c),h,p;return this.curve.twisted?(h=r.redMul(u).redMul(s.redSub(this.curve._mulA(n))),p=o.redMul(u)):(h=r.redMul(u).redMul(s.redSub(n)),p=this.curve._mulC(o).redMul(u)),this.curve.point(f,h,p)};Me.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Me.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Me.prototype.mulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!1)};Me.prototype.jmulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!0)};Me.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Me.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Me.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Me.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Me.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Me.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}};Me.prototype.toP=Me.prototype.normalize;Me.prototype.mixedAdd=Me.prototype.add});var sc=T(gb=>{"use strict";var Eo=gb;Eo.base=Xs();Eo.short=ub();Eo.mont=db();Eo.edwards=yb()});var xr=T(Ie=>{"use strict";var Wm=Oi(),Ym=Zs();Ie.inherits=Ym;function Jm(t,e){return(t.charCodeAt(e)&64512)!=55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)==56320}function $m(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):Jm(t,n)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128)}else for(n=0;n<t.length;n++)r[n]=t[n]|0;return r}Ie.toArray=$m;function Xm(t){for(var e="",r=0;r<t.length;r++)e+=mb(t[r].toString(16));return e}Ie.toHex=Xm;function vb(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ie.htonl=vb;function Zm(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];e==="little"&&(n=vb(n)),r+=xb(n.toString(16))}return r}Ie.toHex32=Zm;function mb(t){return t.length===1?"0"+t:t}Ie.zero2=mb;function xb(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ie.zero8=xb;function Qm(t,e,r,i){var n=r-e;Wm(n%4==0);for(var s=new Array(n/4),a=0,o=e;a<s.length;a++,o+=4){var u;i==="big"?u=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]:u=t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o],s[a]=u>>>0}return s}Ie.join32=Qm;function e5(t,e){for(var r=new Array(t.length*4),i=0,n=0;i<t.length;i++,n+=4){var s=t[i];e==="big"?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=s&255):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=s&255)}return r}Ie.split32=e5;function t5(t,e){return t>>>e|t<<32-e}Ie.rotr32=t5;function r5(t,e){return t<<e|t>>>32-e}Ie.rotl32=r5;function i5(t,e){return t+e>>>0}Ie.sum32=i5;function n5(t,e,r){return t+e+r>>>0}Ie.sum32_3=n5;function s5(t,e,r,i){return t+e+r+i>>>0}Ie.sum32_4=s5;function a5(t,e,r,i,n){return t+e+r+i+n>>>0}Ie.sum32_5=a5;function o5(t,e,r,i){var n=t[e],s=t[e+1],a=i+s>>>0,o=(a<i?1:0)+r+n;t[e]=o>>>0,t[e+1]=a}Ie.sum64=o5;function f5(t,e,r,i){var n=e+i>>>0,s=(n<e?1:0)+t+r;return s>>>0}Ie.sum64_hi=f5;function c5(t,e,r,i){var n=e+i;return n>>>0}Ie.sum64_lo=c5;function u5(t,e,r,i,n,s,a,o){var u=0,c=e;c=c+i>>>0,u+=c<e?1:0,c=c+s>>>0,u+=c<s?1:0,c=c+o>>>0,u+=c<o?1:0;var f=t+r+n+a+u;return f>>>0}Ie.sum64_4_hi=u5;function h5(t,e,r,i,n,s,a,o){var u=e+i+s+o;return u>>>0}Ie.sum64_4_lo=h5;function l5(t,e,r,i,n,s,a,o,u,c){var f=0,h=e;h=h+i>>>0,f+=h<e?1:0,h=h+s>>>0,f+=h<s?1:0,h=h+o>>>0,f+=h<o?1:0,h=h+c>>>0,f+=h<c?1:0;var p=t+r+n+a+u+f;return p>>>0}Ie.sum64_5_hi=l5;function d5(t,e,r,i,n,s,a,o,u,c){var f=e+i+s+o+c;return f>>>0}Ie.sum64_5_lo=d5;function p5(t,e,r){var i=e<<32-r|t>>>r;return i>>>0}Ie.rotr64_hi=p5;function b5(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Ie.rotr64_lo=b5;function y5(t,e,r){return t>>>r}Ie.shr64_hi=y5;function g5(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Ie.shr64_lo=g5});var as=T(_b=>{"use strict";var wb=xr(),v5=Oi();function Io(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}_b.BlockHash=Io;Io.prototype.update=function(e,r){if(e=wb.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=wb.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this};Io.prototype.digest=function(e){return this.update(this._pad()),v5(this.pending===null),this._digest(e)};Io.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,i=r-(e+this.padLength)%r,n=new Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=e&255}else for(n[s++]=e&255,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,a=8;a<this.padLength;a++)n[s++]=0;return n}});var ac=T(hi=>{"use strict";var m5=xr(),Vr=m5.rotr32;function x5(t,e,r,i){if(t===0)return Sb(e,r,i);if(t===1||t===3)return Ib(e,r,i);if(t===2)return Eb(e,r,i)}hi.ft_1=x5;function Sb(t,e,r){return t&e^~t&r}hi.ch32=Sb;function Eb(t,e,r){return t&e^t&r^e&r}hi.maj32=Eb;function Ib(t,e,r){return t^e^r}hi.p32=Ib;function w5(t){return Vr(t,2)^Vr(t,13)^Vr(t,22)}hi.s0_256=w5;function _5(t){return Vr(t,6)^Vr(t,11)^Vr(t,25)}hi.s1_256=_5;function S5(t){return Vr(t,7)^Vr(t,18)^t>>>3}hi.g0_256=S5;function E5(t){return Vr(t,17)^Vr(t,19)^t>>>10}hi.g1_256=E5});var Bb=T((zS,Cb)=>{"use strict";var os=xr(),I5=as(),A5=ac(),oc=os.rotl32,Qs=os.sum32,C5=os.sum32_5,B5=A5.ft_1,Ab=I5.BlockHash,R5=[1518500249,1859775393,2400959708,3395469782];function jr(){if(!(this instanceof jr))return new jr;Ab.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}os.inherits(jr,Ab);Cb.exports=jr;jr.blockSize=512;jr.outSize=160;jr.hmacStrength=80;jr.padLength=64;jr.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=oc(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0],a=this.h[1],o=this.h[2],u=this.h[3],c=this.h[4];for(n=0;n<i.length;n++){var f=~~(n/20),h=C5(oc(s,5),B5(f,a,o,u),c,i[n],R5[f]);c=u,u=o,o=oc(a,30),a=s,s=h}this.h[0]=Qs(this.h[0],s),this.h[1]=Qs(this.h[1],a),this.h[2]=Qs(this.h[2],o),this.h[3]=Qs(this.h[3],u),this.h[4]=Qs(this.h[4],c)};jr.prototype._digest=function(e){return e==="hex"?os.toHex32(this.h,"big"):os.split32(this.h,"big")}});var fc=T((VS,Tb)=>{"use strict";var fs=xr(),T5=as(),cs=ac(),M5=Oi(),wr=fs.sum32,P5=fs.sum32_4,D5=fs.sum32_5,O5=cs.ch32,N5=cs.maj32,L5=cs.s0_256,k5=cs.s1_256,q5=cs.g0_256,K5=cs.g1_256,Rb=T5.BlockHash,F5=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Hr(){if(!(this instanceof Hr))return new Hr;Rb.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=F5,this.W=new Array(64)}fs.inherits(Hr,Rb);Tb.exports=Hr;Hr.blockSize=512;Hr.outSize=256;Hr.hmacStrength=192;Hr.padLength=64;Hr.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=P5(K5(i[n-2]),i[n-7],q5(i[n-15]),i[n-16]);var s=this.h[0],a=this.h[1],o=this.h[2],u=this.h[3],c=this.h[4],f=this.h[5],h=this.h[6],p=this.h[7];for(M5(this.k.length===i.length),n=0;n<i.length;n++){var g=D5(p,k5(c),O5(c,f,h),this.k[n],i[n]),y=wr(L5(s),N5(s,a,o));p=h,h=f,f=c,c=wr(u,g),u=o,o=a,a=s,s=wr(g,y)}this.h[0]=wr(this.h[0],s),this.h[1]=wr(this.h[1],a),this.h[2]=wr(this.h[2],o),this.h[3]=wr(this.h[3],u),this.h[4]=wr(this.h[4],c),this.h[5]=wr(this.h[5],f),this.h[6]=wr(this.h[6],h),this.h[7]=wr(this.h[7],p)};Hr.prototype._digest=function(e){return e==="hex"?fs.toHex32(this.h,"big"):fs.split32(this.h,"big")}});var Db=T((jS,Pb)=>{"use strict";var cc=xr(),Mb=fc();function li(){if(!(this instanceof li))return new li;Mb.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}cc.inherits(li,Mb);Pb.exports=li;li.blockSize=512;li.outSize=224;li.hmacStrength=192;li.padLength=64;li.prototype._digest=function(e){return e==="hex"?cc.toHex32(this.h.slice(0,7),"big"):cc.split32(this.h.slice(0,7),"big")}});var lc=T((HS,kb)=>{"use strict";var Yt=xr(),U5=as(),G5=Oi(),Wr=Yt.rotr64_hi,Yr=Yt.rotr64_lo,Ob=Yt.shr64_hi,Nb=Yt.shr64_lo,ki=Yt.sum64,uc=Yt.sum64_hi,hc=Yt.sum64_lo,z5=Yt.sum64_4_hi,V5=Yt.sum64_4_lo,j5=Yt.sum64_5_hi,H5=Yt.sum64_5_lo,Lb=U5.BlockHash,W5=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _r(){if(!(this instanceof _r))return new _r;Lb.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=W5,this.W=new Array(160)}Yt.inherits(_r,Lb);kb.exports=_r;_r.blockSize=1024;_r.outSize=512;_r.hmacStrength=192;_r.padLength=128;_r.prototype._prepareBlock=function(e,r){for(var i=this.W,n=0;n<32;n++)i[n]=e[r+n];for(;n<i.length;n+=2){var s=nx(i[n-4],i[n-3]),a=sx(i[n-4],i[n-3]),o=i[n-14],u=i[n-13],c=rx(i[n-30],i[n-29]),f=ix(i[n-30],i[n-29]),h=i[n-32],p=i[n-31];i[n]=z5(s,a,o,u,c,f,h,p),i[n+1]=V5(s,a,o,u,c,f,h,p)}};_r.prototype._update=function(e,r){this._prepareBlock(e,r);var i=this.W,n=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],u=this.h[4],c=this.h[5],f=this.h[6],h=this.h[7],p=this.h[8],g=this.h[9],y=this.h[10],S=this.h[11],B=this.h[12],I=this.h[13],M=this.h[14],D=this.h[15];G5(this.k.length===i.length);for(var q=0;q<i.length;q+=2){var k=M,O=D,V=ex(p,g),U=tx(p,g),X=Y5(p,g,y,S,B,I),E=J5(p,g,y,S,B,I),l=this.k[q],b=this.k[q+1],v=i[q],m=i[q+1],x=j5(k,O,V,U,X,E,l,b,v,m),C=H5(k,O,V,U,X,E,l,b,v,m);k=Z5(n,s),O=Q5(n,s),V=$5(n,s,a,o,u,c),U=X5(n,s,a,o,u,c);var A=uc(k,O,V,U),w=hc(k,O,V,U);M=B,D=I,B=y,I=S,y=p,S=g,p=uc(f,h,x,C),g=hc(h,h,x,C),f=u,h=c,u=a,c=o,a=n,o=s,n=uc(x,C,A,w),s=hc(x,C,A,w)}ki(this.h,0,n,s),ki(this.h,2,a,o),ki(this.h,4,u,c),ki(this.h,6,f,h),ki(this.h,8,p,g),ki(this.h,10,y,S),ki(this.h,12,B,I),ki(this.h,14,M,D)};_r.prototype._digest=function(e){return e==="hex"?Yt.toHex32(this.h,"big"):Yt.split32(this.h,"big")};function Y5(t,e,r,i,n){var s=t&r^~t&n;return s<0&&(s+=4294967296),s}function J5(t,e,r,i,n,s){var a=e&i^~e&s;return a<0&&(a+=4294967296),a}function $5(t,e,r,i,n){var s=t&r^t&n^r&n;return s<0&&(s+=4294967296),s}function X5(t,e,r,i,n,s){var a=e&i^e&s^i&s;return a<0&&(a+=4294967296),a}function Z5(t,e){var r=Wr(t,e,28),i=Wr(e,t,2),n=Wr(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function Q5(t,e){var r=Yr(t,e,28),i=Yr(e,t,2),n=Yr(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function ex(t,e){var r=Wr(t,e,14),i=Wr(t,e,18),n=Wr(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function tx(t,e){var r=Yr(t,e,14),i=Yr(t,e,18),n=Yr(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function rx(t,e){var r=Wr(t,e,1),i=Wr(t,e,8),n=Ob(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function ix(t,e){var r=Yr(t,e,1),i=Yr(t,e,8),n=Nb(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function nx(t,e){var r=Wr(t,e,19),i=Wr(e,t,29),n=Ob(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}function sx(t,e){var r=Yr(t,e,19),i=Yr(e,t,29),n=Nb(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}});var Fb=T((WS,Kb)=>{"use strict";var dc=xr(),qb=lc();function di(){if(!(this instanceof di))return new di;qb.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}dc.inherits(di,qb);Kb.exports=di;di.blockSize=1024;di.outSize=384;di.hmacStrength=192;di.padLength=128;di.prototype._digest=function(e){return e==="hex"?dc.toHex32(this.h.slice(0,12),"big"):dc.split32(this.h.slice(0,12),"big")}});var Ub=T(us=>{"use strict";us.sha1=Bb();us.sha224=Db();us.sha256=fc();us.sha384=Fb();us.sha512=lc()});var Wb=T(Hb=>{"use strict";var gn=xr(),ax=as(),Ao=gn.rotl32,Gb=gn.sum32,ea=gn.sum32_3,zb=gn.sum32_4,Vb=ax.BlockHash;function Jr(){if(!(this instanceof Jr))return new Jr;Vb.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}gn.inherits(Jr,Vb);Hb.ripemd160=Jr;Jr.blockSize=512;Jr.outSize=160;Jr.hmacStrength=192;Jr.padLength=64;Jr.prototype._update=function(e,r){for(var i=this.h[0],n=this.h[1],s=this.h[2],a=this.h[3],o=this.h[4],u=i,c=n,f=s,h=a,p=o,g=0;g<80;g++){var y=Gb(Ao(zb(i,jb(g,n,s,a),e[cx[g]+r],ox(g)),hx[g]),o);i=o,o=a,a=Ao(s,10),s=n,n=y,y=Gb(Ao(zb(u,jb(79-g,c,f,h),e[ux[g]+r],fx(g)),lx[g]),p),u=p,p=h,h=Ao(f,10),f=c,c=y}y=ea(this.h[1],s,h),this.h[1]=ea(this.h[2],a,p),this.h[2]=ea(this.h[3],o,u),this.h[3]=ea(this.h[4],i,c),this.h[4]=ea(this.h[0],n,f),this.h[0]=y};Jr.prototype._digest=function(e){return e==="hex"?gn.toHex32(this.h,"little"):gn.split32(this.h,"little")};function jb(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function ox(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function fx(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var cx=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ux=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],hx=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],lx=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var Jb=T(($S,Yb)=>{"use strict";var dx=xr(),px=Oi();function hs(t,e,r){if(!(this instanceof hs))return new hs(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(dx.toArray(e,r))}Yb.exports=hs;hs.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),px(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};hs.prototype.update=function(e,r){return this.inner.update(e,r),this};hs.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var Co=T($b=>{var Lt=$b;Lt.utils=xr();Lt.common=as();Lt.sha=Ub();Lt.ripemd=Wb();Lt.hmac=Jb();Lt.sha1=Lt.sha.sha1;Lt.sha256=Lt.sha.sha256;Lt.sha224=Lt.sha.sha224;Lt.sha384=Lt.sha.sha384;Lt.sha512=Lt.sha.sha512;Lt.ripemd160=Lt.ripemd.ripemd160});var Zb=T((ZS,Xb)=>{Xb.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Bo=T(ty=>{"use strict";var pc=ty,qi=Co(),bc=sc(),bx=Qt(),Qb=bx.assert;function ey(t){t.type==="short"?this.curve=new bc.short(t):t.type==="edwards"?this.curve=new bc.edwards(t):this.curve=new bc.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,Qb(this.g.validate(),"Invalid curve"),Qb(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}pc.PresetCurve=ey;function Ki(t,e){Object.defineProperty(pc,t,{configurable:!0,enumerable:!0,get:function(){var r=new ey(e);return Object.defineProperty(pc,t,{configurable:!0,enumerable:!0,value:r}),r}})}Ki("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:qi.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Ki("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:qi.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Ki("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:qi.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Ki("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:qi.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Ki("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:qi.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Ki("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:qi.sha256,gRed:!1,g:["9"]});Ki("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:qi.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var yc;try{yc=Zb()}catch(t){yc=void 0}Ki("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:qi.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",yc]})});var ny=T((eE,iy)=>{"use strict";var yx=Co(),vn=Z0(),ry=Oi();function Fi(t){if(!(this instanceof Fi))return new Fi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=vn.toArray(t.entropy,t.entropyEnc||"hex"),r=vn.toArray(t.nonce,t.nonceEnc||"hex"),i=vn.toArray(t.pers,t.persEnc||"hex");ry(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}iy.exports=Fi;Fi.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};Fi.prototype._hmac=function(){return new yx.hmac(this.hash,this.K)};Fi.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),!!e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Fi.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=vn.toArray(e,r),i=vn.toArray(i,n),ry(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};Fi.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=vn.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(i),this._reseed++,vn.encode(a,r)}});var ay=T((tE,sy)=>{"use strict";var gx=Gr(),vx=Qt(),gc=vx.assert;function Kt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}sy.exports=Kt;Kt.fromPublic=function(e,r,i){return r instanceof Kt?r:new Kt(e,{pub:r,pubEnc:i})};Kt.fromPrivate=function(e,r,i){return r instanceof Kt?r:new Kt(e,{priv:r,privEnc:i})};Kt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Kt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Kt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Kt.prototype._importPrivate=function(e,r){this.priv=new gx(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Kt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?gc(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&gc(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Kt.prototype.derive=function(e){return e.validate()||gc(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Kt.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)};Kt.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Kt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var cy=T((rE,fy)=>{"use strict";var Ro=Gr(),vc=Qt(),mx=vc.assert;function To(t,e){if(t instanceof To)return t;this._importDER(t,e)||(mx(t.r&&t.s,"Signature without r or s"),this.r=new Ro(t.r,16),this.s=new Ro(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}fy.exports=To;function xx(){this.place=0}function mc(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,s=0,a=e.place;s<i;s++,a++)n<<=8,n|=t[a],n>>>=0;return n<=127?!1:(e.place=a,n)}function oy(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}To.prototype._importDER=function(e,r){e=vc.toArray(e,r);var i=new xx;if(e[i.place++]!==48)return!1;var n=mc(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=mc(e,i);if(s===!1)return!1;var a=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var o=mc(e,i);if(o===!1||e.length!==o+i.place)return!1;var u=e.slice(i.place,o+i.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new Ro(a),this.s=new Ro(u),this.recoveryParam=null,!0};function xc(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}To.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=oy(r),i=oy(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];xc(n,r.length),n=n.concat(r),n.push(2),xc(n,i.length);var s=n.concat(i),a=[48];return xc(a,s.length),a=a.concat(s),vc.encode(a,e)}});var dy=T((iE,ly)=>{"use strict";var mn=Gr(),uy=ny(),wx=Qt(),wc=Bo(),_x=rc(),hy=wx.assert,_c=ay(),Mo=cy();function cr(t){if(!(this instanceof cr))return new cr(t);typeof t=="string"&&(hy(Object.prototype.hasOwnProperty.call(wc,t),"Unknown curve "+t),t=wc[t]),t instanceof wc.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}ly.exports=cr;cr.prototype.keyPair=function(e){return new _c(this,e)};cr.prototype.keyFromPrivate=function(e,r){return _c.fromPrivate(this,e,r)};cr.prototype.keyFromPublic=function(e,r){return _c.fromPublic(this,e,r)};cr.prototype.genKeyPair=function(e){e||(e={});for(var r=new uy({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||_x(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new mn(2));;){var s=new mn(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}};cr.prototype._truncateToN=function(e,r){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};cr.prototype.sign=function(e,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),e=this._truncateToN(new mn(e,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),o=e.toArray("be",s),u=new uy({hash:this.hash,entropy:a,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new mn(1)),f=0;;f++){var h=n.k?n.k(f):new mn(u.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(c)>=0)){var p=this.g.mul(h);if(!p.isInfinity()){var g=p.getX(),y=g.umod(this.n);if(y.cmpn(0)!==0){var S=h.invm(this.n).mul(y.mul(r.getPrivate()).iadd(e));if(S=S.umod(this.n),S.cmpn(0)!==0){var B=(p.getY().isOdd()?1:0)|(g.cmp(y)!==0?2:0);return n.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),B^=1),new Mo({r:y,s:S,recoveryParam:B})}}}}}};cr.prototype.verify=function(e,r,i,n){e=this._truncateToN(new mn(e,16)),i=this.keyFromPublic(i,n),r=new Mo(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o=a.invm(this.n),u=o.mul(e).umod(this.n),c=o.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(u,i.getPublic(),c),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(u,i.getPublic(),c),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};cr.prototype.recoverPubKey=function(t,e,r,i){hy((3&r)===r,"The recovery param is more than two bits"),e=new Mo(e,i);var n=this.n,s=new mn(t),a=e.r,o=e.s,u=r&1,c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?a=this.curve.pointFromX(a.add(this.curve.n),u):a=this.curve.pointFromX(a,u);var f=e.r.invm(n),h=n.sub(s).mul(f).umod(n),p=o.mul(f).umod(n);return this.g.mulAdd(h,a,p)};cr.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new Mo(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch(a){continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")}});var gy=T((nE,yy)=>{"use strict";var ta=Qt(),py=ta.assert,by=ta.parseBytes,ls=ta.cachedProperty;function Mt(t,e){this.eddsa=t,this._secret=by(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=by(e.pub)}Mt.fromPublic=function(e,r){return r instanceof Mt?r:new Mt(e,{pub:r})};Mt.fromSecret=function(e,r){return r instanceof Mt?r:new Mt(e,{secret:r})};Mt.prototype.secret=function(){return this._secret};ls(Mt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});ls(Mt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});ls(Mt,"privBytes",function(){var e=this.eddsa,r=this.hash(),i=e.encodingLength-1,n=r.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n});ls(Mt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});ls(Mt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});ls(Mt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Mt.prototype.sign=function(e){return py(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Mt.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Mt.prototype.getSecret=function(e){return py(this._secret,"KeyPair is public only"),ta.encode(this.secret(),e)};Mt.prototype.getPublic=function(e){return ta.encode(this.pubBytes(),e)};yy.exports=Mt});var my=T((sE,vy)=>{"use strict";var Sx=Gr(),Po=Qt(),Ex=Po.assert,Do=Po.cachedProperty,Ix=Po.parseBytes;function xn(t,e){this.eddsa=t,typeof e!="object"&&(e=Ix(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),Ex(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof Sx&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Do(xn,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Do(xn,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Do(xn,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Do(xn,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});xn.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};xn.prototype.toHex=function(){return Po.encode(this.toBytes(),"hex").toUpperCase()};vy.exports=xn});var Ey=T((aE,Sy)=>{"use strict";var Ax=Co(),Cx=Bo(),ds=Qt(),Bx=ds.assert,xy=ds.parseBytes,wy=gy(),_y=my();function Jt(t){if(Bx(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Jt))return new Jt(t);t=Cx[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=Ax.sha512}Sy.exports=Jt;Jt.prototype.sign=function(e,r){e=xy(e);var i=this.keyFromSecret(r),n=this.hashInt(i.messagePrefix(),e),s=this.g.mul(n),a=this.encodePoint(s),o=this.hashInt(a,i.pubBytes(),e).mul(i.priv()),u=n.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:u,Rencoded:a})};Jt.prototype.verify=function(e,r,i){e=xy(e),r=this.makeSignature(r);var n=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),n.pubBytes(),e),a=this.g.mul(r.S()),o=r.R().add(n.pub().mul(s));return o.eq(a)};Jt.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return ds.intFromLE(e.digest()).umod(this.curve.n)};Jt.prototype.keyFromPublic=function(e){return wy.fromPublic(this,e)};Jt.prototype.keyFromSecret=function(e){return wy.fromSecret(this,e)};Jt.prototype.makeSignature=function(e){return e instanceof _y?e:new _y(this,e)};Jt.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Jt.prototype.decodePoint=function(e){e=ds.parseBytes(e);var r=e.length-1,i=e.slice(0,r).concat(e[r]&~128),n=(e[r]&128)!=0,s=ds.intFromLE(i);return this.curve.pointFromY(s,n)};Jt.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Jt.prototype.decodeInt=function(e){return ds.intFromLE(e)};Jt.prototype.isPoint=function(e){return e instanceof this.pointClass}});var Ay=T(Iy=>{"use strict";var wn=Iy;wn.version=Q1().version;wn.utils=Qt();wn.rand=rc();wn.curve=sc();wn.curves=Bo();wn.ec=dy();wn.eddsa=Ey()});var By=T((fE,Cy)=>{var Rx=Ay().ec,$r=new Rx("secp256k1"),pe=$r.curve,Ae=pe.n.constructor;function Tx(t,e){let r=new Ae(e);if(r.cmp(pe.p)>=0)return null;r=r.toRed(pe.red);let i=r.redSqr().redIMul(r).redIAdd(pe.b).redSqrt();return t===3!==i.isOdd()&&(i=i.redNeg()),$r.keyPair({pub:{x:r,y:i}})}function Mx(t,e,r){let i=new Ae(e),n=new Ae(r);if(i.cmp(pe.p)>=0||n.cmp(pe.p)>=0||(i=i.toRed(pe.red),n=n.toRed(pe.red),(t===6||t===7)&&n.isOdd()!==(t===7)))return null;let s=i.redSqr().redIMul(i);return n.redSqr().redISub(s.redIAdd(pe.b)).isZero()?$r.keyPair({pub:{x:i,y:n}}):null}function Ui(t){let e=t[0];switch(e){case 2:case 3:return t.length!==33?null:Tx(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:Mx(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function _n(t,e){let r=e.encode(null,t.length===33);for(let i=0;i<t.length;++i)t[i]=r[i]}Cy.exports={contextRandomize(){return 0},privateKeyVerify(t){let e=new Ae(t);return e.cmp(pe.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){let e=new Ae(t),r=pe.n.sub(e).umod(pe.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){let r=new Ae(e);if(r.cmp(pe.n)>=0||(r.iadd(new Ae(t)),r.cmp(pe.n)>=0&&r.isub(pe.n),r.isZero()))return 1;let i=r.toArrayLike(Uint8Array,"be",32);return t.set(i),0},privateKeyTweakMul(t,e){let r=new Ae(e);if(r.cmp(pe.n)>=0||r.isZero())return 1;r.imul(new Ae(t)),r.cmp(pe.n)>=0&&(r=r.umod(pe.n));let i=r.toArrayLike(Uint8Array,"be",32);return t.set(i),0},publicKeyVerify(t){return Ui(t)===null?1:0},publicKeyCreate(t,e){let r=new Ae(e);if(r.cmp(pe.n)>=0||r.isZero())return 1;let i=$r.keyFromPrivate(e).getPublic();return _n(t,i),0},publicKeyConvert(t,e){let r=Ui(e);if(r===null)return 1;let i=r.getPublic();return _n(t,i),0},publicKeyNegate(t,e){let r=Ui(e);if(r===null)return 1;let i=r.getPublic();return i.y=i.y.redNeg(),_n(t,i),0},publicKeyCombine(t,e){let r=new Array(e.length);for(let n=0;n<e.length;++n)if(r[n]=Ui(e[n]),r[n]===null)return 1;let i=r[0].getPublic();for(let n=1;n<r.length;++n)i=i.add(r[n].pub);return i.isInfinity()?2:(_n(t,i),0)},publicKeyTweakAdd(t,e,r){let i=Ui(e);if(i===null)return 1;if(r=new Ae(r),r.cmp(pe.n)>=0)return 2;let n=i.getPublic().add(pe.g.mul(r));return n.isInfinity()?2:(_n(t,n),0)},publicKeyTweakMul(t,e,r){let i=Ui(e);if(i===null)return 1;if(r=new Ae(r),r.cmp(pe.n)>=0||r.isZero())return 2;let n=i.getPublic().mul(r);return _n(t,n),0},signatureNormalize(t){let e=new Ae(t.subarray(0,32)),r=new Ae(t.subarray(32,64));return e.cmp(pe.n)>=0||r.cmp(pe.n)>=0?1:(r.cmp($r.nh)===1&&t.set(pe.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){let r=e.subarray(0,32),i=e.subarray(32,64);if(new Ae(r).cmp(pe.n)>=0||new Ae(i).cmp(pe.n)>=0)return 1;let{output:n}=t,s=n.subarray(4,4+33);s[0]=0,s.set(r,1);let a=33,o=0;for(;a>1&&s[o]===0&&!(s[o+1]&128);--a,++o);if(s=s.subarray(o),s[0]&128||a>1&&s[0]===0&&!(s[1]&128))return 1;let u=n.subarray(6+33,6+33+33);u[0]=0,u.set(i,1);let c=33,f=0;for(;c>1&&u[f]===0&&!(u[f+1]&128);--c,++f);return u=u.subarray(f),u[0]&128||c>1&&u[0]===0&&!(u[1]&128)?1:(t.outputlen=6+a+c,n[0]=48,n[1]=t.outputlen-2,n[2]=2,n[3]=s.length,n.set(s,4),n[4+a]=2,n[5+a]=u.length,n.set(u,6+a),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;let r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;let i=e[5+r];if(i===0||6+r+i!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||i>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let n=e.subarray(4,4+r);if(n.length===33&&n[0]===0&&(n=n.subarray(1)),n.length>32)return 1;let s=e.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let a=new Ae(n);a.cmp(pe.n)>=0&&(a=new Ae(0));let o=new Ae(e.subarray(6+r));return o.cmp(pe.n)>=0&&(o=new Ae(0)),t.set(a.toArrayLike(Uint8Array,"be",32),0),t.set(o.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,i,n){if(n){let o=n;n=u=>{let c=o(e,r,null,i,u);if(!(c instanceof Uint8Array&&c.length===32))throw new Error("This is the way");return new Ae(c)}}let s=new Ae(r);if(s.cmp(pe.n)>=0||s.isZero())return 1;let a;try{a=$r.sign(e,r,{canonical:!0,k:n,pers:i})}catch(o){return 1}return t.signature.set(a.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(a.s.toArrayLike(Uint8Array,"be",32),32),t.recid=a.recoveryParam,0},ecdsaVerify(t,e,r){let i={r:t.subarray(0,32),s:t.subarray(32,64)},n=new Ae(i.r),s=new Ae(i.s);if(n.cmp(pe.n)>=0||s.cmp(pe.n)>=0)return 1;if(s.cmp($r.nh)===1||n.isZero()||s.isZero())return 3;let a=Ui(r);if(a===null)return 2;let o=a.getPublic();return $r.verify(e,i,o)?0:3},ecdsaRecover(t,e,r,i){let n={r:e.slice(0,32),s:e.slice(32,64)},s=new Ae(n.r),a=new Ae(n.s);if(s.cmp(pe.n)>=0||a.cmp(pe.n)>=0)return 1;if(s.isZero()||a.isZero())return 2;let o;try{o=$r.recoverPubKey(i,n,r)}catch(u){return 2}return _n(t,o),0},ecdh(t,e,r,i,n,s,a){let o=Ui(e);if(o===null)return 1;let u=new Ae(r);if(u.cmp(pe.n)>=0||u.isZero())return 2;let c=o.getPublic().mul(u);if(n===void 0){let f=c.encode(null,!0),h=$r.hash().update(f).digest();for(let p=0;p<32;++p)t[p]=h[p]}else{s||(s=new Uint8Array(32));let f=c.getX().toArray("be",32);for(let y=0;y<32;++y)s[y]=f[y];a||(a=new Uint8Array(32));let h=c.getY().toArray("be",32);for(let y=0;y<32;++y)a[y]=h[y];let p=n(s,a,i);if(!(p instanceof Uint8Array&&p.length===t.length))return 2;t.set(p)}return 0}}});var Ty=T((cE,Ry)=>{Ry.exports=Z1()(By())});var Dy=T((uE,Py)=>{"use strict";var Sr=Ty(),{sha256:My}=(en(),Ci);Py.exports=t=>{let e=32;function r(){let f;do f=t(32);while(!Sr.privateKeyVerify(f));return f}async function i(f,h){let{digest:p}=await My.digest(h),g=Sr.ecdsaSign(p,f);return Sr.signatureExport(g.signature)}async function n(f,h,p){let{digest:g}=await My.digest(p);return h=Sr.signatureImport(h),Sr.ecdsaVerify(h,g,f)}function s(f){if(!Sr.publicKeyVerify(f))throw new Error("Invalid public key");return Sr.publicKeyConvert(f,!0)}function a(f){return Sr.publicKeyConvert(f,!1)}function o(f){if(!Sr.privateKeyVerify(f))throw new Error("Invalid private key")}function u(f){if(!Sr.publicKeyVerify(f))throw new Error("Invalid public key")}function c(f){return o(f),Sr.publicKeyCreate(f)}return{generateKey:r,privateKeyLength:e,hashAndSign:i,hashAndVerify:n,compressPublicKey:s,decompressPublicKey:a,validatePrivateKey:o,validatePublicKey:u,computePublicKey:c}}});var ky=T((hE,Ly)=>{"use strict";var{sha256:Oy}=(en(),Ci),Px=Zt(),{equals:Ny}=(hn(),un),{toString:Dx}=(Dr(),Pr),Ox=ho();Ly.exports=(t,e,r)=>{r=r||Dy()(e);class i{constructor(c){r.validatePublicKey(c),this._key=c}verify(c,f){return r.hashAndVerify(this._key,f,c)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return Ny(this.bytes,c.bytes)}async hash(){let{bytes:c}=await Oy.digest(this.bytes);return c}}class n{constructor(c,f){this._key=c,this._publicKey=f||r.computePublicKey(c),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(c){return r.hashAndSign(this._key,c)}get public(){return new i(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return Ny(this.bytes,c.bytes)}async hash(){let{bytes:c}=await Oy.digest(this.bytes);return c}async id(){let c=await this.public.hash();return Dx(c,"base58btc")}async export(c,f="libp2p-key"){if(f==="libp2p-key")return Ox.export(this.bytes,c);throw Px(new Error(`export format '${f}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(u){return new n(u)}function a(u){return new i(u)}async function o(){let u=await r.generateKey();return new n(u)}return{Secp256k1PublicKey:i,Secp256k1PrivateKey:n,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:a,generateKeyPair:o}}});var Ky=T((lE,qy)=>{"use strict";qy.exports={SHA1:20,SHA256:32,SHA512:64}});var Gy=T(Uy=>{"use strict";var Fy=Vs(),Nx=Ky(),Lx={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},kx=async(t,e)=>{let r=await Fy.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};Uy.create=async function(t,e){let r=Lx[t],i=await Fy.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(n){return kx(i,n)},length:Nx[t]}}});var Wy=T((pE,Hy)=>{"use strict";var zy=Zt(),{concat:Vy}=(cn(),fn),{fromString:qx}=(br(),pr),Kx=Gy(),jy={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};Hy.exports=async(t,e,r)=>{let i=jy[t];if(!i){let M=Object.keys(jy).join(" / ");throw zy(new Error(`unknown cipher type '${t}'. Must be ${M}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw zy(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let n=i.keySize,s=i.ivSize,a=20,o=qx("key expansion"),u=2*(s+n+a),c=await Kx.create(e,r),f=await c.digest(o),h=[],p=0;for(;p<u;){let M=await c.digest(Vy([f,o])),D=M.length;p+D>u&&(D=u-p),h.push(M),p+=D,f=await c.digest(f)}let g=u/2,y=Vy(h),S=y.slice(0,g),B=y.slice(g,u),I=M=>({iv:M.slice(0,s),cipherKey:M.slice(s,s+n),macKey:M.slice(s+n)});return{k1:I(S),k2:I(B)}}});var Jy=T((bE,Yy)=>{"use strict";var Fx=Zt();Yy.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw Fx(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var t2=T(e2=>{"use strict";var Ux=Zt(),ra=Vs(),{base64urlToBuffer:$y}=uo(),Gx=Jy(),{toString:Sc}=(Dr(),Pr),{concat:zx}=(cn(),fn),{equals:Vx}=(hn(),un),Xy={"P-256":256,"P-384":384,"P-521":521};e2.generateEphmeralKeyPair=async function(t){Gx(Object.keys(Xy),t);let e=await ra.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(n,s)=>{let a;s?a=await ra.get().subtle.importKey("jwk",Hx(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):a=e.privateKey;let o=[await ra.get().subtle.importKey("jwk",Qy(t,n),{name:"ECDH",namedCurve:t},!1,[]),a],u=await ra.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:o[0]},o[1],Xy[t]);return new Uint8Array(u,u.byteOffset,u.byteLength)},i=await ra.get().subtle.exportKey("jwk",e.publicKey);return{key:jx(i),genSharedKey:r}};var Zy={"P-256":32,"P-384":48,"P-521":66};function jx(t){let e=Zy[t.crv];return zx([Uint8Array.from([4]),$y(t.x,e),$y(t.y,e)],1+e*2)}function Qy(t,e){let r=Zy[t];if(Vx(!e.slice(0,1),Uint8Array.from([4])))throw Ux(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:Sc(e.slice(1,r+1),"base64url"),y:Sc(e.slice(1+r),"base64url"),ext:!0}}var Hx=(t,e)=>({...Qy(t,e.public),d:Sc(e.private,"base64url")})});var i2=T((gE,r2)=>{"use strict";var Wx=t2();r2.exports=async t=>Wx.generateEphmeralKeyPair(t)});var Ic=T((vE,s2)=>{"use strict";var Xr=Va();jn();n1();var Ec=xe(),ia=Zt(),{fromString:Yx}=(br(),pr),Jx=c1(),ur={rsa:V1(),ed25519:$1(),secp256k1:ky()(Xr,Ma())},Oo={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function ps(t){let e=ur[t.toLowerCase()];if(!e){let r=Object.keys(ur).join(" / ");throw ia(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var $x=async(t,e)=>ps(t).generateKeyPair(e),Xx=async(t,e,r)=>{let i=ps(t);if(t.toLowerCase()!=="ed25519")throw ia(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return i.generateKeyPairFromSeed(e,r)},Zx=t=>{let e=Xr.PublicKey.decode(t),r=e.Data;switch(e.Type){case Xr.KeyType.RSA:return ur.rsa.unmarshalRsaPublicKey(r);case Xr.KeyType.Ed25519:return ur.ed25519.unmarshalEd25519PublicKey(r);case Xr.KeyType.Secp256k1:if(ur.secp256k1)return ur.secp256k1.unmarshalSecp256k1PublicKey(r);throw ia(new Error(Oo.message),Oo.code);default:ps(e.Type)}},Qx=(t,e)=>(e=(e||"rsa").toLowerCase(),ps(e),t.bytes),n2=async t=>{let e=Xr.PrivateKey.decode(t),r=e.Data;switch(e.Type){case Xr.KeyType.RSA:return ur.rsa.unmarshalRsaPrivateKey(r);case Xr.KeyType.Ed25519:return ur.ed25519.unmarshalEd25519PrivateKey(r);case Xr.KeyType.Secp256k1:if(ur.secp256k1)return ur.secp256k1.unmarshalSecp256k1PrivateKey(r);throw ia(new Error(Oo.message),Oo.code);default:ps(e.Type)}},ew=(t,e)=>(e=(e||"rsa").toLowerCase(),ps(e),t.bytes),tw=async(t,e)=>{try{let n=await Jx.import(t,e);return n2(n)}catch(n){}let r=Ec.pki.decryptRsaPrivateKey(t,e);if(r===null)throw ia(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let i=Ec.asn1.toDer(Ec.pki.privateKeyToAsn1(r));return i=Yx(i.getBytes(),"ascii"),ur.rsa.unmarshalRsaPrivateKey(i)};s2.exports={supportedKeys:ur,keysPBM:Xr,keyStretcher:Wy(),generateEphemeralKeyPair:i2(),generateKeyPair:$x,generateKeyPairFromSeed:Xx,unmarshalPublicKey:Zx,marshalPublicKey:Qx,unmarshalPrivateKey:n2,marshalPrivateKey:ew,import:tw}});var a2=T((mE,Ac)=>{"use strict";function rw(t,{className:e,symbolName:r}){let i=Symbol.for(r),n={[e]:class extends t{constructor(...s){super(...s);Object.defineProperty(this,i,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return n[`is${e}`]=s=>!!(s&&s[i]),n}function iw(t,{className:e,symbolName:r,withoutNew:i}){let n=Symbol.for(r),s={[e]:function(...a){if(i&&!(this instanceof s))return new s(...a);let o=t.call(this,...a)||this;return o&&!o[n]&&Object.defineProperty(o,n,{value:!0}),o}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return e}}),s[`is${e}`]=a=>!!(a&&a[n]),s}Ac.exports=rw;Ac.exports.proto=iw});var c2=T((xE,f2)=>{"use strict";var bs=Pn(),o2=bs.Reader,nw=bs.Writer,_t=bs.util,na=bs.roots["libp2p-peer-id"]||(bs.roots["libp2p-peer-id"]={});na.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.id=_t.newBuffer([]),t.prototype.pubKey=_t.newBuffer([]),t.prototype.privKey=_t.newBuffer([]),t.encode=function(r,i){return i||(i=nw.create()),i.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&i.uint32(26).bytes(r.privKey),i},t.decode=function(r,i){r instanceof o2||(r=o2.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new na.PeerIdProto;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.id=r.bytes();break;case 2:s.pubKey=r.bytes();break;case 3:s.privKey=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("id"))throw _t.ProtocolError("missing required 'id'",{instance:s});return s},t.fromObject=function(r){if(r instanceof na.PeerIdProto)return r;var i=new na.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?_t.base64.decode(r.id,i.id=_t.newBuffer(_t.base64.length(r.id)),0):r.id.length&&(i.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?_t.base64.decode(r.pubKey,i.pubKey=_t.newBuffer(_t.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?_t.base64.decode(r.privKey,i.privKey=_t.newBuffer(_t.base64.length(r.privKey)),0):r.privKey.length&&(i.privKey=r.privKey)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.id="":(n.id=[],i.bytes!==Array&&(n.id=_t.newBuffer(n.id))),i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=_t.newBuffer(n.pubKey))),i.bytes===String?n.privKey="":(n.privKey=[],i.bytes!==Array&&(n.privKey=_t.newBuffer(n.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(n.id=i.bytes===String?_t.base64.encode(r.id,0,r.id.length):i.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?_t.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(n.privKey=i.bytes===String?_t.base64.encode(r.privKey,0,r.privKey.length):i.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,bs.util.toJSONOptions)},t}();f2.exports=na});var ys=T((Ft,g2)=>{"use strict";var{CID:Cc}=(h0(),Ld),sw=(Rs(),Bs),aw=(o0(),Na),ow=(Fn(),Kn),fw=(Ts(),Un),{base58btc:Bc}=(Fn(),Kn),{base32:cw}=(Rs(),Bs),{base16:u2}=(a0(),Oa),sa=(Os(),ka),Zr=Ic(),uw=a2(),{PeerIdProto:h2}=c2(),{equals:Sn}=(hn(),un),{fromString:aa}=(br(),pr),{toString:hw}=(Dr(),Pr),{identity:No}=(Ka(),Ls),l2={...sw,...aw,...ow,...fw},lw=Object.keys(l2).reduce((t,e)=>t.or(l2[e]),cw.decoder),dw=112,d2=114,p2=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&i&&!Sn(r.public.bytes,i.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=Bc.encode(this.id).substring(1),this._privKey=r,this._pubKey=i}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=sa.decode(this.id);e.code===No.code&&(this._pubKey=Zr.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return Zr.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return Zr.marshalPrivateKey(this.privKey)}marshal(e){return h2.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:y2(this.marshalPrivKey()),pubKey:y2(this.marshalPubKey())}}toHexString(){return u2.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=Cc.createV1(d2,sa.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return Sn(this.id,e);if(e.id)return Sn(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&Sn(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(sa.decode(this.id).code===No.code)return!0}catch(e){}return!1}},Qr=uw(p2,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});Ft=g2.exports=Qr;var oa=t=>t.bytes.length<=42?sa.create(No.code,t.bytes).bytes:t.hash(),Rc=async(t,e)=>{let r=await oa(e);return new Qr(r,t,e)};Ft.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await Zr.generateKeyPair(t.keyType,t.bits);return Rc(e,e.public)};Ft.createFromHexString=t=>new Qr(u2.decode("f"+t));Ft.createFromBytes=t=>{try{let e=Cc.decode(t);if(!b2(e))throw new Error("Supplied PeerID CID is invalid");return Ft.createFromCID(e)}catch{if(sa.decode(t).code!==No.code)throw new Error("Supplied PeerID CID is invalid");return new Qr(t)}};Ft.createFromB58String=t=>Ft.createFromBytes(Bc.decode("z"+t));var b2=t=>t.code===d2||t.code===dw;Ft.createFromCID=t=>{if(t=Cc.asCID(t),!t||!b2(t))throw new Error("Supplied PeerID CID is invalid");return new Qr(t.multihash.bytes)};Ft.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=aa(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await Zr.unmarshalPublicKey(e);return Rc(void 0,r)};Ft.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=aa(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await Zr.unmarshalPrivateKey(t);return Rc(e,e.public)};Ft.createFromJSON=async t=>{let e=Bc.decode("z"+t.id),r=t.privKey&&aa(t.privKey,"base64pad"),i=t.pubKey&&aa(t.pubKey,"base64pad"),n=i&&await Zr.unmarshalPublicKey(i);if(!r)return new Qr(e,void 0,n);let s=await Zr.unmarshalPrivateKey(r),a=await oa(s.public),o;if(n&&(o=await oa(n)),n&&!Sn(a,o))throw new Error("Public and private key do not match");if(e&&!Sn(a,e))throw new Error("Id and private key do not match");return new Qr(e,s,n)};Ft.createFromProtobuf=async t=>{typeof t=="string"&&(t=aa(t,"base16"));let{id:e,privKey:r,pubKey:i}=h2.decode(t);r=r?await Zr.unmarshalPrivateKey(r):!1,i=i?await Zr.unmarshalPublicKey(i):!1;let n,s;if(r&&(s=await oa(r.public)),i&&(n=await oa(i)),r){if(i&&!Sn(s,n))throw new Error("Public and private key do not match");return new Qr(s,r,r.public)}if(i)return new Qr(n,void 0,i);if(e)return new Qr(e);throw new Error("Protobuf did not contain any usable key material")};Ft.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),Ft.createFromBytes(lw.decode(t)));Ft.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function y2(t){if(t)return hw(t,"base64pad")}});var Tc=T((wE,x2)=>{"use strict";var pw=Ma(),{toString:bw}=(Dr(),Pr),{fromString:v2}=(br(),pr),m2=ys(),{sha256:yw}=(en(),Ci),gw=()=>pw(8),vw=(t,e)=>{let r;t instanceof Uint8Array?r=m2.createFromBytes(t).id:r=m2.parse(t).id;let i=new Uint8Array(r.length+e.length);return i.set(r,0),i.set(e,r.length),i},mw=t=>yw.encode(t),xw=(t,e)=>{let r;Array.isArray(e)?r=i=>e.indexOf(i)>-1:r=i=>e.has(i);for(let i of t)if(r(i))return!0;return!1},ww=t=>Array.isArray(t)?t:[t],_w=(t,e)=>{let r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=bw(t.from,"base58btc")),e&&(r.receivedFrom=e),r},Sw=t=>{let e=Object.assign({},t);return typeof t.from=="string"&&(e.from=v2(t.from,"base58btc")),typeof t.data=="string"&&(e.data=v2(t.data)),e};x2.exports={randomSeqno:gw,msgId:vw,noSignMsgId:mw,anyMatch:xw,ensureArray:ww,normalizeInRpcMessage:_w,normalizeOutRpcMessage:Sw}});var I2=T((_E,E2)=>{"use strict";var Mc=ys(),{RPC:w2}=Of(),{concat:_2}=(cn(),fn),{fromString:Ew}=(br(),pr),Pc=Ew("libp2p-pubsub:"),{normalizeOutRpcMessage:Iw}=Tc();async function Aw(t,e){let r=_2([Pc,w2.Message.encode(Iw(e)).finish()]),i=await t.privKey.sign(r);return{...e,signature:i,key:t.pubKey.bytes}}async function Cw(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");let e=_2([Pc,w2.Message.encode({...t,from:Mc.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await S2(t)).verify(e,t.signature)}async function S2(t){if(!t.from)throw new Error("Could not get the public key from the originator id");let e=Mc.createFromB58String(t.from);if(t.key){let r=await Mc.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}else{if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}}E2.exports={messagePublicKey:S2,signMessage:Aw,SignPrefix:Pc,verifySignature:Cw}});var R2=T((SE,B2)=>{"use strict";var A2=pa(),{EventEmitter:Bw}=gf(),$t=Zt(),{pipe:Rw}=mf(),Tw=qu(),{codes:Er}=va(),{RPC:C2}=Of(),Mw=sd(),{SignaturePolicy:pi}=od(),Gi=Tc(),{signMessage:Pw,verifySignature:Dw}=I2(),Lo=class extends Bw{constructor({debugName:e,multicodecs:r,libp2p:i,globalSignaturePolicy:n=pi.StrictSign,canRelayMessage:s=!1,emitSelf:a=!1}){if(typeof e!="string")throw new Error("a debugname `string` is required");if(!r)throw new Error("multicodecs are required");if(!i)throw new Error("libp2p is required");super();if(this.log=Object.assign(A2(e),{err:A2(`${e}:error`)}),this.multicodecs=Gi.ensureArray(r),this._libp2p=i,this.registrar=i.registrar,this.peerId=i.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!pi[n])throw $t(new Error("Invalid global signature policy"),Er.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=n,this.canRelayMessage=s,this.emitSelf=a,this.topicValidators=new Map,this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);let e=new Tw({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=this.registrar.register(e),this.log("started"),this.started=!0}stop(){!this.started||(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach(e=>e.close()),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:e,stream:r,connection:i}){let n=i.remotePeer,s=n.toB58String(),a=this._addPeer(n,e),o=a.attachInboundStream(r);this._processMessages(s,o,a)}async _onPeerConnected(e,r){let i=e.toB58String();this.log("connected",i);try{let{stream:n,protocol:s}=await r.newStream(this.multicodecs);await this._addPeer(e,s).attachOutboundStream(n)}catch(n){this.log.err(n)}this._sendSubscriptions(i,Array.from(this.subscriptions),!0)}_onPeerDisconnected(e,r){let i=e.toB58String();this.log("connection ended",i,r?r.message:""),this._removePeer(e)}_addPeer(e,r){let i=e.toB58String(),n=this.peers.get(i);if(n)return n;this.log("new peer",i);let s=new Mw({id:e,protocol:r});return this.peers.set(i,s),s.once("close",()=>this._removePeer(e)),s}_removePeer(e){if(!e)return;let r=e.toB58String(),i=this.peers.get(r);if(!!i){i.removeAllListeners(),i.close(),this.log("delete peer",r),this.peers.delete(r);for(let n of this.topics.values())n.delete(r);return i}}async _processMessages(e,r,i){try{await Rw(r,async n=>{for await(let s of n){let a=s instanceof Uint8Array?s:s.slice(),o=this._decodeRpc(a);await this._processRpc(e,i,o)}})}catch(n){this._onPeerDisconnected(i.id,n)}}async _processRpc(e,r,i){this.log("rpc from",e);let n=i.subscriptions,s=i.msgs;if(n.length&&(n.forEach(a=>{this._processRpcSubOpt(e,a)}),this.emit("pubsub:subscription-change",r.id,n)),!this._acceptFrom(e))return this.log("received message from unacceptable peer %s",e),!1;if(s.length)for(let a of s){if(!(this.canRelayMessage||a.topicIDs&&a.topicIDs.some(u=>this.subscriptions.has(u)))){this.log("received message we didn't subscribe to. Dropping.");continue}let o=Gi.normalizeInRpcMessage(a,e);await this._processRpcMessage(o)}return!0}_processRpcSubOpt(e,r){let i=r.topicID;if(!i)return;let n=this.topics.get(i);n||(n=new Set,this.topics.set(i,n)),r.subscribe?n.add(e):n.delete(e)}async _processRpcMessage(e){if(!(this.peerId.toB58String()===e.from&&!this.emitSelf)){try{await this.validate(e)}catch(r){this.log("Message is invalid, dropping it. %O",r);return}return this._emitMessage(e),this._publish(Gi.normalizeOutRpcMessage(e))}}_emitMessage(e){e.topicIDs.forEach(r=>{this.subscriptions.has(r)&&this.emit(r,e)})}getMsgId(e){let r=this.globalSignaturePolicy;switch(r){case pi.StrictSign:return Gi.msgId(e.from,e.seqno);case pi.StrictNoSign:return Gi.noSignMsgId(e.data);default:throw $t(new Error("Cannot get message id: unhandled signature policy: "+r),Er.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(e){return!0}_decodeRpc(e){return C2.decode(e)}_encodeRpc(e){return C2.encode(e).finish()}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable){let n=`Cannot send RPC to ${e} as there is no open stream to it available`;this.log.err(n);return}i.write(this._encodeRpc(r))}_sendSubscriptions(e,r,i){return this._sendRpc(e,{subscriptions:r.map(n=>({topicID:n,subscribe:i}))})}async validate(e){let r=this.globalSignaturePolicy;switch(r){case pi.StrictNoSign:if(e.from)throw $t(new Error("StrictNoSigning: from should not be present"),Er.ERR_UNEXPECTED_FROM);if(e.signature)throw $t(new Error("StrictNoSigning: signature should not be present"),Er.ERR_UNEXPECTED_SIGNATURE);if(e.key)throw $t(new Error("StrictNoSigning: key should not be present"),Er.ERR_UNEXPECTED_KEY);if(e.seqno)throw $t(new Error("StrictNoSigning: seqno should not be present"),Er.ERR_UNEXPECTED_SEQNO);break;case pi.StrictSign:if(!e.signature)throw $t(new Error("StrictSigning: Signing required and no signature was present"),Er.ERR_MISSING_SIGNATURE);if(!e.seqno)throw $t(new Error("StrictSigning: Signing required and no seqno was present"),Er.ERR_MISSING_SEQNO);if(!await Dw(e))throw $t(new Error("StrictSigning: Invalid message signature"),Er.ERR_INVALID_SIGNATURE);break;default:throw $t(new Error("Cannot validate message: unhandled signature policy: "+r),Er.ERR_UNHANDLED_SIGNATURE_POLICY)}for(let i of e.topicIDs){let n=this.topicValidators.get(i);n&&await n(i,e)}}_buildMessage(e){let r=this.globalSignaturePolicy;switch(r){case pi.StrictSign:return e.from=this.peerId.toB58String(),e.seqno=Gi.randomSeqno(),Pw(this.peerId,e);case pi.StrictNoSign:return Promise.resolve(e);default:throw $t(new Error("Cannot build message: unhandled signature policy: "+r),Er.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw $t(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!e||typeof e!="string")throw $t(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");let r=this.topics.get(e);return r?Array.from(r):[]}async publish(e,r){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",e,r);let n={receivedFrom:this.peerId.toB58String(),data:r,topicIDs:[e]},s=await this._buildMessage(n),a=Gi.normalizeInRpcMessage(s);this.emitSelf&&this._emitMessage(a),await this._publish(a)}_publish(e){throw $t(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(e)||(this.subscriptions.add(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!0)))}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(e)&&this.listenerCount(e)===0&&(this.subscriptions.delete(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!1)))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}};Lo.utils=Gi;Lo.SignaturePolicy=pi;B2.exports=Lo});var T2=T(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.createGossipRpc=void 0;function Ow(t=[],e={}){return{subscriptions:[],msgs:t,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},e)}}ko.createGossipRpc=Ow});var M2=T(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.shuffle=void 0;function Nw(t){if(t.length<=1)return t;let e=()=>Math.floor(Math.random()*Math.floor(t.length));for(let r=0;r<t.length;r++){let i=e(),n=t[r];t[r]=t[i],t[i]=n}return t}qo.shuffle=Nw});var En=T(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.ERR_TOPIC_VALIDATOR_IGNORE=G.ERR_TOPIC_VALIDATOR_REJECT=G.TimeCacheDuration=G.GossipsubSeenTTL=G.GossipsubIWantFollowupTime=G.GossipsubMaxIHaveMessages=G.GossipsubMaxIHaveLength=G.GossipsubGraftFloodThreshold=G.GossipsubOpportunisticGraftPeers=G.GossipsubOpportunisticGraftTicks=G.GossipsubDirectConnectInitialDelay=G.GossipsubDirectConnectTicks=G.GossipsubConnectionTimeout=G.GossipsubMaxPendingConnections=G.GossipsubConnectors=G.GossipsubPruneBackoffTicks=G.GossipsubPruneBackoff=G.GossipsubPrunePeers=G.GossipsubFanoutTTL=G.GossipsubHeartbeatInterval=G.GossipsubHeartbeatInitialDelay=G.GossipsubGossipRetransmission=G.GossipsubGossipFactor=G.GossipsubDlazy=G.GossipsubHistoryGossip=G.GossipsubHistoryLength=G.GossipsubDout=G.GossipsubDscore=G.GossipsubDhi=G.GossipsubDlo=G.GossipsubD=G.GossipsubIDv11=G.GossipsubIDv10=G.FloodsubID=G.minute=G.second=void 0;G.second=1e3;G.minute=60*G.second;G.FloodsubID="/floodsub/1.0.0";G.GossipsubIDv10="/meshsub/1.0.0";G.GossipsubIDv11="/meshsub/1.1.0";G.GossipsubD=6;G.GossipsubDlo=4;G.GossipsubDhi=12;G.GossipsubDscore=4;G.GossipsubDout=2;G.GossipsubHistoryLength=5;G.GossipsubHistoryGossip=3;G.GossipsubDlazy=6;G.GossipsubGossipFactor=.25;G.GossipsubGossipRetransmission=3;G.GossipsubHeartbeatInitialDelay=100;G.GossipsubHeartbeatInterval=G.second;G.GossipsubFanoutTTL=G.minute;G.GossipsubPrunePeers=16;G.GossipsubPruneBackoff=G.minute;G.GossipsubPruneBackoffTicks=15;G.GossipsubConnectors=8;G.GossipsubMaxPendingConnections=128;G.GossipsubConnectionTimeout=30*G.second;G.GossipsubDirectConnectTicks=300;G.GossipsubDirectConnectInitialDelay=G.second;G.GossipsubOpportunisticGraftTicks=60;G.GossipsubOpportunisticGraftPeers=2;G.GossipsubGraftFloodThreshold=10*G.second;G.GossipsubMaxIHaveLength=5e3;G.GossipsubMaxIHaveMessages=10;G.GossipsubIWantFollowupTime=3*G.second;G.GossipsubSeenTTL=30*G.second;G.TimeCacheDuration=120*1e3;G.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT";G.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE"});var D2=T(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.hasGossipProtocol=void 0;var P2=En();function Lw(t){return t===P2.GossipsubIDv10||t===P2.GossipsubIDv11}Ko.hasGossipProtocol=Lw});var O2=T(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.messageIdToString=void 0;var kw=(Dr(),Pr);function qw(t){return kw.toString(t,"base64")}Fo.messageIdToString=qw});var In=T(ei=>{"use strict";var Kw=ei&&ei.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Uo=ei&&ei.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Kw(e,t,r)};Object.defineProperty(ei,"__esModule",{value:!0});Uo(T2(),ei);Uo(M2(),ei);Uo(D2(),ei);Uo(O2(),ei)});var L2=T(gs=>{"use strict";var Fw=gs&&gs.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(i.next(f))}catch(h){a(h)}}function u(f){try{c(i.throw(f))}catch(h){a(h)}}function c(f){f.done?s(f.value):n(f.value).then(o,u)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(gs,"__esModule",{value:!0});gs.MessageCache=void 0;var Go=In(),N2=class{constructor(e,r,i){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let n=0;n<r;n++)this.history[n]=[];this.gossip=e,this.msgIdFn=i}put(e){return Fw(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=Go.messageIdToString(r);this.msgs.set(i,e),this.history[0].push({msgID:r,topics:e.topicIDs})})}getMsgId(e){return this.msgIdFn(e)}get(e){return this.msgs.get(Go.messageIdToString(e))}getForPeer(e,r){let i=Go.messageIdToString(e),n=this.msgs.get(i);if(!n)return[void 0,0];let s=this.peertx.get(i);s||(s=new Map,this.peertx.set(i,s));let a=(s.get(r)||0)+1;return s.set(r,a),[n,a]}getGossipIDs(e){let r=[];for(let i=0;i<this.gossip;i++)this.history[i].forEach(n=>{for(let s of n.topics)if(s===e){r.push(n.msgID);break}});return r}shift(){this.history[this.history.length-1].forEach(r=>{let i=Go.messageIdToString(r.msgID);this.msgs.delete(i),this.peertx.delete(i)}),this.history.pop(),this.history.unshift([])}};gs.MessageCache=N2});var q2=T((k2,fa)=>{(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof hu=="function"&&typeof fa=="object"&&fa&&fa.exports&&(fa.exports=e(Pn()))})(k2,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots.default||(t.roots.default={});return n.RPC=function(){function s(o){if(this.subscriptions=[],this.msgs=[],o)for(var u=Object.keys(o),c=0;c<u.length;++c)o[u[c]]!=null&&(this[u[c]]=o[u[c]])}s.prototype.subscriptions=i.emptyArray,s.prototype.msgs=i.emptyArray,s.prototype.control=null;var a;return Object.defineProperty(s.prototype,"_control",{get:i.oneOfGetter(a=["control"]),set:i.oneOfSetter(a)}),s.encode=function(u,c){if(c||(c=r.create()),u.subscriptions!=null&&u.subscriptions.length)for(var f=0;f<u.subscriptions.length;++f)n.RPC.SubOpts.encode(u.subscriptions[f],c.uint32(10).fork()).ldelim();if(u.msgs!=null&&u.msgs.length)for(var f=0;f<u.msgs.length;++f)n.RPC.Message.encode(u.msgs[f],c.uint32(18).fork()).ldelim();return u.control!=null&&Object.hasOwnProperty.call(u,"control")&&n.RPC.ControlMessage.encode(u.control,c.uint32(26).fork()).ldelim(),c},s.decode=function(u,c){u instanceof e||(u=e.create(u));for(var f=c===void 0?u.len:u.pos+c,h=new n.RPC;u.pos<f;){var p=u.uint32();switch(p>>>3){case 1:h.subscriptions&&h.subscriptions.length||(h.subscriptions=[]),h.subscriptions.push(n.RPC.SubOpts.decode(u,u.uint32()));break;case 2:h.msgs&&h.msgs.length||(h.msgs=[]),h.msgs.push(n.RPC.Message.decode(u,u.uint32()));break;case 3:h.control=n.RPC.ControlMessage.decode(u,u.uint32());break;default:u.skipType(p&7);break}}return h},s.fromObject=function(u){if(u instanceof n.RPC)return u;var c=new n.RPC;if(u.subscriptions){if(!Array.isArray(u.subscriptions))throw TypeError(".RPC.subscriptions: array expected");c.subscriptions=[];for(var f=0;f<u.subscriptions.length;++f){if(typeof u.subscriptions[f]!="object")throw TypeError(".RPC.subscriptions: object expected");c.subscriptions[f]=n.RPC.SubOpts.fromObject(u.subscriptions[f])}}if(u.msgs){if(!Array.isArray(u.msgs))throw TypeError(".RPC.msgs: array expected");c.msgs=[];for(var f=0;f<u.msgs.length;++f){if(typeof u.msgs[f]!="object")throw TypeError(".RPC.msgs: object expected");c.msgs[f]=n.RPC.Message.fromObject(u.msgs[f])}}if(u.control!=null){if(typeof u.control!="object")throw TypeError(".RPC.control: object expected");c.control=n.RPC.ControlMessage.fromObject(u.control)}return c},s.toObject=function(u,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.subscriptions=[],f.msgs=[]),u.subscriptions&&u.subscriptions.length){f.subscriptions=[];for(var h=0;h<u.subscriptions.length;++h)f.subscriptions[h]=n.RPC.SubOpts.toObject(u.subscriptions[h],c)}if(u.msgs&&u.msgs.length){f.msgs=[];for(var h=0;h<u.msgs.length;++h)f.msgs[h]=n.RPC.Message.toObject(u.msgs[h],c)}return u.control!=null&&u.hasOwnProperty("control")&&(f.control=n.RPC.ControlMessage.toObject(u.control,c),c.oneofs&&(f._control="control")),f},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s.SubOpts=function(){function o(c){if(c)for(var f=Object.keys(c),h=0;h<f.length;++h)c[f[h]]!=null&&(this[f[h]]=c[f[h]])}o.prototype.subscribe=null,o.prototype.topicID=null;var u;return Object.defineProperty(o.prototype,"_subscribe",{get:i.oneOfGetter(u=["subscribe"]),set:i.oneOfSetter(u)}),Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(u=["topicID"]),set:i.oneOfSetter(u)}),o.encode=function(f,h){return h||(h=r.create()),f.subscribe!=null&&Object.hasOwnProperty.call(f,"subscribe")&&h.uint32(8).bool(f.subscribe),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&h.uint32(18).string(f.topicID),h},o.decode=function(f,h){f instanceof e||(f=e.create(f));for(var p=h===void 0?f.len:f.pos+h,g=new n.RPC.SubOpts;f.pos<p;){var y=f.uint32();switch(y>>>3){case 1:g.subscribe=f.bool();break;case 2:g.topicID=f.string();break;default:f.skipType(y&7);break}}return g},o.fromObject=function(f){if(f instanceof n.RPC.SubOpts)return f;var h=new n.RPC.SubOpts;return f.subscribe!=null&&(h.subscribe=Boolean(f.subscribe)),f.topicID!=null&&(h.topicID=String(f.topicID)),h},o.toObject=function(f,h){h||(h={});var p={};return f.subscribe!=null&&f.hasOwnProperty("subscribe")&&(p.subscribe=f.subscribe,h.oneofs&&(p._subscribe="subscribe")),f.topicID!=null&&f.hasOwnProperty("topicID")&&(p.topicID=f.topicID,h.oneofs&&(p._topicID="topicID")),p},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.Message=function(){function o(c){if(this.topicIDs=[],c)for(var f=Object.keys(c),h=0;h<f.length;++h)c[f[h]]!=null&&(this[f[h]]=c[f[h]])}o.prototype.from=null,o.prototype.data=null,o.prototype.seqno=null,o.prototype.topicIDs=i.emptyArray,o.prototype.signature=null,o.prototype.key=null;var u;return Object.defineProperty(o.prototype,"_from",{get:i.oneOfGetter(u=["from"]),set:i.oneOfSetter(u)}),Object.defineProperty(o.prototype,"_data",{get:i.oneOfGetter(u=["data"]),set:i.oneOfSetter(u)}),Object.defineProperty(o.prototype,"_seqno",{get:i.oneOfGetter(u=["seqno"]),set:i.oneOfSetter(u)}),Object.defineProperty(o.prototype,"_signature",{get:i.oneOfGetter(u=["signature"]),set:i.oneOfSetter(u)}),Object.defineProperty(o.prototype,"_key",{get:i.oneOfGetter(u=["key"]),set:i.oneOfSetter(u)}),o.encode=function(f,h){if(h||(h=r.create()),f.from!=null&&Object.hasOwnProperty.call(f,"from")&&h.uint32(10).bytes(f.from),f.data!=null&&Object.hasOwnProperty.call(f,"data")&&h.uint32(18).bytes(f.data),f.seqno!=null&&Object.hasOwnProperty.call(f,"seqno")&&h.uint32(26).bytes(f.seqno),f.topicIDs!=null&&f.topicIDs.length)for(var p=0;p<f.topicIDs.length;++p)h.uint32(34).string(f.topicIDs[p]);return f.signature!=null&&Object.hasOwnProperty.call(f,"signature")&&h.uint32(42).bytes(f.signature),f.key!=null&&Object.hasOwnProperty.call(f,"key")&&h.uint32(50).bytes(f.key),h},o.decode=function(f,h){f instanceof e||(f=e.create(f));for(var p=h===void 0?f.len:f.pos+h,g=new n.RPC.Message;f.pos<p;){var y=f.uint32();switch(y>>>3){case 1:g.from=f.bytes();break;case 2:g.data=f.bytes();break;case 3:g.seqno=f.bytes();break;case 4:g.topicIDs&&g.topicIDs.length||(g.topicIDs=[]),g.topicIDs.push(f.string());break;case 5:g.signature=f.bytes();break;case 6:g.key=f.bytes();break;default:f.skipType(y&7);break}}return g},o.fromObject=function(f){if(f instanceof n.RPC.Message)return f;var h=new n.RPC.Message;if(f.from!=null&&(typeof f.from=="string"?i.base64.decode(f.from,h.from=i.newBuffer(i.base64.length(f.from)),0):f.from.length&&(h.from=f.from)),f.data!=null&&(typeof f.data=="string"?i.base64.decode(f.data,h.data=i.newBuffer(i.base64.length(f.data)),0):f.data.length&&(h.data=f.data)),f.seqno!=null&&(typeof f.seqno=="string"?i.base64.decode(f.seqno,h.seqno=i.newBuffer(i.base64.length(f.seqno)),0):f.seqno.length&&(h.seqno=f.seqno)),f.topicIDs){if(!Array.isArray(f.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");h.topicIDs=[];for(var p=0;p<f.topicIDs.length;++p)h.topicIDs[p]=String(f.topicIDs[p])}return f.signature!=null&&(typeof f.signature=="string"?i.base64.decode(f.signature,h.signature=i.newBuffer(i.base64.length(f.signature)),0):f.signature.length&&(h.signature=f.signature)),f.key!=null&&(typeof f.key=="string"?i.base64.decode(f.key,h.key=i.newBuffer(i.base64.length(f.key)),0):f.key.length&&(h.key=f.key)),h},o.toObject=function(f,h){h||(h={});var p={};if((h.arrays||h.defaults)&&(p.topicIDs=[]),f.from!=null&&f.hasOwnProperty("from")&&(p.from=h.bytes===String?i.base64.encode(f.from,0,f.from.length):h.bytes===Array?Array.prototype.slice.call(f.from):f.from,h.oneofs&&(p._from="from")),f.data!=null&&f.hasOwnProperty("data")&&(p.data=h.bytes===String?i.base64.encode(f.data,0,f.data.length):h.bytes===Array?Array.prototype.slice.call(f.data):f.data,h.oneofs&&(p._data="data")),f.seqno!=null&&f.hasOwnProperty("seqno")&&(p.seqno=h.bytes===String?i.base64.encode(f.seqno,0,f.seqno.length):h.bytes===Array?Array.prototype.slice.call(f.seqno):f.seqno,h.oneofs&&(p._seqno="seqno")),f.topicIDs&&f.topicIDs.length){p.topicIDs=[];for(var g=0;g<f.topicIDs.length;++g)p.topicIDs[g]=f.topicIDs[g]}return f.signature!=null&&f.hasOwnProperty("signature")&&(p.signature=h.bytes===String?i.base64.encode(f.signature,0,f.signature.length):h.bytes===Array?Array.prototype.slice.call(f.signature):f.signature,h.oneofs&&(p._signature="signature")),f.key!=null&&f.hasOwnProperty("key")&&(p.key=h.bytes===String?i.base64.encode(f.key,0,f.key.length):h.bytes===Array?Array.prototype.slice.call(f.key):f.key,h.oneofs&&(p._key="key")),p},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlMessage=function(){function o(u){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],u)for(var c=Object.keys(u),f=0;f<c.length;++f)u[c[f]]!=null&&(this[c[f]]=u[c[f]])}return o.prototype.ihave=i.emptyArray,o.prototype.iwant=i.emptyArray,o.prototype.graft=i.emptyArray,o.prototype.prune=i.emptyArray,o.encode=function(c,f){if(f||(f=r.create()),c.ihave!=null&&c.ihave.length)for(var h=0;h<c.ihave.length;++h)n.RPC.ControlIHave.encode(c.ihave[h],f.uint32(10).fork()).ldelim();if(c.iwant!=null&&c.iwant.length)for(var h=0;h<c.iwant.length;++h)n.RPC.ControlIWant.encode(c.iwant[h],f.uint32(18).fork()).ldelim();if(c.graft!=null&&c.graft.length)for(var h=0;h<c.graft.length;++h)n.RPC.ControlGraft.encode(c.graft[h],f.uint32(26).fork()).ldelim();if(c.prune!=null&&c.prune.length)for(var h=0;h<c.prune.length;++h)n.RPC.ControlPrune.encode(c.prune[h],f.uint32(34).fork()).ldelim();return f},o.decode=function(c,f){c instanceof e||(c=e.create(c));for(var h=f===void 0?c.len:c.pos+f,p=new n.RPC.ControlMessage;c.pos<h;){var g=c.uint32();switch(g>>>3){case 1:p.ihave&&p.ihave.length||(p.ihave=[]),p.ihave.push(n.RPC.ControlIHave.decode(c,c.uint32()));break;case 2:p.iwant&&p.iwant.length||(p.iwant=[]),p.iwant.push(n.RPC.ControlIWant.decode(c,c.uint32()));break;case 3:p.graft&&p.graft.length||(p.graft=[]),p.graft.push(n.RPC.ControlGraft.decode(c,c.uint32()));break;case 4:p.prune&&p.prune.length||(p.prune=[]),p.prune.push(n.RPC.ControlPrune.decode(c,c.uint32()));break;default:c.skipType(g&7);break}}return p},o.fromObject=function(c){if(c instanceof n.RPC.ControlMessage)return c;var f=new n.RPC.ControlMessage;if(c.ihave){if(!Array.isArray(c.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");f.ihave=[];for(var h=0;h<c.ihave.length;++h){if(typeof c.ihave[h]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");f.ihave[h]=n.RPC.ControlIHave.fromObject(c.ihave[h])}}if(c.iwant){if(!Array.isArray(c.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");f.iwant=[];for(var h=0;h<c.iwant.length;++h){if(typeof c.iwant[h]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");f.iwant[h]=n.RPC.ControlIWant.fromObject(c.iwant[h])}}if(c.graft){if(!Array.isArray(c.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");f.graft=[];for(var h=0;h<c.graft.length;++h){if(typeof c.graft[h]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");f.graft[h]=n.RPC.ControlGraft.fromObject(c.graft[h])}}if(c.prune){if(!Array.isArray(c.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");f.prune=[];for(var h=0;h<c.prune.length;++h){if(typeof c.prune[h]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");f.prune[h]=n.RPC.ControlPrune.fromObject(c.prune[h])}}return f},o.toObject=function(c,f){f||(f={});var h={};if((f.arrays||f.defaults)&&(h.ihave=[],h.iwant=[],h.graft=[],h.prune=[]),c.ihave&&c.ihave.length){h.ihave=[];for(var p=0;p<c.ihave.length;++p)h.ihave[p]=n.RPC.ControlIHave.toObject(c.ihave[p],f)}if(c.iwant&&c.iwant.length){h.iwant=[];for(var p=0;p<c.iwant.length;++p)h.iwant[p]=n.RPC.ControlIWant.toObject(c.iwant[p],f)}if(c.graft&&c.graft.length){h.graft=[];for(var p=0;p<c.graft.length;++p)h.graft[p]=n.RPC.ControlGraft.toObject(c.graft[p],f)}if(c.prune&&c.prune.length){h.prune=[];for(var p=0;p<c.prune.length;++p)h.prune[p]=n.RPC.ControlPrune.toObject(c.prune[p],f)}return h},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlIHave=function(){function o(c){if(this.messageIDs=[],c)for(var f=Object.keys(c),h=0;h<f.length;++h)c[f[h]]!=null&&(this[f[h]]=c[f[h]])}o.prototype.topicID=null,o.prototype.messageIDs=i.emptyArray;var u;return Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(u=["topicID"]),set:i.oneOfSetter(u)}),o.encode=function(f,h){if(h||(h=r.create()),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&h.uint32(10).string(f.topicID),f.messageIDs!=null&&f.messageIDs.length)for(var p=0;p<f.messageIDs.length;++p)h.uint32(18).bytes(f.messageIDs[p]);return h},o.decode=function(f,h){f instanceof e||(f=e.create(f));for(var p=h===void 0?f.len:f.pos+h,g=new n.RPC.ControlIHave;f.pos<p;){var y=f.uint32();switch(y>>>3){case 1:g.topicID=f.string();break;case 2:g.messageIDs&&g.messageIDs.length||(g.messageIDs=[]),g.messageIDs.push(f.bytes());break;default:f.skipType(y&7);break}}return g},o.fromObject=function(f){if(f instanceof n.RPC.ControlIHave)return f;var h=new n.RPC.ControlIHave;if(f.topicID!=null&&(h.topicID=String(f.topicID)),f.messageIDs){if(!Array.isArray(f.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");h.messageIDs=[];for(var p=0;p<f.messageIDs.length;++p)typeof f.messageIDs[p]=="string"?i.base64.decode(f.messageIDs[p],h.messageIDs[p]=i.newBuffer(i.base64.length(f.messageIDs[p])),0):f.messageIDs[p].length&&(h.messageIDs[p]=f.messageIDs[p])}return h},o.toObject=function(f,h){h||(h={});var p={};if((h.arrays||h.defaults)&&(p.messageIDs=[]),f.topicID!=null&&f.hasOwnProperty("topicID")&&(p.topicID=f.topicID,h.oneofs&&(p._topicID="topicID")),f.messageIDs&&f.messageIDs.length){p.messageIDs=[];for(var g=0;g<f.messageIDs.length;++g)p.messageIDs[g]=h.bytes===String?i.base64.encode(f.messageIDs[g],0,f.messageIDs[g].length):h.bytes===Array?Array.prototype.slice.call(f.messageIDs[g]):f.messageIDs[g]}return p},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlIWant=function(){function o(u){if(this.messageIDs=[],u)for(var c=Object.keys(u),f=0;f<c.length;++f)u[c[f]]!=null&&(this[c[f]]=u[c[f]])}return o.prototype.messageIDs=i.emptyArray,o.encode=function(c,f){if(f||(f=r.create()),c.messageIDs!=null&&c.messageIDs.length)for(var h=0;h<c.messageIDs.length;++h)f.uint32(10).bytes(c.messageIDs[h]);return f},o.decode=function(c,f){c instanceof e||(c=e.create(c));for(var h=f===void 0?c.len:c.pos+f,p=new n.RPC.ControlIWant;c.pos<h;){var g=c.uint32();switch(g>>>3){case 1:p.messageIDs&&p.messageIDs.length||(p.messageIDs=[]),p.messageIDs.push(c.bytes());break;default:c.skipType(g&7);break}}return p},o.fromObject=function(c){if(c instanceof n.RPC.ControlIWant)return c;var f=new n.RPC.ControlIWant;if(c.messageIDs){if(!Array.isArray(c.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");f.messageIDs=[];for(var h=0;h<c.messageIDs.length;++h)typeof c.messageIDs[h]=="string"?i.base64.decode(c.messageIDs[h],f.messageIDs[h]=i.newBuffer(i.base64.length(c.messageIDs[h])),0):c.messageIDs[h].length&&(f.messageIDs[h]=c.messageIDs[h])}return f},o.toObject=function(c,f){f||(f={});var h={};if((f.arrays||f.defaults)&&(h.messageIDs=[]),c.messageIDs&&c.messageIDs.length){h.messageIDs=[];for(var p=0;p<c.messageIDs.length;++p)h.messageIDs[p]=f.bytes===String?i.base64.encode(c.messageIDs[p],0,c.messageIDs[p].length):f.bytes===Array?Array.prototype.slice.call(c.messageIDs[p]):c.messageIDs[p]}return h},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlGraft=function(){function o(c){if(c)for(var f=Object.keys(c),h=0;h<f.length;++h)c[f[h]]!=null&&(this[f[h]]=c[f[h]])}o.prototype.topicID=null;var u;return Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(u=["topicID"]),set:i.oneOfSetter(u)}),o.encode=function(f,h){return h||(h=r.create()),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&h.uint32(10).string(f.topicID),h},o.decode=function(f,h){f instanceof e||(f=e.create(f));for(var p=h===void 0?f.len:f.pos+h,g=new n.RPC.ControlGraft;f.pos<p;){var y=f.uint32();switch(y>>>3){case 1:g.topicID=f.string();break;default:f.skipType(y&7);break}}return g},o.fromObject=function(f){if(f instanceof n.RPC.ControlGraft)return f;var h=new n.RPC.ControlGraft;return f.topicID!=null&&(h.topicID=String(f.topicID)),h},o.toObject=function(f,h){h||(h={});var p={};return f.topicID!=null&&f.hasOwnProperty("topicID")&&(p.topicID=f.topicID,h.oneofs&&(p._topicID="topicID")),p},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlPrune=function(){function o(c){if(this.peers=[],c)for(var f=Object.keys(c),h=0;h<f.length;++h)c[f[h]]!=null&&(this[f[h]]=c[f[h]])}o.prototype.topicID=null,o.prototype.peers=i.emptyArray,o.prototype.backoff=null;var u;return Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(u=["topicID"]),set:i.oneOfSetter(u)}),Object.defineProperty(o.prototype,"_backoff",{get:i.oneOfGetter(u=["backoff"]),set:i.oneOfSetter(u)}),o.encode=function(f,h){if(h||(h=r.create()),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&h.uint32(10).string(f.topicID),f.peers!=null&&f.peers.length)for(var p=0;p<f.peers.length;++p)n.RPC.PeerInfo.encode(f.peers[p],h.uint32(18).fork()).ldelim();return f.backoff!=null&&Object.hasOwnProperty.call(f,"backoff")&&h.uint32(24).uint64(f.backoff),h},o.decode=function(f,h){f instanceof e||(f=e.create(f));for(var p=h===void 0?f.len:f.pos+h,g=new n.RPC.ControlPrune;f.pos<p;){var y=f.uint32();switch(y>>>3){case 1:g.topicID=f.string();break;case 2:g.peers&&g.peers.length||(g.peers=[]),g.peers.push(n.RPC.PeerInfo.decode(f,f.uint32()));break;case 3:g.backoff=f.uint64();break;default:f.skipType(y&7);break}}return g},o.fromObject=function(f){if(f instanceof n.RPC.ControlPrune)return f;var h=new n.RPC.ControlPrune;if(f.topicID!=null&&(h.topicID=String(f.topicID)),f.peers){if(!Array.isArray(f.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");h.peers=[];for(var p=0;p<f.peers.length;++p){if(typeof f.peers[p]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");h.peers[p]=n.RPC.PeerInfo.fromObject(f.peers[p])}}return f.backoff!=null&&(i.Long?(h.backoff=i.Long.fromValue(f.backoff)).unsigned=!0:typeof f.backoff=="string"?h.backoff=parseInt(f.backoff,10):typeof f.backoff=="number"?h.backoff=f.backoff:typeof f.backoff=="object"&&(h.backoff=new i.LongBits(f.backoff.low>>>0,f.backoff.high>>>0).toNumber(!0))),h},o.toObject=function(f,h){h||(h={});var p={};if((h.arrays||h.defaults)&&(p.peers=[]),f.topicID!=null&&f.hasOwnProperty("topicID")&&(p.topicID=f.topicID,h.oneofs&&(p._topicID="topicID")),f.peers&&f.peers.length){p.peers=[];for(var g=0;g<f.peers.length;++g)p.peers[g]=n.RPC.PeerInfo.toObject(f.peers[g],h)}return f.backoff!=null&&f.hasOwnProperty("backoff")&&(typeof f.backoff=="number"?p.backoff=h.longs===String?String(f.backoff):f.backoff:p.backoff=h.longs===String?i.Long.prototype.toString.call(f.backoff):h.longs===Number?new i.LongBits(f.backoff.low>>>0,f.backoff.high>>>0).toNumber(!0):f.backoff,h.oneofs&&(p._backoff="backoff")),p},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.PeerInfo=function(){function o(c){if(c)for(var f=Object.keys(c),h=0;h<f.length;++h)c[f[h]]!=null&&(this[f[h]]=c[f[h]])}o.prototype.peerID=null,o.prototype.signedPeerRecord=null;var u;return Object.defineProperty(o.prototype,"_peerID",{get:i.oneOfGetter(u=["peerID"]),set:i.oneOfSetter(u)}),Object.defineProperty(o.prototype,"_signedPeerRecord",{get:i.oneOfGetter(u=["signedPeerRecord"]),set:i.oneOfSetter(u)}),o.encode=function(f,h){return h||(h=r.create()),f.peerID!=null&&Object.hasOwnProperty.call(f,"peerID")&&h.uint32(10).bytes(f.peerID),f.signedPeerRecord!=null&&Object.hasOwnProperty.call(f,"signedPeerRecord")&&h.uint32(18).bytes(f.signedPeerRecord),h},o.decode=function(f,h){f instanceof e||(f=e.create(f));for(var p=h===void 0?f.len:f.pos+h,g=new n.RPC.PeerInfo;f.pos<p;){var y=f.uint32();switch(y>>>3){case 1:g.peerID=f.bytes();break;case 2:g.signedPeerRecord=f.bytes();break;default:f.skipType(y&7);break}}return g},o.fromObject=function(f){if(f instanceof n.RPC.PeerInfo)return f;var h=new n.RPC.PeerInfo;return f.peerID!=null&&(typeof f.peerID=="string"?i.base64.decode(f.peerID,h.peerID=i.newBuffer(i.base64.length(f.peerID)),0):f.peerID.length&&(h.peerID=f.peerID)),f.signedPeerRecord!=null&&(typeof f.signedPeerRecord=="string"?i.base64.decode(f.signedPeerRecord,h.signedPeerRecord=i.newBuffer(i.base64.length(f.signedPeerRecord)),0):f.signedPeerRecord.length&&(h.signedPeerRecord=f.signedPeerRecord)),h},o.toObject=function(f,h){h||(h={});var p={};return f.peerID!=null&&f.hasOwnProperty("peerID")&&(p.peerID=h.bytes===String?i.base64.encode(f.peerID,0,f.peerID.length):h.bytes===Array?Array.prototype.slice.call(f.peerID):f.peerID,h.oneofs&&(p._peerID="peerID")),f.signedPeerRecord!=null&&f.hasOwnProperty("signedPeerRecord")&&(p.signedPeerRecord=h.bytes===String?i.base64.encode(f.signedPeerRecord,0,f.signedPeerRecord.length):h.bytes===Array?Array.prototype.slice.call(f.signedPeerRecord):f.signedPeerRecord,h.oneofs&&(p._signedPeerRecord="signedPeerRecord")),p},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s}(),n})});var Dc=T(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.getGossipPeers=void 0;var K2=In();function Uw(t,e,r,i=()=>!0){let n=t.topics.get(e);if(!n)return new Set;let s=[];return n.forEach(a=>{let o=t.peers.get(a);!o||K2.hasGossipProtocol(o.protocol)&&i(a)&&s.push(a)}),s=K2.shuffle(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}zo.getGossipPeers=Uw});var U2=T(ti=>{"use strict";var Gw=ti&&ti.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),zw=ti&&ti.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vw=ti&&ti.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gw(e,t,r);return zw(e,t),e};Object.defineProperty(ti,"__esModule",{value:!0});ti.Heartbeat=void 0;var Oc=Vw(En()),Vo=Dc(),jw=In(),F2=class{constructor(e){this.gossipsub=e}start(){if(this._heartbeatTimer)return;let e=this._heartbeat.bind(this),r=setTimeout(()=>{e(),this._heartbeatTimer.runPeriodically(e,this.gossipsub._options.heartbeatInterval)},Oc.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(i,n)=>{this._heartbeatTimer._intervalId=setInterval(i,n)},cancel:()=>{clearTimeout(r),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){!this._heartbeatTimer||(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){let{D:e,Dlo:r,Dhi:i,Dscore:n,Dout:s,fanoutTTL:a}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;let o=new Map,u=g=>{let y=o.get(g);return y===void 0&&(y=this.gossipsub.score.score(g),o.set(g,y)),y},c=new Map,f=new Map,h=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach((g,y)=>{let S=I=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",I,y),this.gossipsub.score.prune(I,y),this.gossipsub._addBackoff(I,y),g.delete(I);let M=f.get(I);M?M.push(y):f.set(I,[y])},B=I=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",I,y),this.gossipsub.score.graft(I,y),g.add(I);let M=c.get(I);M?M.push(y):c.set(I,[y])};if(g.forEach(I=>{let M=u(I);M<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",I,M,y),S(I),h.set(I,!0))}),g.size<r){let I=this.gossipsub.backoff.get(y),M=e-g.size;Vo.getGossipPeers(this.gossipsub,y,M,q=>!g.has(q)&&!this.gossipsub.direct.has(q)&&(!I||!I.has(q))&&u(q)>=0).forEach(B)}if(g.size>i){let I=Array.from(g);I.sort((D,q)=>u(q)-u(D)),I=I.slice(0,n).concat(jw.shuffle(I.slice(n)));let M=0;if(I.slice(0,e).forEach(D=>{this.gossipsub.outbound.get(D)&&M++}),M<s){let D=k=>{let O=I[k];for(let V=k;V>0;V--)I[V]=I[V-1];I[0]=O};if(M>0){let k=M;for(let O=1;O<e&&k>0;O++)this.gossipsub.outbound.get(I[O])&&(D(O),k--)}let q=e-M;for(let k=e;k<I.length&&q>0;k++)this.gossipsub.outbound.get(I[k])&&(D(k),q--)}I.slice(e).forEach(S)}if(g.size>=r){let I=0;if(g.forEach(M=>{this.gossipsub.outbound.get(M)&&I++}),I<s){let M=s-I,D=this.gossipsub.backoff.get(y);Vo.getGossipPeers(this.gossipsub,y,M,q=>!g.has(q)&&!this.gossipsub.direct.has(q)&&(!D||!D.has(q))&&u(q)>=0).forEach(B)}}if(this.gossipsub.heartbeatTicks%Oc.GossipsubOpportunisticGraftTicks==0&&g.size>1){let I=Array.from(g).sort((q,k)=>u(q)-u(k)),M=Math.floor(g.size/2),D=u(I[M]);if(D<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){let q=this.gossipsub.backoff.get(y);Vo.getGossipPeers(this.gossipsub,y,Oc.GossipsubOpportunisticGraftPeers,O=>g.has(O)&&!this.gossipsub.direct.has(O)&&(!q||!q.has(O))&&u(O)>D).forEach(O=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",O,y),B(O)})}}this.gossipsub._emitGossip(y,g)});let p=this.gossipsub._now();this.gossipsub.lastpub.forEach((g,y)=>{g+a<p&&(this.gossipsub.fanout.delete(y),this.gossipsub.lastpub.delete(y))}),this.gossipsub.fanout.forEach((g,y)=>{let S=this.gossipsub.topics.get(y);if(g.forEach(B=>{(!S.has(B)||u(B)<this.gossipsub._options.scoreThresholds.publishThreshold)&&g.delete(B)}),g.size<e){let B=e-g.size;Vo.getGossipPeers(this.gossipsub,y,B,M=>!g.has(M)&&!this.gossipsub.direct.has(M)&&u(M)>=this.gossipsub._options.scoreThresholds.publishThreshold).forEach(M=>{g.add(M)})}this.gossipsub._emitGossip(y,g)}),this.gossipsub._sendGraftPrune(c,f,h),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}};ti.Heartbeat=F2});var Nc=T(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.ERR_INVALID_PEER_SCORE_THRESHOLDS=vs.ERR_INVALID_PEER_SCORE_PARAMS=void 0;vs.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS";vs.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"});var Lc=T(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.validateTopicScoreParams=Ut.validatePeerScoreParams=Ut.createTopicScoreParams=Ut.createPeerScoreParams=Ut.defaultTopicScoreParams=Ut.defaultPeerScoreParams=void 0;var Ce=Nc(),Be=Zt();Ut.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3};Ut.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function Hw(t={}){return Object.assign(Object.assign(Object.assign({},Ut.defaultPeerScoreParams),t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=G2(i),e),{}):{}})}Ut.createPeerScoreParams=Hw;function G2(t={}){return Object.assign(Object.assign({},Ut.defaultTopicScoreParams),t)}Ut.createTopicScoreParams=G2;function Ww(t){for(let[e,r]of Object.entries(t.topics))try{z2(r)}catch(i){throw Be(new Error(`invalid score parameters for topic ${e}: ${i.message}`),Ce.ERR_INVALID_PEER_SCORE_PARAMS)}if(t.topicScoreCap<0)throw Be(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.appSpecificScore===null||t.appSpecificScore===void 0)throw Be(new Error("missing application specific score function"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight>0)throw Be(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight!==0&&t.IPColocationFactorThreshold<1)throw Be(new Error("invalid IPColocationFactorThreshold; must be at least 1"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight>0)throw Be(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight!==0&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw Be(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayInterval<1e3)throw Be(new Error("invalid DecayInterval; must be at least 1s"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayToZero<=0||t.decayToZero>=1)throw Be(new Error("invalid DecayToZero; must be between 0 and 1"),Ce.ERR_INVALID_PEER_SCORE_PARAMS)}Ut.validatePeerScoreParams=Ww;function z2(t){if(t.topicWeight<0)throw Be(new Error("invalid topic weight; must be >= 0"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshQuantum===0)throw Be(new Error("invalid TimeInMeshQuantum; must be non zero"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight<0)throw Be(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshQuantum<=0)throw Be(new Error("invalid TimeInMeshQuantum; must be positive"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshCap<=0)throw Be(new Error("invalid TimeInMeshCap; must be positive"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight<0)throw Be(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw Be(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&t.firstMessageDeliveriesCap<=0)throw Be(new Error("invalid FirstMessageDeliveriesCap; must be positive"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight>0)throw Be(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw Be(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesCap<=0)throw Be(new Error("invalid MeshMessageDeliveriesCap; must be positive"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesThreshold<=0)throw Be(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWindow<0)throw Be(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesActivation<1e3)throw Be(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight>0)throw Be(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight!==0&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw Be(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesWeight>0)throw Be(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),Ce.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw Be(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),Ce.ERR_INVALID_PEER_SCORE_PARAMS)}Ut.validateTopicScoreParams=z2});var V2=T(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.validatePeerScoreThresholds=bi.createPeerScoreThresholds=bi.defaultPeerScoreThresholds=void 0;var ca=Nc(),ua=Zt();bi.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function Yw(t={}){return Object.assign(Object.assign({},bi.defaultPeerScoreThresholds),t)}bi.createPeerScoreThresholds=Yw;function Jw(t){if(t.gossipThreshold>0)throw ua(new Error("invalid gossip threshold; it must be <= 0"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.publishThreshold>0||t.publishThreshold>t.gossipThreshold)throw ua(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.graylistThreshold>0||t.graylistThreshold>t.publishThreshold)throw ua(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.acceptPXThreshold<0)throw ua(new Error("invalid accept PX threshold; it must be >= 0"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.opportunisticGraftThreshold<0)throw ua(new Error("invalid opportunistic grafting threshold; it must be >= 0"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS)}bi.validatePeerScoreThresholds=Jw});var j2=T(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.ensureTopicStats=zi.createTopicStats=zi.createPeerStats=void 0;function $w(t={}){return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=kc(i),e),{}):{}})}zi.createPeerStats=$w;function kc(t={}){return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},t)}zi.createTopicStats=kc;function Xw(t,e,r){let i=e.topics[t];if(i)return i;if(!!r.topics[t])return e.topics[t]=i=kc(),i}zi.ensureTopicStats=Xw});var H2=T(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.computeScore=void 0;function Zw(t,e,r,i){let n=0;return Object.entries(e.topics).forEach(([o,u])=>{let c=r.topics[o];if(!c)return;let f=0;if(u.inMesh){let y=u.meshTime/c.timeInMeshQuantum;y>c.timeInMeshCap&&(y=c.timeInMeshCap),f+=y*c.timeInMeshWeight}if(f+=u.firstMessageDeliveries*c.firstMessageDeliveriesWeight,u.meshMessageDeliveriesActive&&u.meshMessageDeliveries<c.meshMessageDeliveriesThreshold){let y=c.meshMessageDeliveriesThreshold-u.meshMessageDeliveries;f+=y*y*c.meshMessageDeliveriesWeight}f+=u.meshFailurePenalty*c.meshFailurePenaltyWeight,f+=u.invalidMessageDeliveries*u.invalidMessageDeliveries*c.invalidMessageDeliveriesWeight,n+=f*c.topicWeight}),r.topicScoreCap>0&&n>r.topicScoreCap&&(n=r.topicScoreCap),n+=r.appSpecificScore(t)*r.appSpecificWeight,e.ips.forEach(o=>{if(r.IPColocationFactorWhitelist.has(o))return;let u=i.get(o),c=u?u.size:0;if(c>r.IPColocationFactorThreshold){let f=c-r.IPColocationFactorThreshold;n+=f*f*r.IPColocationFactorWeight}}),n+=e.behaviourPenalty*e.behaviourPenalty*r.behaviourPenaltyWeight,n}jo.computeScore=Zw});var Y2=T((qE,W2)=>{"use strict";function Ke(t,e){var e=e||{};this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}Ke.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};Ke.prototype.get=function(e){return this.peekAt(e)};Ke.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};Ke.prototype.peekFront=function(){return this.peek()};Ke.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(Ke.prototype,"length",{get:function(){return this.size()}});Ke.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Ke.prototype.unshift=function(e){if(e===void 0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Ke.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};Ke.prototype.push=function(e){if(e===void 0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Ke.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),i}};Ke.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],a;if(e<i/2){for(a=e;a>0;a--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=i-1-e;a>0;a--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};Ke.prototype.remove=function(e,r){var i=e,n,s=r;if(i===(i|0)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(i>=a||i<-a||r<1)){if(i<0&&(i+=a),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=a)return n=this.toArray(),this.clear(),n;i+r>a&&(r=a-i);var u;for(n=new Array(r),u=0;u<r;u++)n[u]=this._list[this._head+i+u&this._capacityMask];if(i=this._head+i&this._capacityMask,e+r===a){for(this._tail=this._tail-r+o&this._capacityMask,u=r;u>0;u--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(e===0){for(this._head=this._head+r+o&this._capacityMask,u=r-1;u>0;u--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(i<a/2){for(this._head=this._head+e+r+o&this._capacityMask,u=e;u>0;u--)this.unshift(this._list[i=i-1+o&this._capacityMask]);for(i=this._head-1+o&this._capacityMask;s>0;)this._list[i=i-1+o&this._capacityMask]=void 0,s--;e<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+o&this._capacityMask,u=a-(r+e);u>0;u--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),n}}};Ke.prototype.splice=function(e,r){var i=e;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,a,o,u=arguments.length,c=this._list.length,f=2;if(!n||i<n/2){for(a=new Array(i),s=0;s<i;s++)a[s]=this._list[this._head+s&this._capacityMask];for(r===0?(o=[],i>0&&(this._head=this._head+i+c&this._capacityMask)):(o=this.remove(i,r),this._head=this._head+i+c&this._capacityMask);u>f;)this.unshift(arguments[--u]);for(s=i;s>0;s--)this.unshift(a[s-1])}else{a=new Array(n-(i+r));var h=a.length;for(s=0;s<h;s++)a[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(o=[],i!=n&&(this._tail=this._head+i+c&this._capacityMask)):(o=this.remove(i,r),this._tail=this._tail-h+c&this._capacityMask);f<u;)this.push(arguments[f++]);for(s=0;s<h;s++)this.push(a[s])}return o}else return this.remove(i,r)}};Ke.prototype.clear=function(){this._head=0,this._tail=0};Ke.prototype.isEmpty=function(){return this._head===this._tail};Ke.prototype.toArray=function(){return this._copyArray(!1)};Ke.prototype._fromArray=function(e){for(var r=0;r<e.length;r++)this.push(e[r])};Ke.prototype._copyArray=function(e){var r=[],i=this._list,n=i.length,s;if(e||this._head>this._tail){for(s=this._head;s<n;s++)r.push(i[s]);for(s=0;s<this._tail;s++)r.push(i[s])}else for(s=this._head;s<this._tail;s++)r.push(i[s]);return r};Ke.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};Ke.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};W2.exports=Ke});var X2=T(yi=>{"use strict";var Qw=yi&&yi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yi,"__esModule",{value:!0});yi.MessageDeliveries=yi.DeliveryRecordStatus=void 0;var e9=En(),t9=Qw(Y2()),r9=In(),J2;(function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"})(J2=yi.DeliveryRecordStatus||(yi.DeliveryRecordStatus={}));var $2=class{constructor(){this.records=new Map,this.queue=new t9.default}ensureRecord(e){let r=r9.messageIdToString(e),i=this.records.get(r);if(i)return i;i={status:J2.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(r,i);let n={msgId:r,expire:Date.now()+e9.TimeCacheDuration};return this.queue.push(n),i}gc(){let e=Date.now(),r=this.queue.peekFront();for(;r&&r.expire<e;)this.records.delete(r.msgId),this.queue.shift(),r=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}};yi.MessageDeliveries=$2});var Q2=T(Vi=>{"use strict";var Ho=Vi&&Vi.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(i.next(f))}catch(h){a(h)}}function u(f){try{c(i.throw(f))}catch(h){a(h)}}function c(f){f.done?s(f.value):n(f.value).then(o,u)}c((i=i.apply(t,e||[])).next())})},i9=Vi&&Vi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.PeerScore=void 0;var n9=Lc(),ms=j2(),s9=H2(),Ir=X2(),a9=En(),o9=i9(ys()),f9=pa(),c9=va(),{ERR_INVALID_SIGNATURE:u9,ERR_MISSING_SIGNATURE:h9}=c9.codes,xs=f9("libp2p:gossipsub:score"),Z2=class{constructor(e,r,i){n9.validatePeerScoreParams(e),this.params=e,this._connectionManager=r,this.peerStats=new Map,this.peerIPs=new Map,this.deliveryRecords=new Ir.MessageDeliveries,this.msgId=i}start(){if(this._backgroundInterval){xs("Peer score already running");return}this._backgroundInterval=setInterval(()=>this.background(),this.params.decayInterval),xs("started")}stop(){if(!this._backgroundInterval){xs("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),xs("stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){let e=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((i,n)=>{if(!i.connected){e>i.expire&&(this._removeIPs(n,i.ips),this.peerStats.delete(n));return}Object.entries(i.topics).forEach(([s,a])=>{let o=this.params.topics[s];!o||(a.firstMessageDeliveries*=o.firstMessageDeliveriesDecay,a.firstMessageDeliveries<r&&(a.firstMessageDeliveries=0),a.meshMessageDeliveries*=o.meshMessageDeliveriesDecay,a.meshMessageDeliveries<r&&(a.meshMessageDeliveries=0),a.meshFailurePenalty*=o.meshFailurePenaltyDecay,a.meshFailurePenalty<r&&(a.meshFailurePenalty=0),a.invalidMessageDeliveries*=o.invalidMessageDeliveriesDecay,a.invalidMessageDeliveries<r&&(a.invalidMessageDeliveries=0),a.inMesh&&(a.meshTime=e-a.graftTime,a.meshTime>o.meshMessageDeliveriesActivation&&(a.meshMessageDeliveriesActive=!0)))}),i.behaviourPenalty*=this.params.behaviourPenaltyDecay,i.behaviourPenalty<r&&(i.behaviourPenalty=0)})}score(e){let r=this.peerStats.get(e);return r?s9.computeScore(e,r,this.params,this.peerIPs):0}addPenalty(e,r){let i=this.peerStats.get(e);!i||(i.behaviourPenalty+=r)}addPeer(e){let r=ms.createPeerStats({connected:!0});this.peerStats.set(e,r);let i=this._getIPs(e);this._setIPs(e,i,r.ips),r.ips=i}removePeer(e){let r=this.peerStats.get(e);if(!!r){if(this.score(e)>0){this._removeIPs(e,r.ips),this.peerStats.delete(e);return}Object.entries(r.topics).forEach(([i,n])=>{n.firstMessageDeliveries=0;let s=this.params.topics[i].meshMessageDeliveriesThreshold;if(n.inMesh&&n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let a=s-n.meshMessageDeliveries;n.meshFailurePenalty+=a*a}n.inMesh=!1}),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}graft(e,r){let i=this.peerStats.get(e);if(!i)return;let n=ms.ensureTopicStats(r,i,this.params);!n||(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1)}prune(e,r){let i=this.peerStats.get(e);if(!i)return;let n=ms.ensureTopicStats(r,i,this.params);if(!n)return;let s=this.params.topics[r].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let a=s-n.meshMessageDeliveries;n.meshFailurePenalty+=a*a}n.inMesh=!1}validateMessage(e){return Ho(this,void 0,void 0,function*(){this.deliveryRecords.ensureRecord(yield this.msgId(e))})}deliverMessage(e){return Ho(this,void 0,void 0,function*(){let r=e.receivedFrom;this._markFirstMessageDelivery(r,e);let i=this.deliveryRecords.ensureRecord(yield this.msgId(e)),n=Date.now();if(i.status!==Ir.DeliveryRecordStatus.unknown){xs("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",r,n-i.firstSeen,Ir.DeliveryRecordStatus[i.status]);return}i.status=Ir.DeliveryRecordStatus.valid,i.validated=n,i.peers.forEach(s=>{s!==r&&this._markDuplicateMessageDelivery(s,e)})})}rejectMessage(e,r){return Ho(this,void 0,void 0,function*(){let i=e.receivedFrom;switch(r){case h9:case u9:this._markInvalidMessageDelivery(i,e);return}let n=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(n.status!==Ir.DeliveryRecordStatus.unknown){xs("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",i,Date.now()-n.firstSeen,Ir.DeliveryRecordStatus[n.status]);return}switch(r){case a9.ERR_TOPIC_VALIDATOR_IGNORE:n.status=Ir.DeliveryRecordStatus.ignored;return}n.status=Ir.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(i,e),n.peers.forEach(s=>{this._markInvalidMessageDelivery(s,e)})})}duplicateMessage(e){return Ho(this,void 0,void 0,function*(){let r=e.receivedFrom,i=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(!i.peers.has(r))switch(i.status){case Ir.DeliveryRecordStatus.unknown:i.peers.add(r);break;case Ir.DeliveryRecordStatus.valid:i.peers.add(r),this._markDuplicateMessageDelivery(r,e,i.validated);break;case Ir.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(r,e);break}})}_markInvalidMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=ms.ensureTopicStats(n,i,this.params);!s||(s.invalidMessageDeliveries+=1)})}_markFirstMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=ms.ensureTopicStats(n,i,this.params);if(!s)return;let a=this.params.topics[n].firstMessageDeliveriesCap;s.firstMessageDeliveries+=1,s.firstMessageDeliveries>a&&(s.firstMessageDeliveries=a),!!s.inMesh&&(a=this.params.topics[n].meshMessageDeliveriesCap,s.meshMessageDeliveries+=1,s.meshMessageDeliveries>a&&(s.meshMessageDeliveries=a))})}_markDuplicateMessageDelivery(e,r,i=0){let n=this.peerStats.get(e);if(!n)return;let s=i?Date.now():0;r.topicIDs.forEach(a=>{let o=ms.ensureTopicStats(a,n,this.params);if(!o||!o.inMesh)return;let u=this.params.topics[a];if(i&&s>i+u.meshMessageDeliveriesWindow)return;let c=u.meshMessageDeliveriesCap;o.meshMessageDeliveries+=1,o.meshMessageDeliveries>c&&(o.meshMessageDeliveries=c)})}_getIPs(e){return this._connectionManager.getAll(o9.default.createFromB58String(e)).map(r=>r.remoteAddr.toOptions().host)}_setIPs(e,r,i){e:for(let n of r){for(let a of i)if(n===a)continue e;let s=this.peerIPs.get(n);s||(s=new Set,this.peerIPs.set(n,s)),s.add(e)}e:for(let n of i){for(let a of r)if(n===a)continue e;let s=this.peerIPs.get(n);!s||(s.delete(e),s.size||this.peerIPs.delete(n))}}_removeIPs(e,r){r.forEach(i=>{let n=this.peerIPs.get(i);!n||(n.delete(e),n.size||this.peerIPs.delete(i))})}_updateIPs(){this.peerStats.forEach((e,r)=>{let i=this._getIPs(r);this._setIPs(r,i,e.ips),e.ips=i})}};Vi.PeerScore=Z2});var eg=T(gi=>{"use strict";var l9=gi&&gi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),qc=gi&&gi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&l9(e,t,r)};Object.defineProperty(gi,"__esModule",{value:!0});qc(Lc(),gi);qc(V2(),gi);qc(Q2(),gi)});var ig=T(ws=>{"use strict";var tg=ws&&ws.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(i.next(f))}catch(h){a(h)}}function u(f){try{c(i.throw(f))}catch(h){a(h)}}function c(f){f.done?s(f.value):n(f.value).then(o,u)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(ws,"__esModule",{value:!0});ws.IWantTracer=void 0;var d9=En(),Kc=In(),p9=va(),{ERR_INVALID_SIGNATURE:b9,ERR_MISSING_SIGNATURE:y9}=p9.codes,rg=class{constructor(e){this.getMsgId=e,this.promises=new Map}addPromise(e,r){let i=Math.floor(Math.random()*r.length),n=r[i],s=Kc.messageIdToString(n),a=this.promises.get(s);a||(a=new Map,this.promises.set(s,a)),a.has(e)||a.set(e,Date.now()+d9.GossipsubIWantFollowupTime)}getBrokenPromises(){let e=Date.now(),r=new Map;return this.promises.forEach((i,n)=>{i.forEach((s,a)=>{s<e&&(r.set(a,(r.get(a)||0)+1),i.delete(a))}),i.size||this.promises.delete(n)}),r}deliverMessage(e){return tg(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=Kc.messageIdToString(r);this.promises.delete(i)})}rejectMessage(e,r){return tg(this,void 0,void 0,function*(){switch(r){case b9:case y9:return}let i=yield this.getMsgId(e),n=Kc.messageIdToString(i);this.promises.delete(n)})}clear(){this.promises.clear()}};ws.IWantTracer=rg});var fg=T((zE,og)=>{var ng="Expected a function",sg=0/0,g9="[object Symbol]",v9=/^\s+|\s+$/g,m9=/^[-+]0x[0-9a-f]+$/i,x9=/^0b[01]+$/i,w9=/^0o[0-7]+$/i,_9=parseInt,S9=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,E9=typeof self=="object"&&self&&self.Object===Object&&self,I9=S9||E9||Function("return this")(),A9=Object.prototype,C9=A9.toString,B9=Math.max,R9=Math.min,Fc=function(){return I9.Date.now()};function T9(t,e,r){var i,n,s,a,o,u,c=0,f=!1,h=!1,p=!0;if(typeof t!="function")throw new TypeError(ng);e=ag(e)||0,Wo(r)&&(f=!!r.leading,h="maxWait"in r,s=h?B9(ag(r.maxWait)||0,e):s,p="trailing"in r?!!r.trailing:p);function g(O){var V=i,U=n;return i=n=void 0,c=O,a=t.apply(U,V),a}function y(O){return c=O,o=setTimeout(I,e),f?g(O):a}function S(O){var V=O-u,U=O-c,X=e-V;return h?R9(X,s-U):X}function B(O){var V=O-u,U=O-c;return u===void 0||V>=e||V<0||h&&U>=s}function I(){var O=Fc();if(B(O))return M(O);o=setTimeout(I,S(O))}function M(O){return o=void 0,p&&i?g(O):(i=n=void 0,a)}function D(){o!==void 0&&clearTimeout(o),c=0,i=u=n=o=void 0}function q(){return o===void 0?a:M(Fc())}function k(){var O=Fc(),V=B(O);if(i=arguments,n=this,u=O,V){if(o===void 0)return y(u);if(h)return o=setTimeout(I,e),g(u)}return o===void 0&&(o=setTimeout(I,e)),a}return k.cancel=D,k.flush=q,k}function M9(t,e,r){var i=!0,n=!0;if(typeof t!="function")throw new TypeError(ng);return Wo(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),T9(t,e,{leading:i,maxWait:e,trailing:n})}function Wo(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function P9(t){return!!t&&typeof t=="object"}function D9(t){return typeof t=="symbol"||P9(t)&&C9.call(t)==g9}function ag(t){if(typeof t=="number")return t;if(D9(t))return sg;if(Wo(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Wo(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(v9,"");var r=x9.test(t);return r||w9.test(t)?_9(t.slice(2),r?2:8):m9.test(t)?sg:+t}og.exports=M9});var hg=T((cg,ug)=>{"use strict";var O9=fg();cg=ug.exports=Uc;function Uc(t){if(!(this instanceof Uc))return new Uc(t);t=t||{};let e=t.validity||30,r=new Map,i=O9(()=>{r.forEach((n,s)=>{let a=n.validity||e;N9(n.timestamp)>a&&r.delete(s)})},200);this.put=(n,s,a)=>{this.has(n)||r.set(n,{value:s,timestamp:new Date,validity:a}),i()},this.get=n=>{if(r.has(n))return r.get(n).value;throw new Error("key does not exist")},this.has=n=>r.has(n)}function N9(t){let r=new Date().getTime()-t.getTime();return Math.floor(r/1e3)}});var lg=T(Gc=>{"use strict";Gc.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required"};Gc.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"}});var bg=T((jE,pg)=>{"use strict";var _s=Pn(),dg=_s.Reader,L9=_s.Writer,Le=_s.util,ha=_s.roots["libp2p-envelope"]||(_s.roots["libp2p-envelope"]={});ha.Envelope=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.publicKey=Le.newBuffer([]),t.prototype.payloadType=Le.newBuffer([]),t.prototype.payload=Le.newBuffer([]),t.prototype.signature=Le.newBuffer([]),t.encode=function(r,i){return i||(i=L9.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&i.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&i.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&i.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&i.uint32(42).bytes(r.signature),i},t.decode=function(r,i){r instanceof dg||(r=dg.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new ha.Envelope;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.publicKey=r.bytes();break;case 2:s.payloadType=r.bytes();break;case 3:s.payload=r.bytes();break;case 5:s.signature=r.bytes();break;default:r.skipType(a&7);break}}return s},t.fromObject=function(r){if(r instanceof ha.Envelope)return r;var i=new ha.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?Le.base64.decode(r.publicKey,i.publicKey=Le.newBuffer(Le.base64.length(r.publicKey)),0):r.publicKey.length&&(i.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?Le.base64.decode(r.payloadType,i.payloadType=Le.newBuffer(Le.base64.length(r.payloadType)),0):r.payloadType.length&&(i.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?Le.base64.decode(r.payload,i.payload=Le.newBuffer(Le.base64.length(r.payload)),0):r.payload.length&&(i.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?Le.base64.decode(r.signature,i.signature=Le.newBuffer(Le.base64.length(r.signature)),0):r.signature.length&&(i.signature=r.signature)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.publicKey="":(n.publicKey=[],i.bytes!==Array&&(n.publicKey=Le.newBuffer(n.publicKey))),i.bytes===String?n.payloadType="":(n.payloadType=[],i.bytes!==Array&&(n.payloadType=Le.newBuffer(n.payloadType))),i.bytes===String?n.payload="":(n.payload=[],i.bytes!==Array&&(n.payload=Le.newBuffer(n.payload))),i.bytes===String?n.signature="":(n.signature=[],i.bytes!==Array&&(n.signature=Le.newBuffer(n.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=i.bytes===String?Le.base64.encode(r.publicKey,0,r.publicKey.length):i.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(n.payloadType=i.bytes===String?Le.base64.encode(r.payloadType,0,r.payloadType.length):i.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(n.payload=i.bytes===String?Le.base64.encode(r.payload,0,r.payload.length):i.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=i.bytes===String?Le.base64.encode(r.signature,0,r.signature.length):i.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,_s.util.toJSONOptions)},t}();pg.exports=ha});var mg=T((HE,vg)=>{"use strict";var k9=Zt(),{concat:q9}=(cn(),fn),{fromString:K9}=(br(),pr),F9=Ic(),U9=ys(),zc=Aa(),{equals:Yo}=(hn(),un),{codes:G9}=lg(),{Envelope:yg}=bg(),ji=class{constructor({peerId:e,payloadType:r,payload:i,signature:n}){this.peerId=e,this.payloadType=r,this.payload=i,this.signature=n,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;let e=F9.marshalPublicKey(this.peerId.pubKey);return this._marshal=yg.encode({publicKey:e,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(e){return Yo(this.peerId.pubKey.bytes,e.peerId.pubKey.bytes)&&Yo(this.payloadType,e.payloadType)&&Yo(this.payload,e.payload)&&Yo(this.signature,e.signature)}validate(e){let r=gg(e,this.payloadType,this.payload);return this.peerId.pubKey.verify(r,this.signature)}},gg=(t,e,r)=>{let i=K9(t),n=zc.encode(i.byteLength),s=zc.encode(e.length),a=zc.encode(r.length);return q9([new Uint8Array(n),i,new Uint8Array(s),e,new Uint8Array(a),r])};ji.createFromProtobuf=async t=>{let e=yg.decode(t),r=await U9.createFromPubKey(e.publicKey);return new ji({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})};ji.seal=async(t,e)=>{let r=t.domain,i=t.codec,n=t.marshal(),s=gg(r,i,n),a=await e.privKey.sign(s);return new ji({peerId:e,payloadType:i,payload:n,signature:a})};ji.openAndCertify=async(t,e)=>{let r=await ji.createFromProtobuf(t);if(!await r.validate(e))throw k9(new Error("envelope signature is not valid for the given domain"),G9.ERR_SIGNATURE_NOT_VALID);return r};vg.exports=ji});var $9=T((vi,wg)=>{"use strict";var z9=vi&&vi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),V9=vi&&vi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xg=vi&&vi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&z9(e,t,r);return V9(e,t),e},Ss=vi&&vi.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(f){try{c(i.next(f))}catch(h){a(h)}}function u(f){try{c(i.throw(f))}catch(h){a(h)}}function c(f){f.done?s(f.value):n(f.value).then(o,u)}c((i=i.apply(t,e||[])).next())})},Vc=xg(R2()),j9=L2(),jc=q2(),de=xg(En()),H9=U2(),Jo=Dc(),Pt=In(),Hc=eg(),W9=ig(),Y9=hg(),Wc=ys(),J9=mg(),Yc=class extends Vc.default{constructor(e,r={}){let i=[de.GossipsubIDv11,de.GossipsubIDv10],n=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:de.GossipsubD,Dlo:de.GossipsubDlo,Dhi:de.GossipsubDhi,Dscore:de.GossipsubDscore,Dout:de.GossipsubDout,Dlazy:de.GossipsubDlazy,heartbeatInterval:de.GossipsubHeartbeatInterval,fanoutTTL:de.GossipsubFanoutTTL,mcacheLength:de.GossipsubHistoryLength,mcacheGossip:de.GossipsubHistoryGossip,seenTTL:de.GossipsubSeenTTL},r),{scoreParams:Hc.createPeerScoreParams(r.scoreParams),scoreThresholds:Hc.createPeerScoreThresholds(r.scoreThresholds)});n.fallbackToFloodsub&&i.push(de.FloodsubID);super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:i,libp2p:e},n));this._options=n,this.direct=new Set(n.directPeers.map(s=>s.id.toB58String())),n.directPeers.forEach(s=>{e.peerStore.addressBook.add(s.id,s.addrs)}),this.seenCache=new Y9({validity:n.seenTTL/1e3}),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=r.messageCache||new j9.MessageCache(n.mcacheGossip,n.mcacheLength,this.getMsgId.bind(this)),this.heartbeat=new H9.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new W9.IWantTracer(this.getMsgId.bind(this)),this._libp2p=e,this.score=new Hc.PeerScore(this._options.scoreParams,e.connectionManager,this.getMsgId.bind(this))}_decodeRpc(e){return jc.RPC.decode(e)}_encodeRpc(e){return jc.RPC.encode(e).finish()}_addPeer(e,r){let i=super._addPeer(e,r);this.score.addPeer(e.toB58String());let n=!1;for(let s of this._libp2p.connectionManager.getAll(e))if(s.stat.direction==="outbound"&&Array.from(s.registry.values()).some(a=>r===a.protocol)){n=!0;break}return this.outbound.set(i.id.toB58String(),n),i}_removePeer(e){let r=super._removePeer(e),i=e.toB58String();for(let n of this.mesh.values())n.delete(i);for(let n of this.fanout.values())n.delete(i);return this.gossip.delete(i),this.control.delete(i),this.outbound.delete(i),this.score.removePeer(i),r}_processRpc(e,r,i){let n=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return Ss(this,void 0,void 0,function*(){return(yield n._processRpc.call(this,e,r,i))?(i.control&&this._processRpcControlMessage(e,i.control),!0):!1})}_processRpcControlMessage(e,r){if(!r)return;let i=r.ihave?this._handleIHave(e,r.ihave):[],n=r.iwant?this._handleIWant(e,r.iwant):[],s=r.graft?this._handleGraft(e,r.graft):[];if(r.prune&&this._handlePrune(e,r.prune),!i.length&&!n.length&&!s.length)return;let a=Pt.createGossipRpc(n,{iwant:i,prune:s});this._sendRpc(e,a)}_processRpcMessage(e){let r=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return Ss(this,void 0,void 0,function*(){let i=yield this.getMsgId(e),n=Pt.messageIdToString(i);if(this.seenCache.has(n)){this.score.duplicateMessage(e);return}this.seenCache.put(n),yield this.score.validateMessage(e),yield r._processRpcMessage.call(this,e)})}_acceptFrom(e){return this.direct.has(e)||this.score.score(e)>=this._options.scoreThresholds.graylistThreshold}validate(e){let r=Object.create(null,{validate:{get:()=>super.validate}});return Ss(this,void 0,void 0,function*(){try{yield r.validate.call(this,e)}catch(i){throw this.score.rejectMessage(e,i.code),this.gossipTracer.rejectMessage(e,i.code),i}})}_handleIHave(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,i),[];let n=(this.peerhave.get(e)||0)+1;if(this.peerhave.set(e,n),n>de.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,n),[];let s=this.iasked.get(e)||0;if(s>=de.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,s),[];let a=new Map;if(r.forEach(({topicID:c,messageIDs:f})=>{!c||!f||!this.mesh.has(c)||f.forEach(h=>{let p=Pt.messageIdToString(h);this.seenCache.has(p)||a.set(p,h)})}),!a.size)return[];let o=a.size;o+s>de.GossipsubMaxIHaveLength&&(o=de.GossipsubMaxIHaveLength-s),this.log("IHAVE: Asking for %d out of %d messages from %s",o,a.size,e);let u=Array.from(a.values());return Pt.shuffle(u),u=u.slice(0,o),this.iasked.set(e,s+o),this.gossipTracer.addPromise(e,u),[{messageIDs:u}]}_handleIWant(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,i),[];let n=new Map;return r.forEach(({messageIDs:s})=>{s&&s.forEach(a=>{let[o,u]=this.messageCache.getForPeer(a,e);if(!!o){if(u>de.GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,a);return}n.set(Pt.messageIdToString(a),o)}})}),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,e),Array.from(n.values()).map(Vc.utils.normalizeOutRpcMessage)):[]}_handleGraft(e,r){let i=[],n=this.score.score(e),s=this._now(),a=this._options.doPX;return r.forEach(({topicID:o})=>{var u;if(!o)return;let c=this.mesh.get(o);if(!c){a=!1;return}if(c.has(e))return;if(this.direct.has(e)){this.log("GRAFT: ignoring request from direct peer %s",e),i.push(o),a=!1;return}let f=(u=this.backoff.get(o))===null||u===void 0?void 0:u.get(e);if(typeof f=="number"&&s<f){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1),a=!1;let h=f+de.GossipsubGraftFloodThreshold-de.GossipsubPruneBackoff;s<h&&this.score.addPenalty(e,1),this._addBackoff(e,o),i.push(o);return}if(n<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,o),i.push(o),a=!1,this._addBackoff(e,o);return}if(c.size>=this._options.Dhi&&!this.outbound.get(e)){i.push(o),this._addBackoff(e,o);return}this.log("GRAFT: Add mesh link from %s in %s",e,o),this.score.graft(e,o),c.add(e)}),i.length?i.map(o=>this._makePrune(e,o,a)):[]}_handlePrune(e,r){let i=this.score.score(e);r.forEach(({topicID:n,backoff:s,peers:a})=>{if(!n)return;let o=this.mesh.get(n);if(!!o&&(this.log("PRUNE: Remove mesh link to %s in %s",e,n),this.score.prune(e,n),o.delete(e),typeof s=="number"&&s>0?this._doAddBackoff(e,n,s*1e3):this._addBackoff(e,n),a&&a.length)){if(i<this._options.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,i,n);return}this._pxConnect(a)}})}_addBackoff(e,r){this._doAddBackoff(e,r,de.GossipsubPruneBackoff)}_doAddBackoff(e,r,i){let n=this.backoff.get(r);n||(n=new Map,this.backoff.set(r,n));let s=this._now()+i;(n.get(e)||0)<s&&n.set(e,s)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,r)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,e),this.score.addPenalty(r,e)})}_clearBackoff(){if(this.heartbeatTicks%de.GossipsubPruneBackoffTicks!=0)return;let e=this._now();this.backoff.forEach((r,i)=>{r.forEach((n,s)=>{n<e&&r.delete(s)}),r.size===0&&this.backoff.delete(i)})}_directConnect(){if(this.heartbeatTicks%de.GossipsubDirectConnectTicks!=0)return;let e=[];this.direct.forEach(r=>{let i=this.peers.get(r);(!i||!i.isWritable)&&e.push(r)}),e.length&&e.forEach(r=>{this._connect(r)})}_pxConnect(e){return Ss(this,void 0,void 0,function*(){e.length>de.GossipsubPrunePeers&&(Pt.shuffle(e),e=e.slice(0,de.GossipsubPrunePeers));let r=[];yield Promise.all(e.map(i=>Ss(this,void 0,void 0,function*(){if(!i.peerID)return;let s=Wc.createFromBytes(i.peerID).toB58String();if(!this.peers.has(s)){if(!i.signedPeerRecord){r.push(s);return}try{let a=yield J9.openAndCertify(i.signedPeerRecord,"libp2p-peer-record"),o=a.peerId.toB58String();if(s!==o){this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",o,s);return}if(!this._libp2p.peerStore.addressBook.consumePeerRecord(a)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}r.push(s)}catch(a){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}}))),!!r.length&&r.forEach(i=>this._connect(i))})}start(){super.start(),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout(()=>{this.direct.forEach(e=>{this._connect(e)})},de.GossipsubDirectConnectInitialDelay)}stop(){super.stop(),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),clearTimeout(this._directPeerInitial)}_connect(e){this.log("Initiating connection with %s",e),this._libp2p.dialProtocol(Wc.createFromB58String(e),this.multicodecs)}subscribe(e){super.subscribe(e),this.join(e)}unsubscribe(e){super.unsubscribe(e),this.leave(e)}join(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",e);let r=this.fanout.get(e);if(r)r.forEach(i=>{this.score.score(i)<0&&r.delete(i)}),r.size<this._options.D&&Jo.getGossipPeers(this,e,this._options.D-r.size,i=>!r.has(i)&&!this.direct.has(i)&&this.score.score(i)>=0).forEach(i=>r.add(i)),this.mesh.set(e,r),this.fanout.delete(e),this.lastpub.delete(e);else{let i=Jo.getGossipPeers(this,e,this._options.D,n=>!this.direct.has(n)&&this.score.score(n)>=0);this.mesh.set(e,i)}this.mesh.get(e).forEach(i=>{this.log("JOIN: Add mesh link to %s in %s",i,e),this._sendGraft(i,e)})}leave(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e);let r=this.mesh.get(e);r&&(r.forEach(i=>{this.log("LEAVE: Remove mesh link to %s in %s",i,e),this._sendPrune(i,e)}),this.mesh.delete(e))}_publish(e){return Ss(this,void 0,void 0,function*(){e.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(e),this.gossipTracer.deliverMessage(e));let r=yield this.getMsgId(e),i=Pt.messageIdToString(r);this.seenCache.put(i),this.messageCache.put(e);let n=new Set;e.topicIDs.forEach(a=>{let o=this.topics.get(a);if(!!o)if(this._options.floodPublish&&e.from===this.peerId.toB58String())o.forEach(u=>{(this.direct.has(u)||this.score.score(u)>=this._options.scoreThresholds.publishThreshold)&&n.add(u)});else{this.direct.forEach(c=>{n.add(c)}),o.forEach(c=>{let f=this.score.score(c),h=this.peers.get(c);!h||h.protocol===de.FloodsubID&&f>=this._options.scoreThresholds.publishThreshold&&n.add(c)});let u=this.mesh.get(a);if(!u||!u.size){if(u=this.fanout.get(a),!u){let c=Jo.getGossipPeers(this,a,this._options.D,f=>this.score.score(f)>=this._options.scoreThresholds.publishThreshold);c.size>0?(u=c,this.fanout.set(a,c)):u=new Set}this.lastpub.set(a,this._now())}u.forEach(c=>{n.add(c)})}});let s=Pt.createGossipRpc([Vc.utils.normalizeOutRpcMessage(e)]);n.forEach(a=>{a!==e.from&&this._sendRpc(a,s)})})}_sendGraft(e,r){let i=[{topicID:r}],n=Pt.createGossipRpc([],{graft:i});this._sendRpc(e,n)}_sendPrune(e,r){let i=[this._makePrune(e,r,this._options.doPX)],n=Pt.createGossipRpc([],{prune:i});this._sendRpc(e,n)}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable)return;let n=this.control.get(e);n&&(this._piggybackControl(e,r,n),this.control.delete(e));let s=this.gossip.get(e);s&&(this._piggybackGossip(e,r,s),this.gossip.delete(e)),i.write(jc.RPC.encode(r).finish())}_piggybackControl(e,r,i){let n=(i.graft||[]).filter(({topicID:a})=>(a&&this.mesh.get(a)||new Set).has(e)),s=(i.prune||[]).filter(({topicID:a})=>!(a&&this.mesh.get(a)||new Set).has(e));!n.length&&!s.length||(r.control?(r.control.graft=r.control.graft&&r.control.graft.concat(n),r.control.prune=r.control.prune&&r.control.prune.concat(s)):r.control={ihave:[],iwant:[],graft:n,prune:s})}_piggybackGossip(e,r,i){r.control||(r.control={ihave:[],iwant:[],graft:[],prune:[]}),r.control.ihave=i}_sendGraftPrune(e,r,i){let n=this._options.doPX;for(let[s,a]of e){let o=a.map(h=>({topicID:h})),u=[],c=r.get(s);c&&(u=c.map(h=>this._makePrune(s,h,n&&!i.get(s))),r.delete(s));let f=Pt.createGossipRpc([],{graft:o,prune:u});this._sendRpc(s,f)}for(let[s,a]of r){let o=a.map(c=>this._makePrune(s,c,n&&!i.get(s))),u=Pt.createGossipRpc([],{prune:o});this._sendRpc(s,u)}}_emitGossip(e,r){let i=this.messageCache.getGossipIDs(e);if(!i.length)return;Pt.shuffle(i),i.length>de.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",i.length);let n=[],s=this.topics.get(e);if(!s)return;s.forEach(u=>{let c=this.peers.get(u);!c||!r.has(u)&&!this.direct.has(u)&&Pt.hasGossipProtocol(c.protocol)&&this.score.score(u)>=this._options.scoreThresholds.gossipThreshold&&n.push(u)});let a=this._options.Dlazy,o=de.GossipsubGossipFactor*n.length;o>a&&(a=o),a>n.length?a=n.length:Pt.shuffle(n),n.slice(0,a).forEach(u=>{let c=i;i.length>de.GossipsubMaxIHaveLength&&(c=Pt.shuffle(c.slice()).slice(0,de.GossipsubMaxIHaveLength)),this._pushGossip(u,{topicID:e,messageIDs:c})})}_flush(){for(let[e,r]of this.gossip.entries()){this.gossip.delete(e);let i=Pt.createGossipRpc([],{ihave:r});this._sendRpc(e,i)}for(let[e,r]of this.control.entries()){this.control.delete(e);let i=Pt.createGossipRpc([],{graft:r.graft,prune:r.prune});this._sendRpc(e,i)}}_pushGossip(e,r){this.log("Add gossip to %s",e);let i=this.gossip.get(e)||[];this.gossip.set(e,i.concat(r))}_now(){return Date.now()}_makePrune(e,r,i){if(this.peers.get(e).protocol===de.GossipsubIDv10)return{topicID:r,peers:[]};let n=de.GossipsubPruneBackoff/1e3,s=[];return i&&Jo.getGossipPeers(this,r,de.GossipsubPrunePeers,o=>o!==e&&this.score.score(o)>=0).forEach(o=>{let u=Wc.createFromB58String(o);s.push({peerID:u.toBytes(),signedPeerRecord:this._libp2p.peerStore.addressBook.getRawEnvelope(u)})}),{topicID:r,peers:s,backoff:n}}};Yc.multicodec=de.GossipsubIDv11;wg.exports=Yc});return $9();})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
return Libp2pGossipsub}));
