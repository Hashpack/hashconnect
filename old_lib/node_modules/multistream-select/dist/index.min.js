(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.MultistreamSelect = factory()}(typeof self !== 'undefined' ? self : this, function () {
var MultistreamSelect=(()=>{var Rt=Object.defineProperty;var ni=r=>Rt(r,"__esModule",{value:!0});var x=(r,e)=>()=>(r&&(e=r(r=0)),e);var y=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),R=(r,e)=>{ni(r);for(var t in e)Rt(r,t,{get:e[t],enumerable:!0})};var Ot=y((zs,Nt)=>{var ee=1e3,te=ee*60,re=te*60,X=re*24,ii=X*7,oi=X*365.25;Nt.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return si(r);if(t==="number"&&isFinite(r))return e.long?ai(r):ci(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function si(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*oi;case"weeks":case"week":case"w":return t*ii;case"days":case"day":case"d":return t*X;case"hours":case"hour":case"hrs":case"hr":case"h":return t*re;case"minutes":case"minute":case"mins":case"min":case"m":return t*te;case"seconds":case"second":case"secs":case"sec":case"s":return t*ee;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function ci(r){var e=Math.abs(r);return e>=X?Math.round(r/X)+"d":e>=re?Math.round(r/re)+"h":e>=te?Math.round(r/te)+"m":e>=ee?Math.round(r/ee)+"s":r+"ms"}function ai(r){var e=Math.abs(r);return e>=X?Be(r,e,X,"day"):e>=re?Be(r,e,re,"hour"):e>=te?Be(r,e,te,"minute"):e>=ee?Be(r,e,ee,"second"):r+" ms"}function Be(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Mt=y((Gs,vt)=>{function ui(r){t.debug=t,t.default=t,t.coerce=h,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Ot(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=e;function t(u){let f,d=null,b,p;function w(...g){if(!w.enabled)return;let B=w,A=Number(new Date),L=A-(f||A);B.diff=L,B.prev=f,B.curr=A,f=A,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let I=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(T,U)=>{if(T==="%%")return"%";I++;let D=t.formatters[U];if(typeof D=="function"){let Q=g[I];T=D.call(B,Q),g.splice(I,1),I--}return T}),t.formatArgs.call(B,g),(B.log||t.log).apply(B,g)}return w.namespace=u,w.useColors=t.useColors(),w.color=t.selectColor(u),w.extend=n,w.destroy=t.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(b!==t.namespaces&&(b=t.namespaces,p=t.enabled(u)),p),set:g=>{d=g}}),typeof t.init=="function"&&t.init(w),w}function n(u,f){let d=t(this.namespace+(typeof f=="undefined"?":":f)+u);return d.log=this.log,d}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let f,d=(typeof u=="string"?u:"").split(/[\s,]+/),b=d.length;for(f=0;f<b;f++)!d[f]||(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...t.names.map(a),...t.skips.map(a).map(f=>"-"+f)].join(",");return t.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=t.skips.length;f<d;f++)if(t.skips[f].test(u))return!1;for(f=0,d=t.names.length;f<d;f++)if(t.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function h(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}vt.exports=ui});var Fe=y((S,Ce)=>{S.formatArgs=fi;S.save=li;S.load=pi;S.useColors=hi;S.storage=di();S.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();S.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function hi(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function fi(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Ce.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}S.log=console.debug||console.log||(()=>{});function li(r){try{r?S.storage.setItem("debug",r):S.storage.removeItem("debug")}catch(e){}}function pi(){let r;try{r=S.storage.getItem("debug")}catch(e){}return!r&&typeof process!="undefined"&&"env"in process&&(r=process.env.DEBUG),r}function di(){try{return localStorage}catch(r){}}Ce.exports=Mt()(S);var{formatters:wi}=Ce.exports;wi.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var $e=y((Vs,jt)=>{"use strict";function kt(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function yi(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return kt(r,t)}catch(n){t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),kt(new i,t)}}jt.exports=yi});var $t=y(Ie=>{"use strict";Ie.byteLength=mi;Ie.toByteArray=bi;Ie.fromByteArray=Ci;var M=[],N=[],gi=typeof Uint8Array!="undefined"?Uint8Array:Array,ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(W=0,qt=ze.length;W<qt;++W)M[W]=ze[W],N[ze.charCodeAt(W)]=W;var W,qt;N["-".charCodeAt(0)]=62;N["_".charCodeAt(0)]=63;function Pt(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function mi(r){var e=Pt(r),t=e[0],n=e[1];return(t+n)*3/4-n}function xi(r,e,t){return(e+t)*3/4-t}function bi(r){var e,t=Pt(r),n=t[0],i=t[1],o=new gi(xi(r,n,i)),s=0,a=i>0?n-4:n,h;for(h=0;h<a;h+=4)e=N[r.charCodeAt(h)]<<18|N[r.charCodeAt(h+1)]<<12|N[r.charCodeAt(h+2)]<<6|N[r.charCodeAt(h+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=N[r.charCodeAt(h)]<<2|N[r.charCodeAt(h+1)]>>4,o[s++]=e&255),i===1&&(e=N[r.charCodeAt(h)]<<10|N[r.charCodeAt(h+1)]<<4|N[r.charCodeAt(h+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Ei(r){return M[r>>18&63]+M[r>>12&63]+M[r>>6&63]+M[r&63]}function Bi(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Ei(n));return i.join("")}function Ci(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,a=t-n;s<a;s+=o)i.push(Bi(r,s,s+o>a?a:s+o));return n===1?(e=r[t-1],i.push(M[e>>2]+M[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(M[e>>10]+M[e>>4&63]+M[e<<2&63]+"=")),i.join("")}});var zt=y(Ge=>{Ge.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,h=(1<<a)-1,l=h>>1,u=-7,f=t?i-1:0,d=t?-1:1,b=r[e+f];for(f+=d,o=b&(1<<-u)-1,b>>=-u,u+=a;u>0;o=o*256+r[e+f],f+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=s*256+r[e+f],f+=d,u-=8);if(o===0)o=1-l;else{if(o===h)return s?NaN:(b?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-l}return(b?-1:1)*s*Math.pow(2,o-n)};Ge.write=function(r,e,t,n,i,o){var s,a,h,l=o*8-i-1,u=(1<<l)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:o-1,p=n?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),s+f>=1?e+=d/h:e+=d*Math.pow(2,1-f),e*h>=2&&(s++,h/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(e*h-1)*Math.pow(2,i),s=s+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;r[t+b]=a&255,b+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;r[t+b]=s&255,b+=p,s/=256,l-=8);r[t+b-p]|=w*128}});var Y=y(se=>{"use strict";var Ve=$t(),ne=zt(),Gt=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;se.Buffer=c;se.SlowBuffer=Si;se.INSPECT_MAX_BYTES=50;var Ae=2147483647;se.kMaxLength=Ae;c.TYPED_ARRAY_SUPPORT=Fi();!c.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Fi(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch(r){return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.buffer}});Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.byteOffset}});function P(r){if(r>Ae)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,c.prototype),e}function c(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return He(r)}return Vt(r,e,t)}c.poolSize=8192;function Vt(r,e,t){if(typeof r=="string")return Ai(r,e);if(ArrayBuffer.isView(r))return _i(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(k(r,ArrayBuffer)||r&&k(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(k(r,SharedArrayBuffer)||r&&k(r.buffer,SharedArrayBuffer)))return We(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return c.from(n,e,t);let i=Ui(r);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return c.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}c.from=function(r,e,t){return Vt(r,e,t)};Object.setPrototypeOf(c.prototype,Uint8Array.prototype);Object.setPrototypeOf(c,Uint8Array);function Ht(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Ii(r,e,t){return Ht(r),r<=0?P(r):e!==void 0?typeof t=="string"?P(r).fill(e,t):P(r).fill(e):P(r)}c.alloc=function(r,e,t){return Ii(r,e,t)};function He(r){return Ht(r),P(r<0?0:Je(r)|0)}c.allocUnsafe=function(r){return He(r)};c.allocUnsafeSlow=function(r){return He(r)};function Ai(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Xt(r,e)|0,n=P(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Xe(r){let e=r.length<0?0:Je(r.length)|0,t=P(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function _i(r){if(k(r,Uint8Array)){let e=new Uint8Array(r);return We(e.buffer,e.byteOffset,e.byteLength)}return Xe(r)}function We(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,c.prototype),n}function Ui(r){if(c.isBuffer(r)){let e=Je(r.length)|0,t=P(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Ke(r.length)?P(0):Xe(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Xe(r.data)}function Je(r){if(r>=Ae)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ae.toString(16)+" bytes");return r|0}function Si(r){return+r!=r&&(r=0),c.alloc(+r)}c.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==c.prototype};c.compare=function(e,t){if(k(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),k(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return c.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(k(s,Uint8Array))o+s.length>i.length?(c.isBuffer(s)||(s=c.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(c.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Xt(r,e){if(c.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||k(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Ze(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return or(r).length;default:if(i)return n?-1:Ze(r).length;e=(""+e).toLowerCase(),i=!0}}c.byteLength=Xt;function Li(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return qi(this,e,t);case"utf8":case"utf-8":return Yt(this,e,t);case"ascii":return ki(this,e,t);case"latin1":case"binary":return ji(this,e,t);case"base64":return vi(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pi(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}c.prototype._isBuffer=!0;function J(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}c.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)J(this,t,t+1);return this};c.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)J(this,t,t+3),J(this,t+1,t+2);return this};c.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)J(this,t,t+7),J(this,t+1,t+6),J(this,t+2,t+5),J(this,t+3,t+4);return this};c.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Yt(this,0,e):Li.apply(this,arguments)};c.prototype.toLocaleString=c.prototype.toString;c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:c.compare(this,e)===0};c.prototype.inspect=function(){let e="",t=se.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Gt&&(c.prototype[Gt]=c.prototype.inspect);c.prototype.compare=function(e,t,n,i,o){if(k(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=n-t,h=Math.min(s,a),l=this.slice(i,o),u=e.slice(t,n);for(let f=0;f<h;++f)if(l[f]!==u[f]){s=l[f],a=u[f];break}return s<a?-1:a<s?1:0};function Wt(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ke(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=c.from(e,n)),c.isBuffer(e))return e.length===0?-1:Jt(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Jt(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Jt(r,e,t,n,i){let o=1,s=r.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,a/=2,t/=2}function h(u,f){return o===1?u[f]:u.readUInt16BE(f*o)}let l;if(i){let u=-1;for(l=t;l<s;l++)if(h(r,l)===h(e,u===-1?0:l-u)){if(u===-1&&(u=l),l-u+1===a)return u*o}else u!==-1&&(l-=l-u),u=-1}else for(t+a>s&&(t=s-a),l=t;l>=0;l--){let u=!0;for(let f=0;f<a;f++)if(h(r,l+f)!==h(e,f)){u=!1;break}if(u)return l}return-1}c.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};c.prototype.indexOf=function(e,t,n){return Wt(this,e,t,n,!0)};c.prototype.lastIndexOf=function(e,t,n){return Wt(this,e,t,n,!1)};function Ti(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(e.substr(s*2,2),16);if(Ke(a))return s;r[t+s]=a}return s}function Di(r,e,t,n){return _e(Ze(e,r.length-t),r,t,n)}function Ri(r,e,t,n){return _e(Vi(e),r,t,n)}function Ni(r,e,t,n){return _e(or(e),r,t,n)}function Oi(r,e,t,n){return _e(Hi(e,r.length-t),r,t,n)}c.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Ti(this,e,t,n);case"utf8":case"utf-8":return Di(this,e,t,n);case"ascii":case"latin1":case"binary":return Ri(this,e,t,n);case"base64":return Ni(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oi(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function vi(r,e,t){return e===0&&t===r.length?Ve.fromByteArray(r):Ve.fromByteArray(r.slice(e,t))}function Yt(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=t){let h,l,u,f;switch(a){case 1:o<128&&(s=o);break;case 2:h=r[i+1],(h&192)==128&&(f=(o&31)<<6|h&63,f>127&&(s=f));break;case 3:h=r[i+1],l=r[i+2],(h&192)==128&&(l&192)==128&&(f=(o&15)<<12|(h&63)<<6|l&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:h=r[i+1],l=r[i+2],u=r[i+3],(h&192)==128&&(l&192)==128&&(u&192)==128&&(f=(o&15)<<18|(h&63)<<12|(l&63)<<6|u&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return Mi(n)}var Zt=4096;function Mi(r){let e=r.length;if(e<=Zt)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Zt));return t}function ki(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function ji(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function qi(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=Xi[r[o]];return i}function Pi(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}c.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,c.prototype),i};function C(r,e,t){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||C(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||C(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e=e>>>0,t||C(e,1,this.length),this[e]};c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||C(e,2,this.length),this[e]|this[e+1]<<8};c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||C(e,2,this.length),this[e]<<8|this[e+1]};c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||C(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};c.prototype.readBigUInt64LE=z(function(e){e=e>>>0,oe(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&we(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});c.prototype.readBigUInt64BE=z(function(e){e=e>>>0,oe(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&we(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});c.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||C(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};c.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||C(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};c.prototype.readInt8=function(e,t){return e=e>>>0,t||C(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};c.prototype.readInt16LE=function(e,t){e=e>>>0,t||C(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};c.prototype.readInt16BE=function(e,t){e=e>>>0,t||C(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};c.prototype.readInt32LE=function(e,t){return e=e>>>0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};c.prototype.readInt32BE=function(e,t){return e=e>>>0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};c.prototype.readBigInt64LE=z(function(e){e=e>>>0,oe(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&we(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});c.prototype.readBigInt64BE=z(function(e){e=e>>>0,oe(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&we(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});c.prototype.readFloatLE=function(e,t){return e=e>>>0,t||C(e,4,this.length),ne.read(this,e,!0,23,4)};c.prototype.readFloatBE=function(e,t){return e=e>>>0,t||C(e,4,this.length),ne.read(this,e,!1,23,4)};c.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||C(e,8,this.length),ne.read(this,e,!0,52,8)};c.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||C(e,8,this.length),ne.read(this,e,!1,52,8)};function _(r,e,t,n,i,o){if(!c.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;_(this,e,t,n,a,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;_(this,e,t,n,a,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,1,255,0),this[t]=e&255,t+1};c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Kt(r,e,t,n,i){ir(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function Qt(r,e,t,n,i){ir(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}c.prototype.writeBigUInt64LE=z(function(e,t=0){return Kt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeBigUInt64BE=z(function(e,t=0){return Qt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let h=Math.pow(2,8*n-1);_(this,e,t,n,h-1,-h)}let o=0,s=1,a=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&a===0&&this[t+o-1]!==0&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n};c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let h=Math.pow(2,8*n-1);_(this,e,t,n,h-1,-h)}let o=n-1,s=1,a=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[t+o+1]!==0&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n};c.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};c.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};c.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};c.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};c.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};c.prototype.writeBigInt64LE=z(function(e,t=0){return Kt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});c.prototype.writeBigInt64BE=z(function(e,t=0){return Qt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function er(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function tr(r,e,t,n,i){return e=+e,t=t>>>0,i||er(r,e,t,4,34028234663852886e22,-34028234663852886e22),ne.write(r,e,t,n,23,4),t+4}c.prototype.writeFloatLE=function(e,t,n){return tr(this,e,t,!0,n)};c.prototype.writeFloatBE=function(e,t,n){return tr(this,e,t,!1,n)};function rr(r,e,t,n,i){return e=+e,t=t>>>0,i||er(r,e,t,8,17976931348623157e292,-17976931348623157e292),ne.write(r,e,t,n,52,8),t+8}c.prototype.writeDoubleLE=function(e,t,n){return rr(this,e,t,!0,n)};c.prototype.writeDoubleBE=function(e,t,n){return rr(this,e,t,!1,n)};c.prototype.copy=function(e,t,n,i){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};c.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=c.isBuffer(e)?e:c.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var ie={};function Ye(r,e,t){ie[r]=class extends t{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Ye("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ye("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Ye("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=nr(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=nr(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function nr(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function $i(r,e,t){oe(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&we(e,r.length-(t+1))}function ir(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${t}${s}`,new ie.ERR_OUT_OF_RANGE("value",a,r)}$i(n,i,o)}function oe(r,e){if(typeof r!="number")throw new ie.ERR_INVALID_ARG_TYPE(e,"number",r)}function we(r,e,t){throw Math.floor(r)!==r?(oe(r,t),new ie.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var zi=/[^+/0-9A-Za-z-_]/g;function Gi(r){if(r=r.split("=")[0],r=r.trim().replace(zi,""),r.length<2)return"";for(;r.length%4!=0;)r=r+"=";return r}function Ze(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Vi(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Hi(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function or(r){return Ve.toByteArray(Gi(r))}function _e(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function k(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Ke(r){return r!==r}var Xi=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function z(r){return typeof BigInt=="undefined"?Wi:r}function Wi(){throw new Error("BigInt not supported")}});var ce=y((Ys,cr)=>{"use strict";var{Buffer:v}=Y(),sr=Symbol.for("BufferList");function m(r){if(!(this instanceof m))return new m(r);m._init.call(this,r)}m._init=function(e){Object.defineProperty(this,sr,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};m.prototype._new=function(e){return new m(e)};m.prototype._offset=function(e){if(e===0)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){let i=t+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-t];t=i}};m.prototype._reverseOffset=function(r){let e=r[0],t=r[1];for(let n=0;n<e;n++)t+=this._bufs[n].length;return t};m.prototype.get=function(e){if(e>this.length||e<0)return;let t=this._offset(e);return this._bufs[t[0]][t[1]]};m.prototype.slice=function(e,t){return typeof e=="number"&&e<0&&(e+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,e,t)};m.prototype.copy=function(e,t,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||v.alloc(0);let o=!!e,s=this._offset(n),a=i-n,h=a,l=o&&t||0,u=s[1];if(n===0&&i===this.length){if(!o)return this._bufs.length===1?this._bufs[0]:v.concat(this._bufs,this.length);for(let f=0;f<this._bufs.length;f++)this._bufs[f].copy(e,l),l+=this._bufs[f].length;return e}if(h<=this._bufs[s[0]].length-u)return o?this._bufs[s[0]].copy(e,t,u,u+h):this._bufs[s[0]].slice(u,u+h);o||(e=v.allocUnsafe(a));for(let f=s[0];f<this._bufs.length;f++){let d=this._bufs[f].length-u;if(h>d)this._bufs[f].copy(e,l,u),l+=d;else{this._bufs[f].copy(e,l,u,u+h),l+=d;break}h-=d,u&&(u=0)}return e.length>l?e.slice(0,l):e};m.prototype.shallowSlice=function(e,t){if(e=e||0,t=typeof t!="number"?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();let n=this._offset(e),i=this._offset(t),o=this._bufs.slice(n[0],i[0]+1);return i[1]===0?o.pop():o[o.length-1]=o[o.length-1].slice(0,i[1]),n[1]!==0&&(o[0]=o[0].slice(n[1])),this._new(o)};m.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)};m.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};m.prototype.duplicate=function(){let e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e};m.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(v.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(v.from(e));return this};m.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};m.prototype.indexOf=function(r,e,t){if(t===void 0&&typeof e=="string"&&(t=e,e=void 0),typeof r=="function"||Array.isArray(r))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof r=="number"?r=v.from([r]):typeof r=="string"?r=v.from(r,t):this._isBufferList(r)?r=r.slice():Array.isArray(r.buffer)?r=v.from(r.buffer,r.byteOffset,r.byteLength):v.isBuffer(r)||(r=v.from(r)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),r.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],o=n[1];for(;i<this._bufs.length;i++){let s=this._bufs[i];for(;o<s.length;)if(s.length-o>=r.length){let h=s.indexOf(r,o);if(h!==-1)return this._reverseOffset([i,h]);o=s.length-r.length+1}else{let h=this._reverseOffset([i,o]);if(this._match(h,r))return h;o++}o=0}return-1};m.prototype._match=function(r,e){if(this.length-r<e.length)return!1;for(let t=0;t<e.length;t++)if(this.get(r+t)!==e[t])return!1;return!0};(function(){let r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in r)(function(t){r[t]===null?m.prototype[t]=function(n,i){return this.slice(n,n+i)[t](0,i)}:m.prototype[t]=function(n=0){return this.slice(n,n+r[t])[t](0)}})(e)})();m.prototype._isBufferList=function(e){return e instanceof m||m.isBufferList(e)};m.isBufferList=function(e){return e!=null&&e[sr]};cr.exports=m});var hr=y((Zs,ur)=>{ur.exports=Qe;var ar=128,Ji=127,Yi=~Ji,Zi=Math.pow(2,31);function Qe(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw Qe.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=Zi;)e[t++]=r&255|ar,r/=128;for(;r&Yi;)e[t++]=r&255|ar,r>>>=7;return e[t]=r|0,Qe.bytes=t-n+1,e}});var pr=y((Ks,lr)=>{lr.exports=et;var Ki=128,fr=127;function et(r,e){var t=0,e=e||0,n=0,i=e,o,s=r.length;do{if(i>=s||n>49)throw et.bytes=0,new RangeError("Could not decode varint");o=r[i++],t+=n<28?(o&fr)<<n:(o&fr)*Math.pow(2,n),n+=7}while(o>=Ki);return et.bytes=i-e,t}});var wr=y((Qs,dr)=>{var Qi=Math.pow(2,7),eo=Math.pow(2,14),to=Math.pow(2,21),ro=Math.pow(2,28),no=Math.pow(2,35),io=Math.pow(2,42),oo=Math.pow(2,49),so=Math.pow(2,56),co=Math.pow(2,63);dr.exports=function(r){return r<Qi?1:r<eo?2:r<to?3:r<ro?4:r<no?5:r<io?6:r<oo?7:r<so?8:r<co?9:10}});var tt=y((ec,yr)=>{yr.exports={encode:hr(),decode:pr(),encodingLength:wr()}});var rt=y((tc,xr)=>{"use strict";var gr=tt(),{Buffer:ao}=Y(),mr=(r,e,t)=>{let n=gr.encode(r,e,t);return mr.bytes=gr.encode.bytes,e||ao.from(n)};xr.exports=mr});var Ir=y((rc,Ue)=>{"use strict";var{Buffer:br}=Y(),Er=ce(),Br=rt(),nt=8,Cr=10*1024;function Fr(r){r=r||{};let e=Math.max(r.poolSize||Cr,r.minPoolSize||nt),t=r.lengthEncoder||Br;return async function*(i){let o=br.alloc(e),s=0;for await(let a of i){t(a.length,o,s);let h=o.slice(s,s+t.bytes);s+=t.bytes,o.length-s<nt&&(o=br.alloc(e),s=0),yield new Er().append(h).append(a)}}}Fr.single=(r,e)=>{e=e||{};let t=e.lengthEncoder||Br;return new Er([t(r.length),r.slice()])};Ue.exports=Fr;Ue.exports.MIN_POOL_SIZE=nt;Ue.exports.DEFAULT_POOL_SIZE=Cr});var it=y((nc,Ur)=>{"use strict";var Ar=tt(),{Buffer:uo}=Y(),ho=r=>new Proxy({},{get:(e,t)=>t[0]==="l"?r[t]:r.get(parseInt(t))}),_r=r=>{let e=Ar.decode(uo.isBuffer(r)?r:ho(r));return _r.bytes=Ar.decode.bytes,e};Ur.exports=_r});var Dr=y((ic,Se)=>{"use strict";var{Buffer:fo}=Y(),ot=ce(),lo=it(),Sr=8,Lr=1024*1024*4,Tr=fo.alloc(0),G={LENGTH:"readLength",DATA:"readData"},po={[G.LENGTH]:(r,e,t,n)=>{e=e.append(r);let i;try{i=n.lengthDecoder(e)}catch(o){if(e.length>n.maxLengthLength)throw Object.assign(o,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(o instanceof RangeError)return{mode:G.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw o}if(i>n.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return r=e.shallowSlice(n.lengthDecoder.bytes),e=new ot,n.onLength&&n.onLength(i),i<=0?(n.onData&&n.onData(Tr),{mode:G.LENGTH,chunk:r,buffer:e,data:Tr}):{mode:G.DATA,chunk:r,buffer:e,state:{dataLength:i},data:void 0}},[G.DATA]:(r,e,t,n)=>{if(e=e.append(r),!t)throw new Error("state is required");if(e.length<t.dataLength)return{mode:G.DATA,buffer:e,state:t,chunk:void 0,data:void 0};let{dataLength:i}=t,o=e.shallowSlice(0,i),s=e.length>i?e.shallowSlice(i):void 0;return e=new ot,n.onData&&n.onData(o),{mode:G.LENGTH,chunk:s,buffer:e,state:void 0,data:o}}};function st(r){r=r||{};let e={lengthDecoder:r.lengthDecoder||lo,maxLengthLength:r.maxLengthLength||Sr,maxDataLength:r.maxDataLength||Lr,onLength:r.onLength,onData:r.onData};return async function*(n){let i=new ot,o=G.LENGTH,s;for await(let a of n){let h=a;for(;h;){let l=po[o](h,i,s,e);o=l.mode,h=l.chunk,i=l.buffer,s=l.state,l.data&&(yield l.data)}}if(i.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}st.fromReader=(r,e)=>{let t=1,n={[Symbol.asyncIterator](){return this},next:async()=>{try{return await r.next(t)}catch(o){if(o.code==="ERR_UNDER_READ")return{done:!0,value:null};throw o}finally{t=1}}};return st({...e||{},onLength:o=>{t=o}})(n)};Se.exports=st;Se.exports.MAX_LENGTH_LENGTH=Sr;Se.exports.MAX_DATA_LENGTH=Lr});var Or=y((oc,Nr)=>{"use strict";var{Buffer:wo}=Y(),Rr=(r,e,t)=>(e=e||wo.allocUnsafe(4),e.writeInt32BE(r,t),e);Rr.bytes=4;Nr.exports=Rr});var kr=y((sc,Mr)=>{"use strict";var vr=r=>{if(r.length<4)throw RangeError("Could not decode int32BE");return r.readInt32BE(0)};vr.bytes=4;Mr.exports=vr});var ct=y(Z=>{"use strict";Z.encode=Ir();Z.decode=Dr();Z.varintEncode=rt();Z.varintDecode=it();Z.int32BEEncode=Or();Z.int32BEDecode=kr()});var ut=y((ac,ae)=>{var jr=(...r)=>{let e;for(;r.length;)e=r.shift()(e);return e},at=r=>r&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),Le=r=>r&&typeof r.sink=="function"&&at(r.source),yo=r=>e=>(r.sink(e),r.source),qr=(...r)=>{if(Le(r[0])){let e=r[0];r[0]=()=>e.source}else if(at(r[0])){let e=r[0];r[0]=()=>e}if(r.length>1&&Le(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let e=1;e<r.length-1;e++)Le(r[e])&&(r[e]=yo(r[e]));return jr(...r)};ae.exports=qr;ae.exports.pipe=qr;ae.exports.rawPipe=jr;ae.exports.isIterable=at;ae.exports.isDuplex=Le});function go(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,h=r.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var w=0,g=0,B=0,A=p.length;B!==A&&p[B]===0;)B++,w++;for(var L=(A-B)*u+1>>>0,I=new Uint8Array(L);B!==A;){for(var O=p[B],T=0,U=L-1;(O!==0||T<g)&&U!==-1;U--,T++)O+=256*I[U]>>>0,I[U]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");g=T,B++}for(var D=L-g;D!==L&&I[D]===0;)D++;for(var Q=h.repeat(w);D<L;++D)Q+=r.charAt(I[D]);return Q}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var w=0;if(p[w]!==" "){for(var g=0,B=0;p[w]===h;)g++,w++;for(var A=(p.length-w)*l+1>>>0,L=new Uint8Array(A);p[w];){var I=t[p.charCodeAt(w)];if(I===255)return;for(var O=0,T=A-1;(I!==0||O<B)&&T!==-1;T--,O++)I+=a*L[T]>>>0,L[T]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");B=O,w++}if(p[w]!==" "){for(var U=A-B;U!==A&&L[U]===0;)U++;for(var D=new Uint8Array(g+(A-U)),Q=g;U!==A;)D[Q++]=L[U++];return D}}}function b(p){var w=d(p);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:d,decode:b}}var mo,xo,Pr,$r=x(()=>{mo=go,xo=mo,Pr=xo});var hc,zr,$,Gr,Vr,V=x(()=>{hc=new Uint8Array(0),zr=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},$=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Gr=r=>new TextEncoder().encode(r),Vr=r=>new TextDecoder().decode(r)});var Xr,Wr,Te,Jr,De,H,bo,Eo,E,j=x(()=>{$r();V();Xr=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Wr=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){let t={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new Te(t)}},Te=class{constructor(e){this.decoders=e}or(e){let t=e.decoders||{[e.prefix]:e};return new Te({...this.decoders,...t})}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Jr=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Xr(e,t,n),this.decoder=new Wr(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},De=({name:r,prefix:e,encode:t,decode:n})=>new Jr(r,e,t,n),H=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=Pr(t,e);return De({prefix:r,name:e,encode:n,decode:o=>$(i(o))})},bo=(r,e,t,n)=>{let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),a=0,h=0,l=0;for(let u=0;u<o;++u){let f=i[r[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<t|f,a+=t,a>=8&&(a-=8,s[l++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return s},Eo=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o},E=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>De({prefix:e,name:r,encode(i){return Eo(i,n,t)},decode(i){return bo(i,n,t,r)}})});var ht={};R(ht,{identity:()=>Bo});var Bo,Yr=x(()=>{j();V();Bo=De({prefix:"\0",name:"identity",encode:r=>Vr(r),decode:r=>Gr(r)})});var ft={};R(ft,{base2:()=>Co});var Co,Zr=x(()=>{j();Co=E({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var lt={};R(lt,{base8:()=>Fo});var Fo,Kr=x(()=>{j();Fo=E({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var pt={};R(pt,{base10:()=>Io});var Io,Qr=x(()=>{j();Io=H({prefix:"9",name:"base10",alphabet:"0123456789"})});var dt={};R(dt,{base16:()=>Ao,base16upper:()=>_o});var Ao,_o,en=x(()=>{j();Ao=E({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_o=E({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var wt={};R(wt,{base32:()=>ue,base32hex:()=>To,base32hexpad:()=>Ro,base32hexpadupper:()=>No,base32hexupper:()=>Do,base32pad:()=>So,base32padupper:()=>Lo,base32upper:()=>Uo,base32z:()=>Oo});var ue,Uo,So,Lo,To,Do,Ro,No,Oo,yt=x(()=>{j();ue=E({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Uo=E({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),So=E({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Lo=E({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),To=E({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Do=E({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ro=E({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),No=E({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Oo=E({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var gt={};R(gt,{base36:()=>vo,base36upper:()=>Mo});var vo,Mo,tn=x(()=>{j();vo=H({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Mo=H({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var mt={};R(mt,{base58btc:()=>q,base58flickr:()=>ko});var q,ko,xt=x(()=>{j();q=H({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ko=H({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var bt={};R(bt,{base64:()=>jo,base64pad:()=>qo,base64url:()=>Po,base64urlpad:()=>$o});var jo,qo,Po,$o,rn=x(()=>{j();jo=E({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qo=E({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Po=E({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$o=E({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function on(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Ho;)e[t++]=r&255|nn,r/=128;for(;r&Vo;)e[t++]=r&255|nn,r>>>=7;return e[t]=r|0,on.bytes=t-n+1,e}function Et(r,e){var t=0,e=e||0,n=0,i=e,o,s=r.length;do{if(i>=s)throw Et.bytes=0,new RangeError("Could not decode varint");o=r[i++],t+=n<28?(o&sn)<<n:(o&sn)*Math.pow(2,n),n+=7}while(o>=Wo);return Et.bytes=i-e,t}var zo,nn,Go,Vo,Ho,Xo,Wo,sn,Jo,Yo,Zo,Ko,Qo,es,ts,rs,ns,is,os,ss,ye,cn=x(()=>{zo=on,nn=128,Go=127,Vo=~Go,Ho=Math.pow(2,31);Xo=Et,Wo=128,sn=127;Jo=Math.pow(2,7),Yo=Math.pow(2,14),Zo=Math.pow(2,21),Ko=Math.pow(2,28),Qo=Math.pow(2,35),es=Math.pow(2,42),ts=Math.pow(2,49),rs=Math.pow(2,56),ns=Math.pow(2,63),is=function(r){return r<Jo?1:r<Yo?2:r<Zo?3:r<Ko?4:r<Qo?5:r<es?6:r<ts?7:r<rs?8:r<ns?9:10},os={encode:zo,decode:Xo,encodingLength:is},ss=os,ye=ss});var ge,he,fe,Re=x(()=>{cn();ge=r=>[ye.decode(r),ye.decode.bytes],he=(r,e,t=0)=>(ye.encode(r,e,t),e),fe=r=>ye.encodingLength(r)});var Ne,un,hn,me,Oe=x(()=>{V();Re();Ne=(r,e)=>{let t=e.byteLength,n=fe(r),i=n+fe(t),o=new Uint8Array(i+t);return he(r,o,0),he(t,o,n),o.set(e,i),new me(r,t,e,o)},un=r=>{let e=$(r),[t,n]=ge(e),[i,o]=ge(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new me(t,i,s,e)},hn=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&zr(r.bytes,e.bytes),me=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}});var xe,ln,ve=x(()=>{Oe();xe=({name:r,code:e,encode:t})=>new ln(r,e,t),ln=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}async digest(e){if(e instanceof Uint8Array){let t=await this.encode(e);return Ne(this.code,t)}else throw Error("Unknown type, must be binary type")}}});var Bt={};R(Bt,{sha256:()=>cs,sha512:()=>as});var dn,cs,as,wn=x(()=>{ve();dn=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),cs=xe({name:"sha2-256",code:18,encode:dn("SHA-256")}),as=xe({name:"sha2-512",code:19,encode:dn("SHA-512")})});var Ct={};R(Ct,{identity:()=>us});var us,yn=x(()=>{ve();V();us=xe({name:"identity",code:0,encode:r=>$(r)})});var gn=x(()=>{V()});var mn=x(()=>{});var F,ls,ps,ds,be,ws,xn,bn,Me,ke,ys,gs,ms,En=x(()=>{Re();Oe();xt();yt();V();F=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ke,byteLength:ke,code:Me,version:Me,multihash:Me,bytes:Me,_baseCache:ke,asCID:ke})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==be)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==ws)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return F.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Ne(e,t);return F.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&hn(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return ps(t,i,e||q.encoder);default:return ds(t,i,e||ue.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return gs(/^0\.0/,ms),!!(e&&(e[bn]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof F)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new F(t,n,i,o||xn(t,n,i.bytes))}else if(e!=null&&e[bn]===!0){let{version:t,multihash:n,code:i}=e,o=un(n);return F.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==be)throw new Error(`Version 0 CID must use dag-pb (code: ${be}) block encoding`);return new F(e,t,n,n.bytes)}case 1:{let i=xn(e,t,n.bytes);return new F(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return F.create(0,be,e)}static createV1(e,t){return F.create(1,e,t)}static decode(e){let[t,n]=F.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=F.inspectBytes(e),n=t.size-t.multihashSize,i=$(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new me(t.multihashCode,t.digestSize,o,i);return[t.version===0?F.createV0(s):F.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[f,d]=ge(e.subarray(t));return t+=d,f},i=n(),o=be;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,a=n(),h=n(),l=t+h,u=l-s;return{version:i,codec:o,multihashCode:a,digestSize:h,multihashSize:u,size:l}}static parse(e,t){let[n,i]=ls(e,t),o=F.decode(i);return o._baseCache.set(n,e),o}},ls=(r,e)=>{switch(r[0]){case"Q":{let t=e||q;return[q.prefix,t.decode(`${q.prefix}${r}`)]}case q.prefix:{let t=e||q;return[q.prefix,t.decode(r)]}case ue.prefix:{let t=e||ue;return[ue.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},ps=(r,e,t)=>{let{prefix:n}=t;if(n!==q.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},ds=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},be=112,ws=18,xn=(r,e,t)=>{let n=fe(r),i=n+fe(e),o=new Uint8Array(i+t.byteLength);return he(r,o,0),he(e,o,n),o.set(t,i),o},bn=Symbol.for("@ipld/js-cid/CID"),Me={writable:!1,configurable:!1,enumerable:!0},ke={writable:!1,enumerable:!1,configurable:!1},ys="0.0.0-dev",gs=(r,e)=>{if(r.test(ys))console.warn(e);else throw new Error(e)},ms=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Bn=x(()=>{En();Re();V();ve();Oe()});var Ft,$c,Cn=x(()=>{Yr();Zr();Kr();Qr();en();yt();tn();xt();rn();wn();yn();gn();mn();Bn();Ft={...ht,...ft,...lt,...pt,...dt,...wt,...gt,...mt,...bt},$c={...Bt,...Ct}});function Fn(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var In,It,xs,An,_n=x(()=>{Cn();In=Fn("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),It=Fn("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),xs={utf8:In,"utf-8":In,hex:Ft.base16,latin1:It,ascii:It,binary:It,...Ft},An=xs});var Un={};R(Un,{fromString:()=>bs});function bs(r,e="utf8"){let t=An[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}var Sn=x(()=>{_n()});var Tn=y((Xc,Ln)=>{"use strict";var Es=async r=>{for await(let e of r)return e};Ln.exports=Es});var je=y(K=>{"use strict";var Dn=ce(),Rn=ct(),Bs=ut(),Cs=$e(),{fromString:Fs}=(Sn(),Un),Is=Tn(),Nn=Fs(`
`);K.encode=r=>Rn.encode.single(new Dn([r,Nn]));K.write=(r,e)=>r.push(K.encode(e));K.writeAll=(r,e)=>{r.push(e.reduce((t,n)=>t.append(K.encode(n)),new Dn))};K.read=async r=>{let e=1,t={[Symbol.asyncIterator](){return this},next:()=>r.next(e)},n=o=>{e=o},i=await Bs(t,Rn.decode({onLength:n}),Is);if(i.get(i.length-1)!==Nn[0])throw Cs(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return i.shallowSlice(0,-1)}});var _t=y((Jc,On)=>{var At=ce();On.exports=r=>{let e=async function*(){let t=yield,n=new At;for await(let i of r){if(!t){t=yield n.append(i),n=new At;continue}for(n.append(i);n.length>=t;){let o=n.shallowSlice(0,t);if(n.consume(t),t=yield o,!t){n.length&&(t=yield n,n=new At);break}}}if(t)throw Object.assign(new Error(`stream ended before ${t} bytes became available`),{code:"ERR_UNDER_READ",buffer:n})}();return e.next(),e}});var Mn=y((Zc,vn)=>{vn.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var qn=y((Qc,jn)=>{var kn=Mn();jn.exports=class{constructor(e){this.hwm=e||16,this.head=new kn(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new kn(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var $n=y((ea,Pn)=>{var Ut=qn();Pn.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new Ut,n,i,o,s=()=>{if(!t.isEmpty()){if(r.writev){let w,g=[];for(;!t.isEmpty();){if(w=t.shift(),w.error)throw w.error;g.push(w.value)}return{done:w.done,value:g}}let p=t.shift();if(p.error)throw p.error;return p}return o?{done:!0}:new Promise((p,w)=>{i=g=>(i=null,g.error?w(g.error):r.writev&&!g.done?p({done:g.done,value:[g.value]}):p(g),n)})},a=p=>i?i(p):(t.push(p),n),h=p=>(t=new Ut,i?i({error:p}):(t.push({error:p}),n)),l=p=>o?n:a({done:!1,value:p}),u=p=>o?n:(o=!0,p?h(p):a({done:!0})),f=()=>(t=new Ut,u(),{done:!0}),d=p=>(u(p),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:s,return:f,throw:d,push:l,end:u},!e)return n;let b=n;return n={[Symbol.asyncIterator](){return this},next(){return b.next()},throw(p){return b.throw(p),e&&(e(p),e=null),{done:!0}},return(){return b.return(),e&&(e(),e=null),{done:!0}},push:l,end(p){return b.end(p),e&&(e(p),e=null),n}},n}});var Gn=y((ta,zn)=>{"use strict";var As=()=>{let r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),r};zn.exports=As});var qe=y((ra,Vn)=>{"use strict";var _s=_t(),Us=$n(),Ss=Gn();Vn.exports=r=>{let e=Us(),t=_s(r.source),n=Ss(),i,o=r.sink(async function*(){yield*e,yield*await n.promise}());return o.catch(a=>{i=a}),{reader:t,writer:e,stream:{sink:a=>i?Promise.reject(i):(n.resolve(a),o),source:t},rest:()=>e.end(),write:e.push,read:async()=>(await t.next()).value}}});var Xn=y((na,Hn)=>{"use strict";var le=Fe()("mss:select"),Ls=$e(),pe=je(),Ts=qe();Hn.exports=async(r,e,t)=>{e=Array.isArray(e)?[...e]:[e];let{reader:n,writer:i,rest:o,stream:s}=Ts(r),a=e.shift();t?(le('select: write ["%s", "%s"]',t,a),pe.writeAll(i,[t,a])):(le('select: write "%s"',a),pe.write(i,a));let h=(await pe.read(n)).toString();if(le('select: read "%s"',h),h===t&&(h=(await pe.read(n)).toString(),le('select: read "%s"',h)),h===a)return o(),{stream:s,protocol:a};for(let l of e){le('select: write "%s"',l),pe.write(i,l);let u=(await pe.read(n)).toString();if(le('select: read "%s" for "%s"',u,l),u===l)return o(),{stream:s,protocol:l}}throw o(),Ls(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}});var St=y(Wn=>{"use strict";Wn.PROTOCOL_ID="/multistream/1.0.0"});var Yn=y((oa,Jn)=>{"use strict";var Ee=Fe()("mss:handle"),Ds=ce(),de=je(),Rs=qe(),{PROTOCOL_ID:Lt}=St();Jn.exports=async(r,e)=>{e=Array.isArray(e)?e:[e];let{writer:t,reader:n,rest:i,stream:o}=Rs(r);for(;;){let s=(await de.read(n)).toString();if(Ee('read "%s"',s),s===Lt){Ee('respond with "%s" for "%s"',Lt,s),de.write(t,Lt);continue}if(e.includes(s))return de.write(t,s),Ee('respond with "%s" for "%s"',s,s),i(),{stream:o,protocol:s};if(s==="ls"){de.write(t,new Ds(e.map(a=>de.encode(a)))),Ee('respond with "%s" for %s',e,s);continue}de.write(t,"na"),Ee('respond with "na" for "%s"',s)}}});var Qn=y((sa,Kn)=>{"use strict";var Ns=_t(),Os=Fe()("it-multistream-select:ls"),Zn=je(),vs=qe(),Ms=ct(),ks=ut();Kn.exports=async r=>{let{reader:e,writer:t,rest:n,stream:i}=vs(r);Os('write "ls"'),Zn.write(t,"ls"),n();let o=await Zn.read(e),s=Ns([o]),a=[];return await ks(s,Ms.decode(),async h=>{for await(let l of h)a.push(l.shallowSlice(0,-1).toString())}),{stream:i,protocols:a}}});var Ps=y(Pe=>{"use strict";var ei=Xn(),js=Yn(),qs=Qn(),{PROTOCOL_ID:Tt}=St();Pe.PROTOCOL_ID=Tt;var Dt=class{constructor(e){this._stream=e,this._shaken=!1}async _handshake(){if(this._shaken)return;let{stream:e}=await ei(this._stream,Tt);this._stream=e,this._shaken=!0}},ti=class extends Dt{select(e){return ei(this._stream,e,this._shaken?null:Tt)}async ls(){await this._handshake();let{stream:e,protocols:t}=await qs(this._stream);return this._stream=e,t}};Pe.Dialer=ti;var ri=class extends Dt{handle(e){return js(this._stream,e)}};Pe.Listener=ri});return Ps();})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
return MultistreamSelect}));
